# 测试账号说明

## 📋 可用测试账号

我已经为您创建了测试账号，可以立即开始测试权限控制功能。

---

## 1️⃣ 管理员账号（可以看到所有功能）

```
用户名：admin
密码：  admin123
角色：  admin
```

**可以访问：**
- ✅ 所有功能模块
- ✅ 网页端的"系统配置"模块
- ✅ Windows端的"设置"模块

---

## 2️⃣ 普通用户账号（受限访问）

```
用户名：testuser
密码：  test123
角色：  user
```

**访问限制：**
- ❌ 看不到网页端的"系统配置"菜单
- ❌ 看不到Windows端的"设置"菜单
- ❌ 尝试通过URL直接访问会被重定向
- ✅ 可以访问其他所有功能模块

---

## 🧪 如何测试

### 网页端测试

1. **打开浏览器访问**：http://localhost:5173

2. **先用管理员登录**：
   - 用户名：`admin`
   - 密码：`admin123`
   - 观察：左侧菜单应该显示"系统配置"选项

3. **退出后用普通用户登录**：
   - 用户名：`testuser`
   - 密码：`test123`
   - 观察：左侧菜单应该**不显示**"系统配置"选项
   - 尝试访问：http://localhost:5173/config
   - 结果：应该被重定向到首页，并显示警告消息

### Windows端测试

1. **启动Windows登录管理器**

2. **先用管理员登录**：
   - 用户名：`admin`
   - 密码：`admin123`
   - 观察：左侧菜单应该显示"设置"选项

3. **退出后用普通用户登录**：
   - 用户名：`testuser`
   - 密码：`test123`
   - 观察：左侧菜单应该**不显示**"设置"选项

---

## ✅ 预期结果对比

| 功能 | 管理员 | 普通用户 |
|------|--------|----------|
| 网页端"系统配置"菜单 | ✅ 显示 | ❌ 隐藏 |
| 访问 /config 页面 | ✅ 允许 | ❌ 重定向 |
| Windows端"设置"菜单 | ✅ 显示 | ❌ 隐藏 |
| 访问 /settings 页面 | ✅ 允许 | ❌ 重定向 |
| 其他功能模块 | ✅ 允许 | ✅ 允许 |

---

## 🔧 如果需要重新创建测试用户

如果测试用户被删除或需要重新创建，可以运行：

```bash
# 方法1：使用SQL脚本（推荐）
psql postgresql://lzc@localhost:5432/geo_system -f create-test-user.sql

# 方法2：手动执行SQL
psql postgresql://lzc@localhost:5432/geo_system
```

然后执行：
```sql
INSERT INTO users (username, password_hash, email, role) 
VALUES (
  'testuser', 
  '$2b$10$zAorZMYyuWbC/rvVl9k1HOlzTGCr3QmECk2OljPYqPLWrA7/pgeNK',
  'testuser@example.com',
  'user'
);
```

---

## 📚 更多信息

- `QUICK_PERMISSION_TEST.md` - 快速测试指南
- `TEST_ACCOUNTS.md` - 完整账号信息和故障排查
- `ROLE_BASED_ACCESS_CONTROL_TEST.md` - 详细测试指南
- `PERMISSION_IMPLEMENTATION_SUMMARY.md` - 技术实现总结

---

## 💡 提示

1. 测试时建议使用浏览器的隐私模式，避免缓存影响
2. 每次切换用户后，建议清除 localStorage
3. 查看浏览器控制台可以看到权限检查的日志
4. Windows端的日志在 Electron 开发者工具中查看

---

**祝测试顺利！** 🎉
