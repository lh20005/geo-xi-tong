# Requirements Document

## Introduction

This document specifies the requirements for fixing the article generation visibility issue where users cannot see generated articles in the article management module after a generation task appears to complete. The root cause is that failed tasks are not clearly communicated to users, and there are timeout issues with AI API calls that prevent article generation from completing successfully.

## Glossary

- **Generation Task**: A background job that creates multiple articles based on distillation data, knowledge base content, and article settings
- **Article Management Module**: The user interface where users can view, edit, and delete generated articles
- **Task Status**: The current state of a generation task (pending, running, completed, failed)
- **Ollama API**: The local AI service used for article generation
- **Timeout**: The maximum time allowed for an API call before it is cancelled

## Requirements

### Requirement 1

**User Story:** As a user, I want to clearly see when article generation tasks fail, so that I understand why articles are not appearing in the article management module.

#### Acceptance Criteria

1. WHEN a generation task fails THEN the system SHALL display the failure status prominently in the task list
2. WHEN a user views a failed task THEN the system SHALL display the error message explaining why the task failed
3. WHEN a task fails due to timeout THEN the system SHALL provide a clear message indicating the timeout issue
4. WHEN a task completes with zero articles generated THEN the system SHALL mark the task as failed rather than completed

### Requirement 2

**User Story:** As a user, I want to retry failed article generation tasks, so that I can recover from temporary failures without recreating the entire task configuration.

#### Acceptance Criteria

1. WHEN a task has failed status THEN the system SHALL provide a retry button in the task detail view
2. WHEN a user clicks the retry button THEN the system SHALL reset the task status to pending and restart execution
3. WHEN a task is retried THEN the system SHALL preserve the original task configuration
4. WHEN a retry is initiated THEN the system SHALL clear the previous error message

### Requirement 3

**User Story:** As a user, I want article generation to handle AI API timeouts gracefully, so that temporary network issues do not cause complete task failure.

#### Acceptance Criteria

1. WHEN an AI API call times out THEN the system SHALL increase the timeout limit to 120 seconds
2. WHEN an AI API call fails THEN the system SHALL retry the call up to 2 additional times before marking it as failed
3. WHEN retrying an AI API call THEN the system SHALL wait 5 seconds between retry attempts
4. WHEN all retry attempts fail THEN the system SHALL log the detailed error and continue to the next article

### Requirement 4

**User Story:** As a user, I want to see real-time progress updates during article generation, so that I know the system is working and can estimate completion time.

#### Acceptance Criteria

1. WHEN a task is running THEN the system SHALL update the progress percentage after each article is generated
2. WHEN viewing a running task THEN the system SHALL display the current progress as "X of Y articles generated"
3. WHEN a task is running THEN the system SHALL refresh the task status automatically every 5 seconds
4. WHEN an article generation fails THEN the system SHALL continue generating remaining articles and update the progress accordingly

### Requirement 5

**User Story:** As a user, I want to navigate directly from a completed task to view the generated articles, so that I can quickly access and review the results.

#### Acceptance Criteria

1. WHEN a task has generated articles THEN the system SHALL display a "View Articles" button in the task detail view
2. WHEN a user clicks "View Articles" THEN the system SHALL navigate to the article management module filtered by the task ID
3. WHEN viewing articles filtered by task ID THEN the system SHALL display only articles generated by that specific task
4. WHEN no articles exist for a task THEN the system SHALL display a message indicating no articles were generated
