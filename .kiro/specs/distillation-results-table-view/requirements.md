# 需求文档

## 简介

本功能旨在改进蒸馏结果模块的展示方式，将当前的卡片式列表改造为表格式列表，使其与关键词蒸馏模块的历史记录展示风格保持一致。同时增加"被引用次数"统计功能，帮助用户了解每个蒸馏结果在文章生成中的使用情况。

## 术语表

- **蒸馏结果（Distillation Result）**: 通过关键词蒸馏生成的话题问题
- **被引用次数（Reference Count）**: 某个蒸馏结果（话题）在生成文章时被使用的次数
- **话题（Topic）**: 存储在topics表中的蒸馏问题记录
- **文章（Article）**: 基于蒸馏结果生成的文章内容
- **蒸馏记录（Distillation Record）**: distillations表中的记录，包含关键词和相关话题

## 需求

### 需求 1

**用户故事：** 作为用户，我希望以表格形式查看蒸馏结果，以便更清晰地浏览和管理大量数据

#### 验收标准

1. WHEN 用户访问蒸馏结果页面 THEN 系统应当以表格形式展示所有蒸馏结果
2. WHEN 表格展示蒸馏结果 THEN 系统应当包含以下列：关键词、蒸馏结果（话题内容）、被引用次数、蒸馏时间
3. WHEN 表格展示蒸馏结果 THEN 系统应当按照蒸馏时间倒序排列（最新的在前）
4. WHEN 表格数据超过一页 THEN 系统应当提供分页功能
5. WHEN 用户点击表格列标题 THEN 系统应当支持按该列排序

### 需求 2

**用户故事：** 作为用户，我希望看到每个蒸馏结果的被引用次数，以便了解哪些话题最受欢迎和最常被使用

#### 验收标准

1. WHEN 系统查询蒸馏结果 THEN 系统应当统计每个话题在articles表中被引用的次数
2. WHEN 话题从未被引用 THEN 系统应当显示引用次数为0
3. WHEN 话题被多次引用 THEN 系统应当准确累计所有引用次数
4. WHEN 文章被删除 THEN 系统应当相应减少该话题的引用计数
5. WHEN 展示被引用次数 THEN 系统应当使用醒目的样式突出显示高频引用的话题

### 需求 3

**用户故事：** 作为用户，我希望能够筛选和搜索蒸馏结果，以便快速找到我需要的内容

#### 验收标准

1. WHEN 用户输入搜索关键词 THEN 系统应当在话题内容中进行模糊匹配搜索
2. WHEN 用户选择关键词筛选 THEN 系统应当只显示该关键词下的蒸馏结果
3. WHEN 用户选择AI模型筛选 THEN 系统应当只显示该模型生成的蒸馏结果
4. WHEN 用户应用筛选条件 THEN 系统应当实时更新表格数据和统计信息
5. WHEN 用户清除筛选 THEN 系统应当恢复显示所有蒸馏结果

### 需求 4

**用户故事：** 作为用户，我希望能够批量管理蒸馏结果，以便高效地删除不需要的内容

#### 验收标准

1. WHEN 用户勾选表格行 THEN 系统应当标记该行为选中状态
2. WHEN 用户点击全选 THEN 系统应当选中当前页的所有行
3. WHEN 用户点击删除选中 THEN 系统应当删除所有选中的蒸馏结果
4. WHEN 删除蒸馏结果 THEN 系统应当从数据库的topics表中永久删除
5. WHEN 删除操作执行前 THEN 系统应当显示确认对话框防止误操作

### 需求 5

**用户故事：** 作为用户，我希望看到蒸馏结果的统计概览，以便快速了解整体数据情况

#### 验收标准

1. WHEN 页面加载 THEN 系统应当显示总话题数量统计
2. WHEN 页面加载 THEN 系统应当显示不同关键词的数量统计
3. WHEN 页面加载 THEN 系统应当显示总被引用次数统计
4. WHEN 应用筛选条件 THEN 系统应当更新统计数据以反映当前筛选结果
5. WHEN 统计数据展示 THEN 系统应当使用卡片形式在表格上方显示

### 需求 6

**用户故事：** 作为开发者，我希望数据库能够高效查询被引用次数，以便系统性能良好

#### 验收标准

1. WHEN 查询蒸馏结果列表 THEN 系统应当使用JOIN和聚合查询一次性获取所有数据
2. WHEN 文章表数据量大 THEN 系统应当使用索引优化查询性能
3. WHEN 前端请求数据 THEN 后端应当返回包含引用次数的完整数据结构
4. WHEN 数据传输 THEN 系统应当使用合理的数据格式减少传输量
5. WHEN 查询失败 THEN 系统应当返回明确的错误信息并记录日志
