# 需求文档

## 简介

企业图库是一个图片资源管理系统，允许用户创建相册、上传图片、查看和管理图片资源。该模块位于侧边栏"关键词蒸馏"模块下方，提供类似"蒸馏历史"的卡片式界面，方便用户组织和调用企业图片资源。

## 术语表

- **系统 (System)**: 企业图库管理系统
- **用户 (User)**: 使用企业图库功能的操作人员
- **相册 (Album)**: 图片的集合容器，用于组织和分类图片
- **图片 (Image)**: 上传到系统中的图像文件
- **数据库 (Database)**: 后端PostgreSQL数据库，用于存储相册和图片数据
- **缩略图 (Thumbnail)**: 图片的压缩预览版本
- **Base64编码 (Base64 Encoding)**: 将二进制图片数据转换为文本格式的编码方式

## 需求

### 需求 1

**用户故事:** 作为用户，我想要在侧边栏看到企业图库入口，以便快速访问图片管理功能

#### 验收标准

1. WHEN 用户查看侧边栏 THEN 系统 SHALL 在"关键词蒸馏"菜单项下方显示"企业图库"菜单项
2. WHEN 用户点击"企业图库"菜单项 THEN 系统 SHALL 导航到企业图库页面
3. WHEN 企业图库页面被激活 THEN 系统 SHALL 在侧边栏高亮显示"企业图库"菜单项

### 需求 2

**用户故事:** 作为用户，我想要创建新相册，以便组织和分类不同类型的图片

#### 验收标准

1. WHEN 用户访问企业图库页面 THEN 系统 SHALL 显示"创建相册"按钮
2. WHEN 用户点击"创建相册"按钮 THEN 系统 SHALL 显示相册创建对话框
3. WHEN 用户在对话框中输入相册名称并提交 THEN 系统 SHALL 创建新相册并保存到数据库
4. WHEN 相册名称为空或仅包含空白字符 THEN 系统 SHALL 阻止创建并显示错误提示
5. WHEN 相册创建成功 THEN 系统 SHALL 显示成功消息并刷新相册列表

### 需求 3

**用户故事:** 作为用户，我想要在创建相册时上传图片，以便快速填充相册内容

#### 验收标准

1. WHEN 用户在相册创建对话框中 THEN 系统 SHALL 提供图片上传功能
2. WHEN 用户选择图片文件 THEN 系统 SHALL 验证文件类型为图片格式（JPEG、PNG、GIF、WebP）
3. WHEN 用户选择的文件不是图片格式 THEN 系统 SHALL 拒绝上传并显示错误提示
4. WHEN 用户选择的图片文件大小超过5MB THEN 系统 SHALL 拒绝上传并显示错误提示
5. WHEN 用户上传图片 THEN 系统 SHALL 将图片转换为Base64编码并保存到数据库
6. WHEN 图片上传成功 THEN 系统 SHALL 显示图片预览缩略图

### 需求 4

**用户故事:** 作为用户，我想要查看所有相册列表，以便了解现有的图片资源组织情况

#### 验收标准

1. WHEN 用户访问企业图库页面 THEN 系统 SHALL 显示所有相册的卡片列表
2. WHEN 显示相册卡片 THEN 系统 SHALL 展示相册名称、图片数量、创建时间和封面图
3. WHEN 相册包含图片 THEN 系统 SHALL 使用第一张图片作为封面图
4. WHEN 相册不包含图片 THEN 系统 SHALL 显示默认占位图标
5. WHEN 没有相册存在 THEN 系统 SHALL 显示空状态提示信息
6. WHEN 相册列表加载失败 THEN 系统 SHALL 显示错误消息

### 需求 5

**用户故事:** 作为用户，我想要查看相册中的所有图片，以便浏览和选择需要的图片资源

#### 验收标准

1. WHEN 用户点击相册卡片 THEN 系统 SHALL 打开相册详情页面
2. WHEN 相册详情页面打开 THEN 系统 SHALL 显示相册名称和所有图片的网格布局
3. WHEN 显示图片 THEN 系统 SHALL 以缩略图形式展示每张图片
4. WHEN 用户点击缩略图 THEN 系统 SHALL 在模态框中显示原始尺寸图片
5. WHEN 相册为空 THEN 系统 SHALL 显示空状态提示并提供上传入口

### 需求 6

**用户故事:** 作为用户，我想要向已有相册添加更多图片，以便扩充相册内容

#### 验收标准

1. WHEN 用户在相册详情页面 THEN 系统 SHALL 显示"上传图片"按钮
2. WHEN 用户点击"上传图片"按钮 THEN 系统 SHALL 打开文件选择对话框
3. WHEN 用户选择多个图片文件 THEN 系统 SHALL 支持批量上传
4. WHEN 批量上传图片 THEN 系统 SHALL 显示上传进度
5. WHEN 所有图片上传完成 THEN 系统 SHALL 刷新图片列表并显示新上传的图片

### 需求 7

**用户故事:** 作为用户，我想要删除不需要的图片，以便保持相册内容的整洁和相关性

#### 验收标准

1. WHEN 用户在相册详情页面查看图片 THEN 系统 SHALL 在每张图片上显示删除按钮
2. WHEN 用户点击删除按钮 THEN 系统 SHALL 显示确认对话框
3. WHEN 用户确认删除 THEN 系统 SHALL 从数据库中删除该图片记录
4. WHEN 图片删除成功 THEN 系统 SHALL 从界面移除该图片并显示成功消息
5. WHEN 删除相册中的最后一张图片 THEN 系统 SHALL 更新相册封面为默认占位图

### 需求 8

**用户故事:** 作为用户，我想要删除整个相册，以便清理不再需要的图片集合

#### 验收标准

1. WHEN 用户在相册列表或详情页面 THEN 系统 SHALL 提供删除相册功能
2. WHEN 用户点击删除相册按钮 THEN 系统 SHALL 显示确认对话框并警告将删除所有图片
3. WHEN 用户确认删除相册 THEN 系统 SHALL 删除相册及其所有关联图片
4. WHEN 相册删除成功 THEN 系统 SHALL 返回相册列表页面并显示成功消息

### 需求 9

**用户故事:** 作为用户，我想要编辑相册名称，以便更好地描述相册内容

#### 验收标准

1. WHEN 用户在相册列表或详情页面 THEN 系统 SHALL 提供编辑相册名称功能
2. WHEN 用户点击编辑按钮 THEN 系统 SHALL 显示编辑对话框并预填充当前名称
3. WHEN 用户修改名称并提交 THEN 系统 SHALL 更新数据库中的相册名称
4. WHEN 新名称为空或仅包含空白字符 THEN 系统 SHALL 阻止更新并显示错误提示
5. WHEN 名称更新成功 THEN 系统 SHALL 刷新显示并显示成功消息

### 需求 10

**用户故事:** 作为开发者，我想要通过API调用图片资源，以便在其他功能模块中使用企业图库的图片

#### 验收标准

1. WHEN 系统提供图片API端点 THEN 系统 SHALL 支持按相册ID查询图片列表
2. WHEN 系统提供图片API端点 THEN 系统 SHALL 支持按图片ID获取单张图片数据
3. WHEN API返回图片数据 THEN 系统 SHALL 包含Base64编码的图片内容和元数据
4. WHEN API请求的资源不存在 THEN 系统 SHALL 返回404状态码和错误消息
5. WHEN API请求参数无效 THEN 系统 SHALL 返回400状态码和错误消息
