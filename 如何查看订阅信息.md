# 如何查看订阅信息

## 📍 访问路径

### 方式 1：通过导航菜单（推荐）

1. 登录主应用：`http://localhost:5173`
2. 点击右上角的**用户头像**
3. 在下拉菜单中点击**"个人中心"**
4. 自动跳转到 `/user-center` 页面

### 方式 2：直接访问 URL

直接在浏览器中访问：
```
http://localhost:5173/user-center
```

## 📊 用户中心页面功能

### 1. 我的订阅（顶部卡片）

显示当前订阅的详细信息：

- **当前套餐**：专业版
- **到期时间**：2026-02-04（一个月后）
- **订阅状态**：正常/已过期
- **自动续费**：已开启/已关闭

**操作按钮**：
- 🔄 开启/关闭自动续费
- 🚀 升级套餐

### 2. 使用统计（中间卡片）

显示各项功能的使用情况：

- **关键词蒸馏次数**：已用 / 总额度
- **AI 文章生成次数**：已用 / 总额度
- **多平台发布次数**：已用 / 总额度
- **知识库文档数量**：已用 / 总额度
- **图库图片数量**：已用 / 总额度

每项功能都有：
- 📊 进度条显示使用百分比
- ⏰ 重置周期（每日/每月/永久）
- ⚠️  配额预警（使用超过 90% 时提示）

### 3. 订单记录（底部表格）

显示所有订单历史：

| 订单号 | 套餐 | 金额 | 状态 | 创建时间 | 支付时间 |
|--------|------|------|------|----------|----------|
| ORD... | 专业版 | ¥0.01 | 已支付 | 2026-01-04 10:17 | 2026-01-04 10:17 |

**订单状态**：
- 🟠 待支付
- 🟢 已支付
- ⚪ 已关闭
- 🔴 已退款

## ✅ 验证订阅信息

### 数据库查询

如果需要直接查询数据库确认：

```bash
# 查询用户订阅
psql -U lzc -d geo_system -c "
SELECT 
  us.id,
  u.username,
  sp.plan_name,
  us.status,
  us.start_date,
  us.end_date,
  us.auto_renew
FROM user_subscriptions us
JOIN users u ON us.user_id = u.id
JOIN subscription_plans sp ON us.plan_id = sp.id
WHERE u.username = 'lzc2005'
ORDER BY us.created_at DESC
LIMIT 1;
"

# 查询订单记录
psql -U lzc -d geo_system -c "
SELECT 
  o.order_no,
  sp.plan_name,
  o.amount,
  o.status,
  o.created_at,
  o.paid_at
FROM orders o
JOIN subscription_plans sp ON o.plan_id = sp.id
JOIN users u ON o.user_id = u.id
WHERE u.username = 'lzc2005'
ORDER BY o.created_at DESC;
"
```

### 当前订阅状态

根据你刚才的支付，当前状态应该是：

- ✅ **用户**: lzc2005
- ✅ **套餐**: 专业版
- ✅ **状态**: active（正常）
- ✅ **开始时间**: 2026-01-04 10:17:04
- ✅ **到期时间**: 2026-02-04 10:17:04（一个月后）
- ✅ **订单号**: ORD176749301280199263772
- ✅ **支付金额**: ¥0.01
- ✅ **支付状态**: paid（已支付）

## 🎯 专业版权限

购买专业版后，你将获得以下权限：

### 配额限制（根据套餐配置）

查询当前套餐的具体配额：

```bash
psql -U lzc -d geo_system -c "
SELECT 
  sp.plan_name,
  pf.feature_name,
  pf.feature_value,
  pf.reset_period
FROM subscription_plans sp
JOIN plan_features pf ON sp.id = pf.plan_id
WHERE sp.plan_code = 'professional'
ORDER BY pf.feature_code;
"
```

### 典型专业版配额（示例）

- 📝 关键词蒸馏：100次/月
- 🤖 AI 文章生成：200篇/月
- 📤 多平台发布：500次/月
- 📚 知识库文档：100个
- 🖼️  图库图片：1000张

## 🔧 修复说明

### 已修复的问题

**问题**：点击"个人中心"跳转到 Landing 网站的 `/profile`（不存在）

**修复**：
- 文件：`client/src/components/Layout/Header.tsx`
- 修改：将跳转目标改为主应用的 `/user-center`
- 状态：✅ 已修复

### 如何应用修复

前端需要重新构建：

```bash
# 重新构建前端
npm run client:build

# 或者如果正在开发模式运行，会自动热更新
# npm run client:dev
```

## 📱 移动端访问

如果使用 Windows 登录管理器（Electron 应用）：

1. 打开 Windows 登录管理器
2. 点击左侧菜单的**"个人中心"**
3. 查看订阅信息

路由配置：`windows-login-manager/src/routes/index.tsx`

## 🎉 测试步骤

1. **登录主应用**
   ```
   http://localhost:5173
   用户名：lzc2005
   密码：Woshixiaogou2005
   ```

2. **访问个人中心**
   - 点击右上角用户头像
   - 点击"个人中心"

3. **验证订阅信息**
   - ✅ 当前套餐：专业版
   - ✅ 到期时间：2026-02-04
   - ✅ 订阅状态：正常
   - ✅ 订单记录：显示刚才的支付订单

4. **查看使用统计**
   - 查看各项功能的配额
   - 确认配额已按专业版分配

## 🚀 后续功能

### 已实现
- ✅ 订阅信息展示
- ✅ 使用统计展示
- ✅ 订单记录查询
- ✅ 自动续费开关
- ✅ 套餐升级功能
- ✅ 实时 WebSocket 更新

### 待优化
- ⏳ 添加订阅历史记录
- ⏳ 添加发票下载功能
- ⏳ 添加退款申请功能
- ⏳ 添加配额使用趋势图表

---

**更新时间**: 2026-01-04 10:45
**相关文件**: 
- `client/src/pages/UserCenterPage.tsx`
- `client/src/components/Layout/Header.tsx`
- `client/src/App.tsx`
