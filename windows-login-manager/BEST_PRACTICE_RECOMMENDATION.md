# åŸºäºä¸šç•Œæœ€ä½³å®è·µçš„è§£å†³æ–¹æ¡ˆæ¨è

**è°ƒç ”æ—¥æœŸ**: 2026-01-20  
**åŸºäº**: 2024å¹´æœ€æ–°æŠ€æœ¯è¶‹åŠ¿å’Œç”Ÿäº§ç¯å¢ƒå®è·µ

---

## ğŸ“Š è°ƒç ”ç»“è®º

æ ¹æ®å¯¹ä¸šç•Œæœ€ä½³å®è·µçš„è°ƒç ”ï¼Œé’ˆå¯¹ä½ çš„éœ€æ±‚ï¼ˆElectron æ¡Œé¢åº”ç”¨ä¸æœåŠ¡å™¨å®æ—¶æ•°æ®åŒæ­¥ï¼‰ï¼Œ**æ¨èé‡‡ç”¨æ··åˆæ–¹æ¡ˆ**ï¼š

### ğŸ¯ æ¨èæ–¹æ¡ˆï¼šæ¸è¿›å¼æ··åˆæ¶æ„

**çŸ­æœŸï¼ˆç«‹å³å®æ–½ï¼‰**: æ™ºèƒ½è½®è¯¢ + äº‹ä»¶è§¦å‘åˆ·æ–°  
**ä¸­æœŸï¼ˆ1-2å‘¨ï¼‰**: æ·»åŠ  Server-Sent Events (SSE)  
**é•¿æœŸï¼ˆå¯é€‰ï¼‰**: å‡çº§åˆ° WebSocketï¼ˆå¦‚æœéœ€è¦åŒå‘é€šä¿¡ï¼‰

---

## ğŸ” ä¸šç•Œè°ƒç ”å‘ç°

### 1. WebSocket åœ¨ 2024 å¹´çš„ç°çŠ¶

æ ¹æ® [Ably çš„è°ƒç ”æŠ¥å‘Š](https://ably.com/blog/websocket-compatibility)ï¼š

**âœ… ä¼˜åŠ¿**ï¼š
- æµè§ˆå™¨æ”¯æŒç‡ 100%ï¼ˆè‡ª 2014 å¹´èµ·ï¼‰
- åŒå‘å…¨åŒå·¥é€šä¿¡
- ä½å»¶è¿Ÿï¼ˆ<100msï¼‰
- èµ„æºæ•ˆç‡é«˜

**âš ï¸ ç°å®æŒ‘æˆ˜**ï¼š
- **ä¼ä¸šç¯å¢ƒå…¼å®¹æ€§é—®é¢˜**ï¼šæ”¿åºœæœºæ„ã€å­¦æ ¡ã€åŒ»é™¢ã€å‘¼å«ä¸­å¿ƒç­‰ä¼ä¸šç¯å¢ƒçš„é˜²ç«å¢™/ä»£ç†å¯èƒ½ä¸æ”¯æŒ
- **ç§»åŠ¨ç½‘ç»œé—®é¢˜**ï¼šç§»åŠ¨æ•°æ®ç½‘ç»œä¸‹ WebSocket è¿æ¥å¯èƒ½å¤±è´¥ï¼ˆGitHub 2021å¹´æŠ¥å‘Šï¼‰
- **ç½‘ç»œåˆ‡æ¢é—®é¢˜**ï¼šWiFi â†” ç§»åŠ¨æ•°æ®åˆ‡æ¢æ—¶è¿æ¥ä¸­æ–­
- **ä»£ç†æœåŠ¡å™¨**ï¼šæŸäº›ä»£ç†ä¸ç†è§£ WebSocket åè®®
- **æ‰©å±•å¤æ‚æ€§**ï¼šæœ‰çŠ¶æ€è¿æ¥ï¼Œæ‰©å±•éš¾åº¦é«˜

**å…³é”®å¼•ç”¨**ï¼š
> "While WebSockets are generally very robust these days, connections can still fail in weird and wonderful ways that might be out of your control... Instead of putting the onus on your user, you might still consider a fallback to HTTP to ensure the best possible user experience."

### 2. ä¸‰ç§å®æ—¶é€šä¿¡æ–¹å¼å¯¹æ¯”

æ ¹æ® [OpenReplay çš„æŠ€æœ¯åˆ†æ](https://blog.openreplay.com/websockets-sse-long-polling/)ï¼š

| ç‰¹æ€§ | è½®è¯¢ (Polling) | SSE | WebSocket |
|------|---------------|-----|-----------|
| **å®ç°éš¾åº¦** | â­ ç®€å• | â­â­ ä¸­ç­‰ | â­â­â­ å¤æ‚ |
| **æœåŠ¡å™¨è´Ÿè½½** | âŒ é«˜ | âœ… ä½ | âœ… ä½ |
| **å®æ—¶æ€§** | âš ï¸ 10ç§’å»¶è¿Ÿ | âœ… <1ç§’ | âœ… <1ç§’ |
| **å…¼å®¹æ€§** | âœ… 100% | âœ… 98% | âš ï¸ 95% |
| **åŒå‘é€šä¿¡** | âŒ å¦ | âŒ å¦ | âœ… æ˜¯ |
| **è‡ªåŠ¨é‡è¿** | âœ… ç®€å• | âœ… å†…ç½® | âš ï¸ éœ€æ‰‹åŠ¨å®ç° |
| **é˜²ç«å¢™ç©¿é€** | âœ… ä¼˜ç§€ | âœ… ä¼˜ç§€ | âš ï¸ å¯èƒ½è¢«é˜»æ­¢ |
| **æ‰©å±•æ€§** | âœ… ç®€å• | âœ… ä¸­ç­‰ | âŒ å¤æ‚ |

### 3. ä¸šç•Œæ¨èçš„æœ€ä½³å®è·µ

æ ¹æ®å¤šä¸ªæ¥æºçš„ç»¼åˆåˆ†æï¼š

**Socket.IO å’Œ SignalR çš„ç­–ç•¥**ï¼ˆä¸šç•Œæ ‡å‡†ï¼‰ï¼š
1. **å…ˆä½¿ç”¨ HTTP æ–¹æ³•**ï¼ˆé•¿è½®è¯¢/SSEï¼‰å»ºç«‹è¿æ¥
2. **ç„¶åå‡çº§åˆ° WebSocket**ï¼ˆå¦‚æœå¯ç”¨ï¼‰
3. **è‡ªåŠ¨é™çº§**ï¼ˆå¦‚æœ WebSocket å¤±è´¥ï¼‰

**å…³é”®å¼•ç”¨**ï¼š
> "Both libraries start with a HTTP-based method like long polling or response streaming before attempting to establish a WebSocket connection and seamlessly shift the protocol from HTTP to WebSocket for improved latency and scalability."

---

## ğŸ¯ é’ˆå¯¹ä½ çš„éœ€æ±‚çš„æœ€ä½³æ–¹æ¡ˆ

### ä½ çš„å…·ä½“åœºæ™¯åˆ†æ

**éœ€æ±‚ç‰¹ç‚¹**ï¼š
- âœ… å•å‘é€šä¿¡ï¼ˆæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼‰
- âœ… é€šçŸ¥ç±»å‹ï¼šä»»åŠ¡åˆ›å»ºã€çŠ¶æ€å˜åŒ–ã€æ–‡ç« ç”Ÿæˆå®Œæˆ
- âœ… é¢‘ç‡ï¼šä½åˆ°ä¸­ç­‰ï¼ˆæ¯åˆ†é’Ÿå‡ æ¬¡ï¼‰
- âœ… ç”¨æˆ·ç¯å¢ƒï¼šå¯èƒ½åŒ…æ‹¬ä¼ä¸šç½‘ç»œ
- âœ… ç¦»çº¿æ”¯æŒï¼šéœ€è¦

**ä¸éœ€è¦çš„ç‰¹æ€§**ï¼š
- âŒ å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨çš„å®æ—¶æ¨é€ï¼ˆå·²æœ‰ HTTP APIï¼‰
- âŒ æ¯«ç§’çº§å»¶è¿Ÿï¼ˆ1-2ç§’å¯æ¥å—ï¼‰
- âŒ å¤§é‡å¹¶å‘è¿æ¥ï¼ˆå•ç”¨æˆ·åº”ç”¨ï¼‰

### æ¨èæ–¹æ¡ˆï¼šæ¸è¿›å¼æ··åˆæ¶æ„

#### é˜¶æ®µ 1ï¼šæ™ºèƒ½è½®è¯¢ï¼ˆç«‹å³å®æ–½ï¼‰â­ æ¨è

**ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ä½³èµ·ç‚¹**ï¼š
1. **å®ç°ç®€å•**ï¼šæ— éœ€æœåŠ¡å™¨ç«¯æ”¹åŠ¨
2. **å…¼å®¹æ€§ 100%**ï¼šä»»ä½•ç½‘ç»œç¯å¢ƒéƒ½èƒ½å·¥ä½œ
3. **å¯é æ€§é«˜**ï¼šæ— éœ€å¤„ç†è¿æ¥æ–­å¼€/é‡è¿
4. **æ˜“äºè°ƒè¯•**ï¼šæ ‡å‡† HTTP è¯·æ±‚
5. **æˆæœ¬ä½**ï¼šå¼€å‘æ—¶é—´ < 1å°æ—¶

**ä¼˜åŒ–ç­–ç•¥**ï¼š
```typescript
// æ™ºèƒ½è½®è¯¢ï¼šæ ¹æ®æ´»åŠ¨çŠ¶æ€è°ƒæ•´é¢‘ç‡
const pollInterval = hasActiveTasks ? 2000 : 10000; // 2ç§’ vs 10ç§’

// æ–°ä»»åŠ¡æ£€æµ‹ï¼šæ¯10ç§’æ£€æŸ¥ä¸€æ¬¡æ–°ä»»åŠ¡
setInterval(checkNewTasks, 10000);

// äº‹ä»¶è§¦å‘ï¼šä»»åŠ¡åˆ›å»ºåç«‹å³åˆ·æ–°
await createTask(config);
await refreshTasks();
```

**æ€§èƒ½æ•°æ®**ï¼š
- å»¶è¿Ÿï¼š2-10ç§’ï¼ˆå¯æ¥å—ï¼‰
- æœåŠ¡å™¨è´Ÿè½½ï¼šä½ï¼ˆæ¯ç”¨æˆ· 0.1-0.5 req/sï¼‰
- ç½‘ç»œæµé‡ï¼š~1KB/è¯·æ±‚

#### é˜¶æ®µ 2ï¼šæ·»åŠ  SSEï¼ˆ1-2å‘¨åï¼‰â­â­ å¼ºçƒˆæ¨è

**ä¸ºä»€ä¹ˆ SSE æ¯” WebSocket æ›´é€‚åˆä½ **ï¼š

æ ¹æ®ä¸šç•Œåˆ†æï¼ŒSSE æ˜¯ä½ åœºæ™¯çš„æœ€ä½³é€‰æ‹©ï¼š

**âœ… SSE çš„ä¼˜åŠ¿**ï¼š
1. **å•å‘é€šä¿¡**ï¼šå®Œç¾åŒ¹é…ä½ çš„éœ€æ±‚ï¼ˆæœåŠ¡å™¨æ¨é€é€šçŸ¥ï¼‰
2. **è‡ªåŠ¨é‡è¿**ï¼šæµè§ˆå™¨å†…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨å®ç°
3. **HTTP åè®®**ï¼šé˜²ç«å¢™å‹å¥½ï¼Œå…¼å®¹æ€§ 98%
4. **å®ç°ç®€å•**ï¼šæ¯” WebSocket ç®€å• 50%
5. **èµ„æºæ•ˆç‡**ï¼šæ¯”è½®è¯¢èŠ‚çœ 90% å¸¦å®½
6. **æ–‡æœ¬æ ¼å¼**ï¼šæ˜“äºè°ƒè¯•

**å…³é”®å¼•ç”¨**ï¼š
> "Choose SSE when: You only need server-to-client updates (one-way communication), You want automatic reconnection built-in, You're building dashboards, notifications, or live feeds"

**å®ç°ç¤ºä¾‹**ï¼š

```typescript
// æœåŠ¡å™¨ç«¯ï¼ˆExpressï¼‰
app.get('/events', (req, res) => {
  res.setHeader('Content-Type', 'text/event-stream');
  res.setHeader('Cache-Control', 'no-cache');
  res.setHeader('Connection', 'keep-alive');
  
  // å‘é€äº‹ä»¶
  const sendEvent = (data) => {
    res.write(`data: ${JSON.stringify(data)}\n\n`);
  };
  
  // ç”¨æˆ·åŠ å…¥æˆ¿é—´
  eventEmitter.on(`user:${userId}:task`, sendEvent);
  
  // æ¸…ç†
  req.on('close', () => {
    eventEmitter.off(`user:${userId}:task`, sendEvent);
  });
});

// å®¢æˆ·ç«¯ï¼ˆReactï¼‰
useEffect(() => {
  const eventSource = new EventSource('/api/events');
  
  eventSource.onmessage = (event) => {
    const data = JSON.parse(event.data);
    handleUpdate(data);
  };
  
  // è‡ªåŠ¨é‡è¿ï¼ˆæµè§ˆå™¨å†…ç½®ï¼‰
  eventSource.onerror = () => {
    console.log('Connection lost, auto-reconnecting...');
  };
  
  return () => eventSource.close();
}, []);
```

**æ€§èƒ½å¯¹æ¯”**ï¼š

| æŒ‡æ ‡ | è½®è¯¢ | SSE | WebSocket |
|------|------|-----|-----------|
| å»¶è¿Ÿ | 2-10ç§’ | <1ç§’ | <1ç§’ |
| æœåŠ¡å™¨è´Ÿè½½ | é«˜ | ä½ | ä½ |
| å®ç°å¤æ‚åº¦ | ç®€å• | ä¸­ç­‰ | å¤æ‚ |
| å…¼å®¹æ€§ | 100% | 98% | 95% |
| å¼€å‘æ—¶é—´ | 1å°æ—¶ | 4å°æ—¶ | 8å°æ—¶ |

#### é˜¶æ®µ 3ï¼šWebSocketï¼ˆå¯é€‰ï¼Œä»…åœ¨éœ€è¦æ—¶ï¼‰

**ä»€ä¹ˆæ—¶å€™éœ€è¦ WebSocket**ï¼š
- âŒ ä¸éœ€è¦ï¼šä½ çš„åœºæ™¯ï¼ˆå•å‘é€šçŸ¥ï¼‰
- âœ… éœ€è¦ï¼šå®æ—¶èŠå¤©ã€åä½œç¼–è¾‘ã€æ¸¸æˆ

**å¦‚æœæœªæ¥éœ€è¦ï¼Œå»ºè®®ä½¿ç”¨ Socket.IO**ï¼š
- è‡ªåŠ¨é™çº§åˆ° HTTP
- å†…ç½®é‡è¿æœºåˆ¶
- æˆ¿é—´å’Œå‘½åç©ºé—´
- ç”Ÿäº§çº§å¯é æ€§

---

## ğŸ“‹ å®æ–½è®¡åˆ’

### ç¬¬ä¸€å‘¨ï¼šæ™ºèƒ½è½®è¯¢ï¼ˆå·²å®Œæˆï¼‰

**çŠ¶æ€**: âœ… å·²å®æ–½

**å®ç°å†…å®¹**ï¼š
- [x] æ–°ä»»åŠ¡æ£€æµ‹ï¼ˆæ¯10ç§’ï¼‰
- [x] ä»»åŠ¡åˆ›å»ºåç«‹å³åˆ·æ–°
- [x] è‡ªåŠ¨åŒæ­¥é€»è¾‘ä¼˜åŒ–

**æ•ˆæœ**ï¼š
- å»¶è¿Ÿï¼š10ç§’å†…å‘ç°æ–°ä»»åŠ¡
- å¯é æ€§ï¼š100%
- å…¼å®¹æ€§ï¼š100%

### ç¬¬äºŒå‘¨ï¼šæ·»åŠ  SSEï¼ˆæ¨èï¼‰

**é¢„è®¡å·¥ä½œé‡**: 4-6å°æ—¶

**æœåŠ¡å™¨ç«¯**ï¼ˆ2å°æ—¶ï¼‰ï¼š
1. åˆ›å»º `/api/events` ç«¯ç‚¹
2. å®ç°äº‹ä»¶å‘å°„å™¨
3. é›†æˆåˆ°æ–‡ç« ç”ŸæˆæœåŠ¡

**å®¢æˆ·ç«¯**ï¼ˆ2å°æ—¶ï¼‰ï¼š
1. åˆ›å»º SSE å®¢æˆ·ç«¯å°è£…
2. åœ¨æ–‡ç« ç”Ÿæˆé¡µé¢ç›‘å¬äº‹ä»¶
3. å®ç°è‡ªåŠ¨åŒæ­¥é€»è¾‘

**æµ‹è¯•**ï¼ˆ1å°æ—¶ï¼‰ï¼š
1. åŠŸèƒ½æµ‹è¯•
2. æ–­çº¿é‡è¿æµ‹è¯•
3. æ€§èƒ½æµ‹è¯•

**é™çº§ç­–ç•¥**ï¼š
- SSE å¤±è´¥ â†’ è‡ªåŠ¨å›é€€åˆ°è½®è¯¢
- ä¿æŒç°æœ‰è½®è¯¢ä½œä¸ºå¤‡ä»½

### ç¬¬ä¸‰å‘¨ï¼šä¼˜åŒ–å’Œç›‘æ§

**ç›‘æ§æŒ‡æ ‡**ï¼š
- SSE è¿æ¥æˆåŠŸç‡
- å¹³å‡å»¶è¿Ÿ
- é‡è¿æ¬¡æ•°
- é™çº§é¢‘ç‡

**ä¼˜åŒ–æ–¹å‘**ï¼š
- è°ƒæ•´å¿ƒè·³é—´éš”
- ä¼˜åŒ–äº‹ä»¶è¿‡æ»¤
- å‡å°‘ä¸å¿…è¦çš„é€šçŸ¥

---

## ğŸ¯ æœ€ç»ˆæ¨è

### ç«‹å³å®æ–½ï¼ˆå·²å®Œæˆï¼‰

âœ… **æ–¹æ¡ˆ 1ï¼šæ™ºèƒ½è½®è¯¢**
- æ–°ä»»åŠ¡æ£€æµ‹ï¼ˆæ¯10ç§’ï¼‰
- ä»»åŠ¡åˆ›å»ºåç«‹å³åˆ·æ–°
- å·²ç»è§£å†³äº†ä½ çš„é—®é¢˜

### ä¸‹ä¸€æ­¥ï¼ˆ1-2å‘¨å†…ï¼‰

â­ **æ–¹æ¡ˆ 2ï¼šæ·»åŠ  SSE**
- å®æ—¶æ€§æå‡åˆ° <1ç§’
- æœåŠ¡å™¨è´Ÿè½½é™ä½ 90%
- ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡
- å®ç°ç®€å•ï¼Œé£é™©ä½

### æœªæ¥ï¼ˆå¯é€‰ï¼‰

ğŸ’¡ **æ–¹æ¡ˆ 3ï¼šWebSocket**
- ä»…åœ¨éœ€è¦åŒå‘é€šä¿¡æ—¶è€ƒè™‘
- ä½¿ç”¨ Socket.IO ç¡®ä¿å…¼å®¹æ€§
- ä¿æŒ SSE ä½œä¸ºé™çº§æ–¹æ¡ˆ

---

## ğŸ“Š æˆæœ¬æ•ˆç›Šåˆ†æ

| æ–¹æ¡ˆ | å¼€å‘æˆæœ¬ | ç»´æŠ¤æˆæœ¬ | æœåŠ¡å™¨æˆæœ¬ | ç”¨æˆ·ä½“éªŒ | æ¨èåº¦ |
|------|---------|---------|-----------|---------|--------|
| è½®è¯¢ | â­ ä½ | â­ ä½ | â­â­ ä¸­ | â­â­ ä¸­ | âœ… çŸ­æœŸ |
| SSE | â­â­ ä¸­ | â­ ä½ | â­ ä½ | â­â­â­ é«˜ | â­â­â­ æœ€ä½³ |
| WebSocket | â­â­â­ é«˜ | â­â­ ä¸­ | â­ ä½ | â­â­â­ é«˜ | âš ï¸ è¿‡åº¦è®¾è®¡ |

---

## ğŸ”‘ å…³é”®ç»“è®º

1. **è½®è¯¢å·²ç»è§£å†³äº†ä½ çš„é—®é¢˜**ï¼ˆå»¶è¿Ÿ 10ç§’å¯æ¥å—ï¼‰
2. **SSE æ˜¯æœ€ä½³å‡çº§è·¯å¾„**ï¼ˆå®æ—¶æ€§ + ç®€å•æ€§ + å…¼å®¹æ€§ï¼‰
3. **WebSocket å¯¹ä½ çš„åœºæ™¯æ˜¯è¿‡åº¦è®¾è®¡**ï¼ˆä¸éœ€è¦åŒå‘é€šä¿¡ï¼‰
4. **æ··åˆæ–¹æ¡ˆæ˜¯ç”Ÿäº§ç¯å¢ƒæ ‡å‡†**ï¼ˆSSE + è½®è¯¢é™çº§ï¼‰

### ä¸šç•Œå…±è¯†

æ ¹æ®å¤šä¸ªæƒå¨æ¥æºçš„ä¸€è‡´å»ºè®®ï¼š

> "Start with SSE for simple one-way push notificationsâ€”it's the easiest to implement and maintain. Upgrade to WebSockets when you need interactive features or bidirectional communication."

---

## ğŸ“š å‚è€ƒèµ„æ–™

1. [Ably: Do you still need a WebSocket fallback in 2024?](https://ably.com/blog/websocket-compatibility)
2. [OpenReplay: WebSockets vs. SSE vs. Long Polling](https://blog.openreplay.com/websockets-sse-long-polling/)
3. [Stack Exchange: Offline-first sync patterns](https://softwareengineering.stackexchange.com/questions/460701/)
4. [FreeCodeCamp: Real-time systems for web developers](https://www.freecodecamp.org/news/real-time-systems-for-web-developers-from-theory-to-a-live-go-react-app/)

---

## ğŸ’¡ æˆ‘çš„å»ºè®®

**ç«‹å³è¡ŒåŠ¨**ï¼š
1. âœ… ä¿æŒå½“å‰çš„æ™ºèƒ½è½®è¯¢æ–¹æ¡ˆï¼ˆå·²å®æ–½ï¼‰
2. ğŸ“ è§„åˆ’ SSE å®æ–½ï¼ˆ1-2å‘¨å†…ï¼‰
3. ğŸ“Š ç›‘æ§ç”¨æˆ·åé¦ˆå’Œæ€§èƒ½æŒ‡æ ‡

**è¯„ä¼°æ ‡å‡†**ï¼š
- å¦‚æœç”¨æˆ·å¯¹ 10ç§’å»¶è¿Ÿæ»¡æ„ â†’ ä¿æŒè½®è¯¢
- å¦‚æœéœ€è¦æ›´å¿«çš„å“åº” â†’ å®æ–½ SSE
- å¦‚æœéœ€è¦åŒå‘é€šä¿¡ â†’ è€ƒè™‘ WebSocket

**é£é™©æœ€å°åŒ–**ï¼š
- SSE å¤±è´¥è‡ªåŠ¨é™çº§åˆ°è½®è¯¢
- ä¿æŒä¸¤å¥—æ–¹æ¡ˆå¹¶è¡Œè¿è¡Œ
- é€æ­¥è¿ç§»ç”¨æˆ·åˆ° SSE

ä½ è§‰å¾—è¿™ä¸ªæ–¹æ¡ˆå¦‚ä½•ï¼Ÿéœ€è¦æˆ‘å¸®ä½ å®æ–½ SSE æ–¹æ¡ˆå—ï¼Ÿ
