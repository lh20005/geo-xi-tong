# preloadè„šæœ¬çš„çœŸæ­£ç”¨é€”

## æ ¸å¿ƒç»“è®ºï¼šâœ… å®Œå…¨æ­£ç¡®ï¼

**preloadè„šæœ¬**ï¼š
- âœ… åªç”¨äºæ£€æµ‹å’Œæå–ä¿¡æ¯
- âœ… æ£€æµ‹ç”¨æˆ·æ˜¯å¦ç™»å½•æˆåŠŸ
- âœ… æå–Cookieå’Œç”¨æˆ·ä¿¡æ¯
- âŒ **ä¸ç”¨äºè‡ªåŠ¨åŒ–æ“ä½œ**

**è‡ªåŠ¨åŒ–æ“ä½œ**ï¼š
- âœ… ç”±Playwrightåœ¨åç«¯å®Œæˆ
- âœ… ä½¿ç”¨æå–çš„Cookie
- âŒ ä¸åœ¨webviewä¸­è¿›è¡Œ

---

## è¯¦ç»†è¯´æ˜

### preloadè„šæœ¬çš„èŒè´£

#### âœ… åšä»€ä¹ˆï¼ˆæ£€æµ‹å’Œæå–ï¼‰

```javascript
// preloadè„šæœ¬çš„æ­£ç¡®ç”¨é€”
const { ipcRenderer } = require('electron');

ipcRenderer.on('checkLogin', (event, args) => {
  setInterval(() => {
    // 1. æ£€æµ‹ï¼šç”¨æˆ·æ˜¯å¦ç™»å½•æˆåŠŸï¼Ÿ
    let name = document.querySelector('.user-name');
    
    if (name !== null) {
      console.log("æ£€æµ‹åˆ°ç”¨æˆ·å·²ç™»å½•");
      
      // 2. æå–ï¼šè·å–ç”¨æˆ·ä¿¡æ¯
      let avatar = document.querySelector('.user-avatar img').src;
      let username = name.textContent;
      
      // 3. æå–ï¼šè·å–Cookie
      let cookie = document.cookie;
      
      // 4. æå–ï¼šè·å–å…¶ä»–ä¿¡æ¯
      let followerCount = document.querySelector('.follower-count').textContent;
      
      // 5. å‘é€ï¼šæŠŠä¿¡æ¯å‘é€ç»™ä¸»è¿›ç¨‹
      ipcRenderer.sendToHost('checkLogin', {
        username: username,
        avatar: avatar,
        cookie: cookie,
        followerCount: followerCount
      });
      
      clearInterval(_interval);
    } else {
      console.log("ç”¨æˆ·è¿˜æœªç™»å½•ï¼Œç»§ç»­ç­‰å¾…...");
    }
  }, 2000);
});
```

**ç‰¹ç‚¹ï¼š**
- åªæ˜¯**è§‚å¯Ÿ**é¡µé¢
- åªæ˜¯**è¯»å–**ä¿¡æ¯
- ä¸åšä»»ä½•**æ“ä½œ**

#### âŒ ä¸åšä»€ä¹ˆï¼ˆè‡ªåŠ¨åŒ–æ“ä½œï¼‰

```javascript
// âŒ preloadè„šæœ¬ä¸åº”è¯¥åšè¿™äº›
ipcRenderer.on('checkLogin', (event, args) => {
  // âŒ ä¸è‡ªåŠ¨ç‚¹å‡»ç™»å½•æŒ‰é’®
  document.querySelector('#login-btn').click();
  
  // âŒ ä¸è‡ªåŠ¨å¡«å†™ç”¨æˆ·åå¯†ç 
  document.querySelector('#username').value = 'test';
  document.querySelector('#password').value = 'test';
  
  // âŒ ä¸è‡ªåŠ¨æäº¤è¡¨å•
  document.querySelector('#submit').click();
  
  // âŒ ä¸è‡ªåŠ¨å‘å¸ƒæ–‡ç« 
  document.querySelector('#publish').click();
});
```

**ä¸ºä»€ä¹ˆä¸åšï¼Ÿ**
1. ç™»å½•éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ“ä½œï¼ˆæ‰«ç ã€éªŒè¯ç ï¼‰
2. è‡ªåŠ¨åŒ–æ“ä½œåº”è¯¥åœ¨åç«¯Playwrightä¸­å®Œæˆ
3. preloadè„šæœ¬åªæ˜¯"è§‚å¯Ÿå‘˜"ï¼Œä¸æ˜¯"æ“ä½œå‘˜"

---

## å®Œæ•´çš„å·¥ä½œæµç¨‹

### é˜¶æ®µ1ï¼šç”¨æˆ·æ‰‹åŠ¨ç™»å½•ï¼ˆwebview + preloadï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Windowsç™»å½•ç®¡ç†å™¨                                        â”‚
â”‚                                                         â”‚
â”‚  ç”¨æˆ·ç‚¹å‡»"ç™»å½•"                                          â”‚
â”‚         â†“                                               â”‚
â”‚  æ˜¾ç¤ºwebviewï¼ˆåŠ è½½preloadè„šæœ¬ï¼‰                          â”‚
â”‚         â†“                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ webview                                   â”‚         â”‚
â”‚  â”‚                                           â”‚         â”‚
â”‚  â”‚  æ˜¾ç¤ºç™»å½•é¡µé¢                              â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  ç”¨æˆ·æ‰‹åŠ¨æ‰«ç /è¾“å…¥å¯†ç   â† äººå·¥æ“ä½œ         â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»ç™»å½•æŒ‰é’®  â† äººå·¥æ“ä½œ          â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  ç™»å½•æˆåŠŸï¼                                â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  [preloadè„šæœ¬å¼€å§‹å·¥ä½œ]                     â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  æ£€æµ‹ï¼šé¡µé¢ä¸Šæœ‰ç”¨æˆ·åäº†å—ï¼Ÿ                â”‚         â”‚
â”‚  â”‚  æå–ï¼šç”¨æˆ·åã€å¤´åƒã€Cookie               â”‚         â”‚
â”‚  â”‚  å‘é€ï¼šæŠŠä¿¡æ¯å‘ç»™ä¸»è¿›ç¨‹                    â”‚         â”‚
â”‚  â”‚                                           â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â†“                                               â”‚
â”‚  ä¸»è¿›ç¨‹æ¥æ”¶ä¿¡æ¯                                          â”‚
â”‚         â†“                                               â”‚
â”‚  ä¿å­˜åˆ°æ•°æ®åº“                                            â”‚
â”‚         â†“                                               â”‚
â”‚  å…³é—­webview                                            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**preloadè„šæœ¬çš„è§’è‰²ï¼šè§‚å¯Ÿå‘˜**
- ç­‰å¾…ç”¨æˆ·ç™»å½•
- æ£€æµ‹ç™»å½•æˆåŠŸ
- æå–ä¿¡æ¯
- æŠ¥å‘Šç»™ä¸»è¿›ç¨‹

---

### é˜¶æ®µ2ï¼šè‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆPlaywrightï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åç«¯æœåŠ¡                                                 â”‚
â”‚                                                         â”‚
â”‚  ç”¨æˆ·ç‚¹å‡»"å‘å¸ƒæ–‡ç« "                                       â”‚
â”‚         â†“                                               â”‚
â”‚  ä»æ•°æ®åº“è¯»å–Cookie                                      â”‚
â”‚         â†“                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Playwrightæµè§ˆå™¨ï¼ˆæ— å¤´æ¨¡å¼ï¼‰               â”‚         â”‚
â”‚  â”‚                                           â”‚         â”‚
â”‚  â”‚  ä½¿ç”¨Cookieè‡ªåŠ¨ç™»å½•  â† è‡ªåŠ¨åŒ–              â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  è‡ªåŠ¨ç‚¹å‡»"æ–°å»ºæ–‡ç« "  â† è‡ªåŠ¨åŒ–              â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  è‡ªåŠ¨å¡«å†™æ ‡é¢˜å’Œå†…å®¹  â† è‡ªåŠ¨åŒ–              â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡  â† è‡ªåŠ¨åŒ–                    â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  è‡ªåŠ¨ç‚¹å‡»"å‘å¸ƒ"  â† è‡ªåŠ¨åŒ–                  â”‚         â”‚
â”‚  â”‚         â†“                                 â”‚         â”‚
â”‚  â”‚  å‘å¸ƒæˆåŠŸï¼                                â”‚         â”‚
â”‚  â”‚                                           â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â†“                                               â”‚
â”‚  æ›´æ–°æ•°æ®åº“çŠ¶æ€                                          â”‚
â”‚         â†“                                               â”‚
â”‚  è¿”å›ç»“æœ                                                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Playwrightçš„è§’è‰²ï¼šæ“ä½œå‘˜**
- è‡ªåŠ¨ç™»å½•
- è‡ªåŠ¨æ“ä½œ
- è‡ªåŠ¨å‘å¸ƒ
- å®Œå…¨æ— éœ€äººå·¥

---

## ä¸ºä»€ä¹ˆè¦è¿™æ ·åˆ†å·¥ï¼Ÿ

### 1. æŠ€æœ¯åŸå› 

#### preloadè„šæœ¬çš„é™åˆ¶
```javascript
// preloadè„šæœ¬è¿è¡Œåœ¨webviewçš„é¡µé¢ä¸Šä¸‹æ–‡ä¸­
// å¯ä»¥è®¿é—®é¡µé¢DOM
document.querySelector('.user-name');  // âœ… å¯ä»¥

// ä½†æ˜¯ä¸é€‚åˆåšå¤æ‚çš„è‡ªåŠ¨åŒ–
// å› ä¸ºï¼š
// 1. éœ€è¦ç­‰å¾…ç”¨æˆ·æ“ä½œ
// 2. ä¸èƒ½æ§åˆ¶æ—¶æœº
// 3. æ²¡æœ‰å¼ºå¤§çš„ç­‰å¾…å’Œé‡è¯•æœºåˆ¶
```

#### Playwrightçš„ä¼˜åŠ¿
```typescript
// Playwrightæœ‰å¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›
await page.waitForSelector('.user-name', { timeout: 30000 });  // æ™ºèƒ½ç­‰å¾…
await page.click('.btn', { force: true });                      // å¼ºåˆ¶ç‚¹å‡»
await page.screenshot({ path: 'error.png' });                   // æˆªå›¾è°ƒè¯•
await page.waitForNavigation();                                 // ç­‰å¾…å¯¼èˆª
```

### 2. ä¸šåŠ¡åŸå› 

#### ç™»å½•é˜¶æ®µï¼ˆéœ€è¦äººå·¥ï¼‰
- æ‰«ç ï¼šéœ€è¦ç”¨æˆ·ç”¨æ‰‹æœºæ‰«
- éªŒè¯ç ï¼šéœ€è¦ç”¨æˆ·è¯†åˆ«
- äººè„¸è¯†åˆ«ï¼šéœ€è¦ç”¨æˆ·çš„è„¸
- çŸ­ä¿¡éªŒè¯ï¼šéœ€è¦ç”¨æˆ·çš„æ‰‹æœº

**æ‰€ä»¥ï¼š**
- preloadè„šæœ¬åªèƒ½ç­‰å¾…
- ä¸èƒ½è‡ªåŠ¨åŒ–ç™»å½•
- åªèƒ½æ£€æµ‹ç™»å½•æˆåŠŸ

#### å‘å¸ƒé˜¶æ®µï¼ˆå¯ä»¥è‡ªåŠ¨åŒ–ï¼‰
- å·²ç»æœ‰Cookie
- ä¸éœ€è¦éªŒè¯
- é‡å¤æ€§æ“ä½œ
- å¯ä»¥æ‰¹é‡å¤„ç†

**æ‰€ä»¥ï¼š**
- Playwrightå¯ä»¥è‡ªåŠ¨åŒ–
- ä¸éœ€è¦ç”¨æˆ·äº¤äº’
- å¯ä»¥24å°æ—¶è¿è¡Œ

---

## å®é™…ä»£ç å¯¹æ¯”

### preloadè„šæœ¬ï¼ˆåªæ£€æµ‹å’Œæå–ï¼‰

```javascript
// windows-login-manager/preload/weixin.js
const { ipcRenderer } = require('electron');

let _interval = '';

ipcRenderer.on('checkLogin', (event, args) => {
  console.log('å¼€å§‹æ£€æµ‹ç™»å½•çŠ¶æ€');
  
  _interval = setInterval(() => {
    // ========================================
    // åªåšæ£€æµ‹å’Œæå–ï¼Œä¸åšä»»ä½•æ“ä½œ
    // ========================================
    
    // æ£€æµ‹ï¼šç”¨æˆ·æ˜¯å¦ç™»å½•æˆåŠŸï¼Ÿ
    let name = document.querySelector('.weui-desktop_name');
    
    if (name !== null) {
      console.log("æ£€æµ‹åˆ°ç”¨æˆ·å·²ç™»å½•");
      
      // æå–ï¼šç”¨æˆ·ä¿¡æ¯
      let avatar = document.querySelector('.weui-desktop-account__img').src;
      let followerCount = document.querySelector('.weui-desktop-user_sum span').textContent;
      
      // æå–ï¼šCookie
      let cookie = document.cookie;
      
      // å‘é€ï¼šæŠŠä¿¡æ¯å‘ç»™ä¸»è¿›ç¨‹
      ipcRenderer.sendToHost('checkLogin', {
        name: name.textContent,
        avatar: avatar,
        cookie: cookie,
        followerCount: followerCount,
        platform: 'weixin'
      });
      
      clearInterval(_interval);
    } else {
      console.log("ç”¨æˆ·è¿˜æœªç™»å½•ï¼Œç»§ç»­ç­‰å¾…...");
      // ä¸åšä»»ä½•æ“ä½œï¼Œåªæ˜¯ç­‰å¾…
    }
  }, 2000);
});
```

**ç‰¹ç‚¹ï¼š**
- âœ… åªæ£€æµ‹
- âœ… åªæå–
- âœ… åªå‘é€
- âŒ ä¸æ“ä½œ

---

### Playwright Adapterï¼ˆè‡ªåŠ¨åŒ–æ“ä½œï¼‰

```typescript
// server/src/services/adapters/WeixinAdapter.ts
import { chromium } from 'playwright';

export class WeixinAdapter extends PlatformAdapter {
  async publish(article: any, account: any): Promise<any> {
    const browser = await chromium.launch({ headless: true });
    const context = await browser.newContext();
    const page = await context.newPage();
    
    // ========================================
    // å®Œå…¨è‡ªåŠ¨åŒ–æ“ä½œ
    // ========================================
    
    // 1. ä½¿ç”¨Cookieè‡ªåŠ¨ç™»å½•
    await context.addCookies(account.cookies);
    await page.goto('https://mp.weixin.qq.com');
    
    // 2. è‡ªåŠ¨ç‚¹å‡»æ–°å»ºå›¾æ–‡
    await page.click('text=æ–°å»ºå›¾æ–‡');
    await page.waitForSelector('#js_editor');
    
    // 3. è‡ªåŠ¨å¡«å†™æ ‡é¢˜
    await page.fill('#title', article.title);
    
    // 4. è‡ªåŠ¨å¡«å†™å†…å®¹
    await page.fill('#js_editor', article.content);
    
    // 5. è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡
    if (article.images) {
      for (const image of article.images) {
        await page.setInputFiles('#upload-image', image.path);
        await page.waitForTimeout(1000);
      }
    }
    
    // 6. è‡ªåŠ¨ç‚¹å‡»å‘å¸ƒ
    await page.click('.publish-btn');
    
    // 7. ç­‰å¾…å‘å¸ƒæˆåŠŸ
    await page.waitForSelector('.success-message');
    
    await browser.close();
    return { success: true, message: 'å‘å¸ƒæˆåŠŸ' };
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… è‡ªåŠ¨ç™»å½•
- âœ… è‡ªåŠ¨ç‚¹å‡»
- âœ… è‡ªåŠ¨å¡«å†™
- âœ… è‡ªåŠ¨ä¸Šä¼ 
- âœ… è‡ªåŠ¨å‘å¸ƒ

---

## å¸¸è§è¯¯è§£

### âŒ è¯¯è§£1ï¼špreloadè„šæœ¬å¯ä»¥è‡ªåŠ¨åŒ–ç™»å½•

**é”™è¯¯æƒ³æ³•ï¼š**
```javascript
// âŒ é”™è¯¯ï¼preloadä¸åº”è¯¥è¿™æ ·åš
ipcRenderer.on('autoLogin', (event, args) => {
  document.querySelector('#username').value = args.username;
  document.querySelector('#password').value = args.password;
  document.querySelector('#submit').click();
});
```

**ä¸ºä»€ä¹ˆé”™è¯¯ï¼Ÿ**
1. å¾ˆå¤šå¹³å°éœ€è¦æ‰«ç ï¼Œæ— æ³•è‡ªåŠ¨åŒ–
2. æœ‰éªŒè¯ç ï¼Œæ— æ³•è‡ªåŠ¨è¯†åˆ«
3. å®¹æ˜“è¢«æ£€æµ‹ä¸ºæœºå™¨äºº
4. è¿åå¹³å°è§„åˆ™

**æ­£ç¡®åšæ³•ï¼š**
- è®©ç”¨æˆ·æ‰‹åŠ¨ç™»å½•
- preloadåªæ£€æµ‹ç™»å½•æˆåŠŸ
- æå–Cookieåï¼Œåœ¨åç«¯è‡ªåŠ¨åŒ–

---

### âŒ è¯¯è§£2ï¼šPlaywrightå¯ä»¥ç”¨äºç™»å½•

**é”™è¯¯æƒ³æ³•ï¼š**
```typescript
// âŒ ä¸æ¨èï¼å®¹æ˜“è¢«æ£€æµ‹
async login(username: string, password: string) {
  await page.fill('#username', username);
  await page.fill('#password', password);
  await page.click('#submit');
}
```

**ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ**
1. å¾ˆå¤šå¹³å°éœ€è¦æ‰«ç 
2. æœ‰éªŒè¯ç 
3. å®¹æ˜“è¢«æ£€æµ‹ä¸ºæœºå™¨äºº
4. Cookieä¼šå¤±æ•ˆ

**æ­£ç¡®åšæ³•ï¼š**
- ç”¨æˆ·åœ¨Windowsç™»å½•ç®¡ç†å™¨ä¸­æ‰‹åŠ¨ç™»å½•
- æå–Cookie
- Playwrightä½¿ç”¨Cookieè‡ªåŠ¨å‘å¸ƒ

---

## æœ€ç»ˆæ€»ç»“

### âœ… ä½ çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼

```
preloadè„šæœ¬ï¼š
  - åªç”¨äºæ£€æµ‹ç™»å½•çŠ¶æ€
  - åªç”¨äºæå–ç”¨æˆ·ä¿¡æ¯å’ŒCookie
  - ä¸ç”¨äºè‡ªåŠ¨åŒ–æ“ä½œ
  - è§’è‰²ï¼šè§‚å¯Ÿå‘˜

Playwrightï¼š
  - ç”¨äºè‡ªåŠ¨åŒ–å‘å¸ƒ
  - ä½¿ç”¨preloadæå–çš„Cookie
  - å®Œå…¨è‡ªåŠ¨åŒ–æ“ä½œ
  - è§’è‰²ï¼šæ“ä½œå‘˜
```

### åˆ†å·¥æ˜ç¡®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·æ‰‹åŠ¨ç™»å½•ï¼ˆå¶å°”ï¼‰                                 â”‚
â”‚   Windowsç™»å½•ç®¡ç†å™¨ + webview + preload            â”‚
â”‚   â†’ ç”¨æˆ·æ‰‹åŠ¨æ“ä½œ â†’ preloadæ£€æµ‹ â†’ æå–Cookie        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
                   Cookieå­˜å‚¨
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆé¢‘ç¹ï¼‰                                   â”‚
â”‚   åç«¯æœåŠ¡ + Playwright                             â”‚
â”‚   â†’ è¯»å–Cookie â†’ è‡ªåŠ¨åŒ–æ“ä½œ â†’ å‘å¸ƒæ–‡ç«              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®ç‚¹

1. **preload = æ£€æµ‹ + æå–**ï¼ˆä¸æ“ä½œï¼‰
2. **Playwright = è‡ªåŠ¨åŒ–æ“ä½œ**ï¼ˆä¸æ£€æµ‹ç™»å½•ï¼‰
3. **Cookieæ˜¯æ¡¥æ¢**ï¼ˆè¿æ¥ä¸¤ä¸ªé˜¶æ®µï¼‰

ä½ çš„ç†è§£éå¸¸å‡†ç¡®ï¼ğŸ‘
