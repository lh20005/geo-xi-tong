# GEO ä¼˜åŒ–ç³»ç»Ÿ ğŸš€

<div align="center">

**ä¸“ä¸šçš„å“ç‰ŒAIæ¨èä¼˜åŒ–å·¥å…·**

[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)](https://reactjs.org/)
[![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white)](https://nodejs.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

GEOï¼ˆGenerative Engine Optimizationï¼‰ä¼˜åŒ–ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸“ä¸šçš„å“ç‰ŒAIæ¨èä¼˜åŒ–å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©å“ç‰Œæå‡åœ¨AIå¹³å°ï¼ˆå¦‚ChatGPTã€Claudeã€Geminiç­‰ï¼‰çš„ä¸»åŠ¨æ¨èç‡ã€‚

é€šè¿‡æ™ºèƒ½çš„å…³é”®è¯è’¸é¦å’ŒAIé©±åŠ¨çš„å†…å®¹ç”Ÿæˆï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š
- ğŸ¯ åˆ†æå…³é”®è¯ï¼Œç”ŸæˆçœŸå®ç”¨æˆ·æœç´¢é—®é¢˜
- ğŸ’¡ ç®¡ç†å’Œä¼˜åŒ–è¯é¢˜å†…å®¹
- âœ¨ è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡SEOæ–‡ç« 
- ğŸ”„ æ”¯æŒå¤šä¸ªAIæ¨¡å‹çµæ´»åˆ‡æ¢

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– AI é›†æˆ
- DeepSeek API / Google Gemini API
- æœ¬åœ° Ollama æ”¯æŒï¼ˆæ— éœ€ API å¯†é’¥ï¼‰
- çµæ´»åˆ‡æ¢ AI æ¨¡å‹

### ğŸ“ å†…å®¹ç”Ÿæˆ
- å…³é”®è¯è’¸é¦å’Œè¯é¢˜ç®¡ç†
- AI é©±åŠ¨çš„æ–‡ç« ç”Ÿæˆ
- æ‰¹é‡æ–‡ç« ç”Ÿæˆä»»åŠ¡
- ä¼ä¸šçŸ¥è¯†åº“æ™ºèƒ½å¼•ç”¨

### ğŸ–¼ï¸ èµ„æºç®¡ç†
- ä¼ä¸šå›¾åº“ï¼ˆç›¸å†Œå’Œå›¾ç‰‡ç®¡ç†ï¼‰
- ä¼ä¸šçŸ¥è¯†åº“ï¼ˆæ–‡æ¡£ä¸Šä¼ å’Œè§£æï¼‰
- æ–‡ç« è®¾ç½®æ¨¡æ¿
- è½¬åŒ–ç›®æ ‡ç®¡ç†

### ğŸ‘¥ ç”¨æˆ·ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- é‚€è¯·ç æ¨èç³»ç»Ÿ
- å®æ—¶è·¨å¹³å°åŒæ­¥ï¼ˆWebSocketï¼‰
- é™æµä¿æŠ¤å’Œå®‰å…¨åŠ å›º

### ğŸ’³ è®¢é˜…å’Œæ”¯ä»˜
- è®¢é˜…å¥—é¤ç³»ç»Ÿï¼ˆä½“éªŒç‰ˆ/ä¸“ä¸šç‰ˆ/ä¼ä¸šç‰ˆï¼‰
- å¾®ä¿¡æ”¯ä»˜é›†æˆ
- è®¢å•ç®¡ç†
- ä½¿ç”¨é‡ç»Ÿè®¡

### ğŸ”’ å®‰å…¨ç®¡ç†
- å®‰å…¨ä»ªè¡¨æ¿å’Œå®æ—¶ç›‘æ§
- å®¡è®¡æ—¥å¿—å’Œæ“ä½œè®°å½•
- ç»†ç²’åº¦æƒé™ç®¡ç†ï¼ˆ20ç§æƒé™ï¼‰
- åŠ¨æ€å®‰å…¨ç­–ç•¥é…ç½®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨è - macOSï¼‰âš¡

```bash
# é¦–æ¬¡ä½¿ç”¨ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™
chmod +x start.command

# åŒå‡» start.command æ–‡ä»¶
# æˆ–åœ¨ç»ˆç«¯è¿è¡Œ
./start.command
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

#### 1. å®‰è£…ä¾èµ–

```bash
npm run install:all
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“å’Œ API å¯†é’¥
```

#### 3. åˆ›å»ºæ•°æ®åº“å¹¶è¿è¡Œè¿ç§»

```bash
createdb geo_system
cd server && npm run db:migrate
```

#### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—®åœ°å€ï¼š
- ğŸŒ å‰ç«¯åº”ç”¨: http://localhost:5173
- ğŸŒ è¥é”€ç½‘ç«™: http://localhost:8080
- ğŸ”§ åç«¯ API: http://localhost:3000

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
geo-optimization-system/
â”œâ”€â”€ server/                    # åç«¯åº”ç”¨ï¼ˆNode.js + Expressï¼‰
â”œâ”€â”€ landing/                   # è¥é”€ç½‘ç«™
â”œâ”€â”€ windows-login-manager/     # Windows æ¡Œé¢å®¢æˆ·ç«¯ï¼ˆå®Œæ•´å‰ç«¯ + æœ¬åœ°åŠŸèƒ½ï¼‰â­
â”œâ”€â”€ docs/                      # ğŸ“š æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ 01-å¿«é€Ÿå¼€å§‹/          # æ–°æ‰‹å…¥é—¨
â”‚   â”œâ”€â”€ 02-åŠŸèƒ½è¯´æ˜/          # åŠŸèƒ½è¯¦ç»†è¯´æ˜
â”‚   â”œâ”€â”€ 03-éƒ¨ç½²æŒ‡å—/          # ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² â­
â”‚   â”œâ”€â”€ 04-å®‰å…¨æŒ‡å—/          # å®‰å…¨é…ç½® ğŸ”’
â”‚   â”œâ”€â”€ 05-æµ‹è¯•æŒ‡å—/          # æµ‹è¯•å’Œè¯Šæ–­
â”‚   â”œâ”€â”€ 06-é—®é¢˜ä¿®å¤/          # é—®é¢˜ä¿®å¤è®°å½•
â”‚   â”œâ”€â”€ 07-å¼€å‘æ–‡æ¡£/          # å¼€å‘è¿‡ç¨‹æ–‡æ¡£
â”‚   â”œâ”€â”€ 08-ç”¨æˆ·ç•Œé¢æ–‡æ¡£/      # UI è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ 09-å®‰å…¨è¯„ä¼°/          # å®‰å…¨è¯„ä¼°æŠ¥å‘Š
â”œâ”€â”€ dev-docs/                  # å¼€å‘å‚è€ƒæ–‡æ¡£
â”œâ”€â”€ scripts/                   # ğŸ”§ å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ deployment/           # éƒ¨ç½²è„šæœ¬ï¼ˆ.command è„šæœ¬å¤‡ä»½ï¼‰
â”‚   â”œâ”€â”€ testing/              # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ maintenance/          # ç»´æŠ¤è„šæœ¬
â”‚   â””â”€â”€ security/             # å®‰å…¨è„šæœ¬
â”œâ”€â”€ config/                    # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ nginx/                # Nginx é…ç½®
â”œâ”€â”€ backups/                   # æ•°æ®åº“å’Œæ–‡æ¡£å¤‡ä»½
â”œâ”€â”€ temp/                      # ä¸´æ—¶æ–‡ä»¶ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”‚
â”œâ”€â”€ client-archived-web-frontend/  # ğŸ—„ï¸ å½’æ¡£çš„ Web å‰ç«¯ï¼ˆå·²åºŸå¼ƒï¼Œä¿ç•™å¤‡ä»½ï¼‰
â”‚
â”œâ”€â”€ *.command                  # âš¡ macOS å¯åŠ¨è„šæœ¬ï¼ˆæ”¾åœ¨æ ¹ç›®å½•æ–¹ä¾¿åŒå‡»ï¼‰
â”‚   â”œâ”€â”€ å¯åŠ¨GEOç³»ç»Ÿ.command   # å¯åŠ¨å‰ç«¯+åç«¯
â”‚   â”œâ”€â”€ åå°å¯åŠ¨GEOç³»ç»Ÿ.command # åå°å¯åŠ¨
â”‚   â”œâ”€â”€ åœæ­¢GEOç³»ç»Ÿ.command   # åœæ­¢æœåŠ¡
â”‚   â”œâ”€â”€ é‡å¯GEOç³»ç»Ÿ.command   # é‡å¯æœåŠ¡
â”‚   â”œâ”€â”€ æ£€æŸ¥æœåŠ¡çŠ¶æ€.command  # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
â”‚   â””â”€â”€ å¯åŠ¨Windowsç®¡ç†å™¨.command # å¯åŠ¨ç™»å½•ç®¡ç†å™¨
â”‚
â”œâ”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .env                      # ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

> **é‡è¦è¯´æ˜**ï¼š
> - â­ **Windows æ¡Œé¢å®¢æˆ·ç«¯**ï¼ˆ`windows-login-manager/`ï¼‰æ˜¯å½“å‰ä½¿ç”¨çš„å‰ç«¯åº”ç”¨
> - ğŸ—„ï¸ **Web å‰ç«¯**ï¼ˆ`client-archived-web-frontend/`ï¼‰å·²å½’æ¡£ï¼Œä»…ä½œå¤‡ä»½
> - `.command` å¯åŠ¨è„šæœ¬å¿…é¡»æ”¾åœ¨æ ¹ç›®å½•ï¼Œæ–¹ä¾¿ macOS ç”¨æˆ·åŒå‡»å¯åŠ¨
> - `scripts/deployment/` ç›®å½•ä¿ç•™ä¸€ä»½å¤‡ä»½

---

## ï¿½ è…¾è®¯å¯¼äº‘ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æœåŠ¡å™¨è¦æ±‚

**æ¨èé…ç½®ï¼š**
- æ“ä½œç³»ç»Ÿï¼šUbuntu 22.04 LTS æˆ– Ubuntu 20.04 LTS
- CPUï¼š2æ ¸æˆ–ä»¥ä¸Š
- å†…å­˜ï¼š4GB æˆ–ä»¥ä¸Š
- ç¡¬ç›˜ï¼š40GB æˆ–ä»¥ä¸Š
- å¸¦å®½ï¼š3Mbps æˆ–ä»¥ä¸Š

**ä¸ºä»€ä¹ˆé€‰æ‹© Ubuntuï¼Ÿ**
- âœ… è½¯ä»¶åŒ…æœ€æ–°ä¸”ç¨³å®š
- âœ… ç¤¾åŒºæ”¯æŒæœ€å¥½
- âœ… Puppeteer ä¾èµ–æœ€å®¹æ˜“å®‰è£…
- âœ… æ‰€æœ‰å·¥å…·éƒ½æœ‰å®˜æ–¹æ”¯æŒ

### ç³»ç»Ÿä¾èµ–è¯´æ˜

æœ¬ç³»ç»Ÿéœ€è¦ä»¥ä¸‹ä¾èµ–ï¼Œéƒ¨ç½²æ—¶ä¼šè‡ªåŠ¨å®‰è£…ï¼š

| ä¾èµ–ç±»å‹ | åŒ…å | ç”¨é€” | æ˜¯å¦å¿…éœ€ |
|---------|------|------|---------|
| **åŸºç¡€å·¥å…·** | curl, wget, git, unzip, tar | ä¸‹è½½å’Œè§£å‹æ–‡ä»¶ | âœ… å¿…éœ€ |
| **ç¼–è¯‘å·¥å…·** | build-essential, python3 | ç¼–è¯‘åŸç”Ÿ Node.js æ¨¡å—ï¼ˆbcrypt, pdf-parseï¼‰ | âœ… å¿…éœ€ |
| **è¿è¡Œæ—¶** | Node.js 18 | JavaScript è¿è¡Œç¯å¢ƒ | âœ… å¿…éœ€ |
| **æ•°æ®åº“** | PostgreSQL 14+ | ä¸»æ•°æ®åº“ | âœ… å¿…éœ€ |
| **ç¼“å­˜** | Redis 6+ | ç¼“å­˜å’Œä¼šè¯å­˜å‚¨ | âœ… å¿…éœ€ |
| **WebæœåŠ¡å™¨** | Nginx | åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡ | âœ… å¿…éœ€ |
| **è¿›ç¨‹ç®¡ç†** | PM2 | Node.js è¿›ç¨‹ç®¡ç† | âœ… å¿…éœ€ |
| **æµè§ˆå™¨** | Google Chrome | æ–‡ç« ç”Ÿæˆå’Œè‡ªåŠ¨åŒ– | âœ… å¿…éœ€ |
| **æµè§ˆå™¨ä¾èµ–** | 38ä¸ªç³»ç»Ÿåº“ | Chrome è¿è¡Œæ‰€éœ€ | âœ… å¿…éœ€ |
| **ä¸­æ–‡å­—ä½“** | fonts-wqy-zenhei | ä¸­æ–‡å†…å®¹æ˜¾ç¤º | â­ æ¨è |
| **é˜²ç«å¢™** | ufw | æœåŠ¡å™¨å®‰å…¨ | â­ æ¨è |
| **SSLè¯ä¹¦** | certbot | HTTPS æ”¯æŒ | â­ æ¨è |

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆ30åˆ†é’Ÿï¼‰

```bash
# 1. æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…åŸºç¡€å·¥å…·
sudo apt install -y curl wget git unzip tar

# 3. å®‰è£…ç¼–è¯‘å·¥å…·ï¼ˆå¿…éœ€ï¼Œç”¨äºç¼–è¯‘ bcryptã€pdf-parse ç­‰åŸç”Ÿæ¨¡å—ï¼‰
sudo apt install -y build-essential python3 python3-pip

# 4. å®‰è£… Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo bash -
sudo apt install -y nodejs

# 5. å®‰è£… PostgreSQL
sudo apt install -y postgresql postgresql-contrib
sudo systemctl enable postgresql
sudo systemctl start postgresql

# 6. å®‰è£… Redis
sudo apt install -y redis-server
sudo systemctl enable redis
sudo systemctl start redis

# 7. å®‰è£… Nginx
sudo apt install -y nginx
sudo systemctl enable nginx
sudo systemctl start nginx

# 8. å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰
sudo npm install -g pm2

# 9. å®‰è£… Puppeteer ä¾èµ–ï¼ˆç”¨äºæ–‡ç« ç”Ÿæˆå’Œæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼‰
sudo apt install -y \
  ca-certificates \
  fonts-liberation \
  libappindicator3-1 \
  libasound2 \
  libatk-bridge2.0-0 \
  libatk1.0-0 \
  libc6 \
  libcairo2 \
  libcups2 \
  libdbus-1-3 \
  libexpat1 \
  libfontconfig1 \
  libgbm1 \
  libgcc1 \
  libglib2.0-0 \
  libgtk-3-0 \
  libnspr4 \
  libnss3 \
  libpango-1.0-0 \
  libpangocairo-1.0-0 \
  libstdc++6 \
  libx11-6 \
  libx11-xcb1 \
  libxcb1 \
  libxcomposite1 \
  libxcursor1 \
  libxdamage1 \
  libxext6 \
  libxfixes3 \
  libxi6 \
  libxrandr2 \
  libxrender1 \
  libxss1 \
  libxtst6 \
  lsb-release \
  xdg-utils

# 10. å®‰è£…ä¸­æ–‡å­—ä½“ï¼ˆæ”¯æŒä¸­æ–‡å†…å®¹æ˜¾ç¤ºï¼‰
sudo apt install -y fonts-wqy-zenhei fonts-wqy-microhei

# 11. å®‰è£… Google Chromeï¼ˆæ¨èï¼Œæ¯” Chromium æ›´ç¨³å®šï¼‰
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo dpkg -i google-chrome-stable_current_amd64.deb
sudo apt install -f -y  # ä¿®å¤ä¾èµ–é—®é¢˜
rm google-chrome-stable_current_amd64.deb

# 12. é…ç½®é˜²ç«å¢™ï¼ˆå¯é€‰ä½†æ¨èï¼‰
sudo ufw allow 22/tcp   # SSH
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw --force enable

# éªŒè¯å®‰è£…
node -v
npm -v
psql --version
redis-cli --version
nginx -v
google-chrome --version
pm2 --version
git --version
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®æ•°æ®åº“ï¼ˆ10åˆ†é’Ÿï¼‰

```bash
# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
sudo -u postgres psql << EOF
CREATE DATABASE geo_system;
CREATE USER geo_user WITH PASSWORD 'H2SwIAkyzT1G4mAhkbtSULfG';
GRANT ALL PRIVILEGES ON DATABASE geo_system TO geo_user;
\q
EOF

# éªŒè¯è¿æ¥
psql -U geo_user -d geo_system -h localhost -W
```

### ç¬¬ä¸‰æ­¥ï¼šä¸Šä¼ ä»£ç ï¼ˆ15åˆ†é’Ÿï¼‰

```bash
# åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºç›®å½•
sudo mkdir -p /var/www/geo-system
sudo chown -R $USER:$USER /var/www/geo-system

# åœ¨æœ¬åœ°æ‰“åŒ…ä»£ç 
cd server && tar -czf server-dist.tar.gz dist package.json package-lock.json
cd ../client && tar -czf client-dist.tar.gz dist
cd ../landing && tar -czf landing-dist.tar.gz dist

# ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ˆæ›¿æ¢ YOUR_SERVER_IPï¼‰
scp server/server-dist.tar.gz ubuntu@YOUR_SERVER_IP:/var/www/geo-system/
scp client/client-dist.tar.gz ubuntu@YOUR_SERVER_IP:/var/www/geo-system/
scp landing/landing-dist.tar.gz ubuntu@YOUR_SERVER_IP:/var/www/geo-system/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
cd /var/www/geo-system
tar -xzf server-dist.tar.gz -C server/
tar -xzf client-dist.tar.gz -C client/
tar -xzf landing-dist.tar.gz -C landing/
```

### ç¬¬å››æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆ10åˆ†é’Ÿï¼‰â­ é‡è¦

åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»º `/var/www/geo-system/.env` æ–‡ä»¶ï¼š

```bash
# ==================== æ•°æ®åº“é…ç½® ====================
DATABASE_URL=postgresql://geo_user:H2SwIAkyzT1G4mAhkbtSULfG@localhost:5432/geo_system

# ==================== AI APIé…ç½® ====================
# æ›¿æ¢ä¸ºä½ çš„çœŸå® API Key
DEEPSEEK_API_KEY=sk-your-real-deepseek-key
GEMINI_API_KEY=AIzaSy-your-real-gemini-key

# Ollamaé…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºæœ¬åœ°AIæ¨¡å‹ï¼‰
OLLAMA_BASE_URL=http://localhost:11434

# ==================== æœåŠ¡å™¨é…ç½® ====================
PORT=3000
NODE_ENV=production

# ==================== ğŸ”’ å¼ºå¯†é’¥é…ç½®ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰ ====================
# JWT è®¿é—®ä»¤ç‰Œå¯†é’¥ï¼ˆ256ä½éšæœºå­—ç¬¦ä¸²ï¼‰
JWT_SECRET=eeca6b8fd34cc378411cee4d5d9e405ba2470f34f31f65ca42a3b2ec6c44a144

# JWT åˆ·æ–°ä»¤ç‰Œå¯†é’¥ï¼ˆ256ä½éšæœºå­—ç¬¦ä¸²ï¼‰
JWT_REFRESH_SECRET=fcb44972cd8b6833229122d109cf7bca8254332045fef7a683de973fd84ec392

# ä»¤ç‰Œè¿‡æœŸæ—¶é—´
JWT_EXPIRES_IN=1h
REFRESH_TOKEN_EXPIRES_IN=7d

# WebSocketé…ç½®
WEBSOCKET_PORT=8080

# ==================== ğŸ”’ ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰ ====================
ADMIN_USERNAME=lzc2005
ADMIN_PASSWORD=jehI2oBuNMMJehMM

# ==================== Puppeteer æµè§ˆå™¨é…ç½® ====================
# Chrome å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
PUPPETEER_EXECUTABLE_PATH=/usr/bin/google-chrome

# è·³è¿‡ Chromium ä¸‹è½½ï¼ˆä½¿ç”¨ç³»ç»Ÿ Chromeï¼‰
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true

# æµè§ˆå™¨æ¨¡å¼ï¼ˆæœåŠ¡å™¨ç¯å¢ƒå¿…é¡»ä½¿ç”¨ headlessï¼‰
BROWSER_HEADLESS=true

# æµè§ˆå™¨è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
BROWSER_TIMEOUT=60000

# ==================== é™æµé…ç½® ====================
# ç™»å½•é™æµï¼š5æ¬¡/15åˆ†é’Ÿï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
LOGIN_RATE_LIMIT=5
LOGIN_RATE_WINDOW_MINUTES=15

# æ³¨å†Œé™æµï¼š3æ¬¡/1å°æ—¶ï¼ˆé˜²æ¶æ„æ³¨å†Œï¼‰
REGISTRATION_RATE_LIMIT=3
REGISTRATION_RATE_WINDOW_HOURS=1

# API å…¨å±€é™æµï¼š500æ¬¡/åˆ†é’Ÿï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
# è¯´æ˜ï¼š
# - å•ç”¨æˆ·æ­£å¸¸ä½¿ç”¨ï¼šçº¦70æ¬¡/åˆ†é’Ÿ
# - 500æ¬¡/åˆ†é’Ÿå¯æ”¯æŒ10äººåŒæ—¶ä½¿ç”¨
# - æ—¢ä¿æŠ¤æœåŠ¡å™¨åˆä¸å½±å“æ­£å¸¸ä½¿ç”¨
# - å¼€å‘ç¯å¢ƒè‡ªåŠ¨è°ƒæ•´ä¸º1000æ¬¡/åˆ†é’Ÿ

# ==================== ğŸ”’ CORS é…ç½® ====================
# å…è®¸çš„æ¥æºï¼ˆæ›¿æ¢ä¸ºä½ çš„åŸŸåï¼Œé€—å·åˆ†éš”ï¼‰
ALLOWED_ORIGINS=http://YOUR_SERVER_IP,https://your-domain.com

# ==================== å¾®ä¿¡æ”¯ä»˜é…ç½®ï¼ˆå¯é€‰ï¼‰ ====================
WECHAT_PAY_APP_ID=wx1234567890abcdef
WECHAT_PAY_MCH_ID=1234567890
WECHAT_PAY_API_V3_KEY=your_32_character_api_v3_key_here
WECHAT_PAY_SERIAL_NO=1234567890ABCDEF1234567890ABCDEF12345678
WECHAT_PAY_PRIVATE_KEY_PATH=/var/www/geo-system/certs/apiclient_key.pem
WECHAT_PAY_NOTIFY_URL=https://your-domain.com/api/payment/wechat/notify

# ==================== Redisé…ç½® ====================
REDIS_URL=redis://:your_redis_password@localhost:6379
```

**è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆé‡è¦ï¼‰ï¼š**

```bash
# è®¾ç½® .env æ–‡ä»¶æƒé™ä¸º 600ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯è¯»å†™ï¼‰
chmod 600 /var/www/geo-system/.env

# éªŒè¯æƒé™
ls -la /var/www/geo-system/.env
# åº”è¯¥æ˜¾ç¤ºï¼š-rw------- 1 ubuntu ubuntu
```

### ç¬¬äº”æ­¥ï¼šæ•°æ®åº“è¿ç§»ï¼ˆ15åˆ†é’Ÿï¼‰â­ é‡è¦

**ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“è¿ç§»ç³»ç»Ÿï¼Ÿ**

ä¹‹å‰æ¯æ¬¡æ•°æ®åº“å˜æ›´éƒ½éœ€è¦æ‰‹åŠ¨ç™»å½•æœåŠ¡å™¨æ‰§è¡ŒSQLï¼Œå®¹æ˜“å‡ºé”™ä¸”éš¾ä»¥ç®¡ç†ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†å®Œæ•´çš„è¿ç§»ç³»ç»Ÿï¼š

âœ… **ç‰ˆæœ¬æ§åˆ¶** - æ¯æ¬¡å˜æ›´éƒ½æœ‰è®°å½•ï¼Œå¯è¿½æº¯  
âœ… **è‡ªåŠ¨åŒ–** - ä¸€é”®æ‰§è¡Œæ‰€æœ‰å¾…è¿ç§»  
âœ… **å¯å›æ»š** - æ”¯æŒå‘ä¸Šå’Œå‘ä¸‹è¿ç§»  
âœ… **å¯é‡å¤** - å¤šæ¬¡æ‰§è¡Œä¸ä¼šå‡ºé”™  
âœ… **å›¢é˜Ÿåä½œ** - ç»Ÿä¸€çš„è¿ç§»æµç¨‹

#### 5.1 ä¸Šä¼ è¿ç§»ç³»ç»Ÿæ–‡ä»¶

```bash
# åœ¨æœ¬åœ°æ‰“åŒ…è¿ç§»ç³»ç»Ÿ
cd server/src/db
tar -czf migrations.tar.gz migrations/ migrate.ts rollback.ts status.ts create-migration.ts

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp migrations.tar.gz ubuntu@YOUR_SERVER_IP:/var/www/geo-system/server/src/db/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh ubuntu@YOUR_SERVER_IP
cd /var/www/geo-system/server/src/db
tar -xzf migrations.tar.gz
rm migrations.tar.gz
```

#### 5.2 æŸ¥çœ‹è¿ç§»çŠ¶æ€

```bash
cd /var/www/geo-system/server
npm run db:status
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š æ•°æ®åº“è¿ç§»çŠ¶æ€
================================================================================
âœ“ å½“å‰æ•°æ®åº“ç‰ˆæœ¬: 002
âœ“ å·²æ‰§è¡Œè¿ç§»: 2/2

ğŸ“‹ è¿ç§»åˆ—è¡¨:
--------------------------------------------------------------------------------
ç‰ˆæœ¬     çŠ¶æ€       åç§°                                æ‰§è¡Œæ—¶é—´
--------------------------------------------------------------------------------
001      âœ“ å·²æ‰§è¡Œ   initial schema                      2025-12-27 17:30:15
002      âœ“ å·²æ‰§è¡Œ   add missing columns                 2025-12-27 17:35:22
--------------------------------------------------------------------------------

âœ“ æ•°æ®åº“å·²æ˜¯æœ€æ–°ç‰ˆæœ¬
```

#### 5.3 æ‰§è¡Œæ•°æ®åº“è¿ç§»

```bash
# æ‰§è¡Œæ‰€æœ‰å¾…è¿ç§»
npm run db:migrate
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸš€ å¼€å§‹æ•°æ®åº“è¿ç§»...
==================================================
âœ“ è¿ç§»å†å²è¡¨å·²å°±ç»ª
âœ“ å·²æ‰§è¡Œ 0 ä¸ªè¿ç§»
âœ“ å‘ç° 2 ä¸ªè¿ç§»æ–‡ä»¶

ğŸ“‹ å¾…æ‰§è¡Œ 2 ä¸ªè¿ç§»:
   001 - initial schema
   002 - add missing columns

å¼€å§‹æ‰§è¡Œè¿ç§»...

â†’ æ‰§è¡Œè¿ç§» 001: initial schema
âœ“ è¿ç§» 001 æ‰§è¡ŒæˆåŠŸ

â†’ æ‰§è¡Œè¿ç§» 002: add missing columns
âœ“ è¿ç§» 002 æ‰§è¡ŒæˆåŠŸ

==================================================
âœ“ æ‰€æœ‰è¿ç§»æ‰§è¡ŒæˆåŠŸï¼
âœ“ æ•°æ®åº“ç‰ˆæœ¬: 002
```

#### 5.4 è¿ç§»ç³»ç»Ÿå¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹è¿ç§»çŠ¶æ€
npm run db:status

# æ‰§è¡Œè¿ç§»
npm run db:migrate

# å›æ»šæœ€åä¸€æ¬¡è¿ç§»ï¼ˆå¦‚æœéœ€è¦ï¼‰
npm run db:rollback

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
npm run db:rollback -- --to=001

# åˆ›å»ºæ–°è¿ç§»ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
npm run db:create -- add_new_feature
```

#### 5.5 è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

æˆ‘ä»¬æä¾›äº†ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œè‡ªåŠ¨å®Œæˆå¤‡ä»½ã€ä¸Šä¼ ã€è¿ç§»ã€éªŒè¯ï¼š

```bash
# åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
./scripts/deployment/deploy-migrations.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… å¤‡ä»½ç”Ÿäº§æ•°æ®åº“
2. âœ… ä¸Šä¼ è¿ç§»æ–‡ä»¶
3. âœ… æŸ¥çœ‹è¿ç§»çŠ¶æ€
4. âœ… æ‰§è¡Œè¿ç§»
5. âœ… éªŒè¯ç»“æœ

#### 5.6 è¿ç§»å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

å¦‚æœè¿ç§»å¤±è´¥ï¼Œä¸ç”¨æ‹…å¿ƒï¼š

1. **PostgreSQL ä¼šè‡ªåŠ¨å›æ»š** - è¿ç§»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¤±è´¥ä¼šè‡ªåŠ¨å›æ»š
2. **æ•°æ®åº“ä¿æŒåŸçŠ¶** - ä¸ä¼šæœ‰éƒ¨åˆ†å˜æ›´çš„æƒ…å†µ
3. **ä¿®å¤åé‡æ–°æ‰§è¡Œ** - ä¿®å¤é—®é¢˜åå†æ¬¡è¿è¡Œ `npm run db:migrate`

```bash
# æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
npm run db:status

# æŸ¥çœ‹åç«¯æ—¥å¿—
pm2 logs geo-backend

# æ‰‹åŠ¨æ£€æŸ¥æ•°æ®åº“
psql -U geo_user -d geo_system -h localhost
```

#### 5.7 è¿ç§»ç³»ç»Ÿæ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š
- ğŸ“– [æ•°æ®åº“è¿ç§»ä½¿ç”¨æŒ‡å—](./DATABASE_MIGRATION_GUIDE.md) - å®Œæ•´ä½¿ç”¨è¯´æ˜
- ğŸ“– [è¿ç§»ç³»ç»Ÿæ€»ç»“](./MIGRATION_SYSTEM_SUMMARY.md) - ç³»ç»Ÿä»‹ç»å’Œå¯¹æ¯”
- ğŸ“– [è¿ç§»æ¸…ç†æŒ‡å—](./MIGRATION_CLEANUP_GUIDE.md) - æ¸…ç†æ—§è¿ç§»æ–‡ä»¶

### ç¬¬å…­æ­¥ï¼šå®‰è£…ä¾èµ–å¹¶å¯åŠ¨ï¼ˆ10åˆ†é’Ÿï¼‰

```bash
# å®‰è£…åç«¯ä¾èµ–
cd /var/www/geo-system/server
npm ci --production

# ä½¿ç”¨ PM2 å¯åŠ¨åç«¯æœåŠ¡
pm2 start dist/index.js --name geo-backend

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save

# æŸ¥çœ‹çŠ¶æ€
pm2 status
pm2 logs geo-backend
```

### ç¬¬å…­æ­¥ï¼šé…ç½® Nginxï¼ˆ15åˆ†é’Ÿï¼‰

åˆ›å»º `/etc/nginx/sites-available/geo-system`ï¼š

```nginx
server {
    listen 80;
    server_name YOUR_SERVER_IP;  # æ›¿æ¢ä¸ºä½ çš„ IP æˆ–åŸŸå
    
    # å®‰å…¨ Headers
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    # ç¦æ­¢è®¿é—®æ•æ„Ÿæ–‡ä»¶
    location ~ /\. { deny all; return 404; }
    location ~ ^/(src|server|node_modules) { deny all; return 404; }
    location ~ \.(env|json|yml|yaml|config|ts|map)$ { deny all; return 404; }
    
    # å‰ç«¯ä¸»åº”ç”¨
    location / {
        root /var/www/geo-system/client/dist;
        try_files $uri $uri/ /index.html;
        
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }
    
    # Landing é¡µ
    location /landing {
        alias /var/www/geo-system/landing/dist;
        try_files $uri $uri/ /landing/index.html;
    }
    
    # åç«¯ API
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_hide_header X-Powered-By;
    }
    
    # WebSocket
    location /ws {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        proxy_set_header Host $host;
    }
    
    # ä¸Šä¼ æ–‡ä»¶
    location /uploads {
        alias /var/www/geo-system/server/uploads;
        expires 30d;
        add_header Cache-Control "public";
    }
}
```

**å¯ç”¨é…ç½®ï¼š**

```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/geo-system /etc/nginx/sites-enabled/

# åˆ é™¤é»˜è®¤é…ç½®
sudo rm /etc/nginx/sites-enabled/default

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

### ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯éƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status
sudo systemctl status nginx
sudo systemctl status postgresql
sudo systemctl status redis

# æµ‹è¯• API
curl http://localhost:3000/api/health

# æµè§ˆå™¨è®¿é—®
# å‰ç«¯ï¼šhttp://YOUR_SERVER_IP
# APIï¼šhttp://YOUR_SERVER_IP/api/health
```

### ğŸ”§ éƒ¨ç½²é—®é¢˜æ’æŸ¥

éƒ¨ç½²è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œè¯·æŸ¥çœ‹ï¼š

ğŸ“– **[éƒ¨ç½²é—®é¢˜æ’æŸ¥ä¸è§£å†³æ–¹æ¡ˆ](./docs/03-éƒ¨ç½²æŒ‡å—/DEPLOYMENT_TROUBLESHOOTING.md)** â­ é‡è¦

è¯¥æ–‡æ¡£è®°å½•äº†ä»é¦–æ¬¡éƒ¨ç½²åˆ°ç³»ç»Ÿç¨³å®šè¿è¡Œè¿‡ç¨‹ä¸­é‡åˆ°çš„æ‰€æœ‰é—®é¢˜ï¼š

| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | çŠ¶æ€ |
|------|---------|------|
| è½åœ°é¡µé‡å®šå‘åˆ°é”™è¯¯åŸŸå | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| Nginx 403 Forbidden é”™è¯¯ | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| å®¢æˆ·ç«¯èµ„æº 404 é”™è¯¯ | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| ç™»å½• API 500 é”™è¯¯ | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| æ•°æ®åº“è¡¨å’Œå­—æ®µç¼ºå¤± | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| "è¿›å…¥ç³»ç»Ÿ"æŒ‰é’®ä¸è·³è½¬ | ğŸ”´ é«˜ | âœ… å·²è§£å†³ |
| Dashboard API 500 é”™è¯¯ | ğŸŸ¡ ä¸­ | âœ… å·²è§£å†³ |
| WebSocket è¿æ¥å¤±è´¥ | ğŸŸ¡ ä¸­ | âœ… å·²è§£å†³ |

**å…³é”®ç»éªŒæ€»ç»“ï¼š**
- âœ… ç¯å¢ƒæ£€æµ‹è¦è€ƒè™‘ IP åœ°å€è®¿é—®
- âœ… Nginx alias é…ç½®è¦æ³¨æ„å°¾éƒ¨æ–œæ 
- âœ… Vite base è·¯å¾„è¦ä¸éƒ¨ç½²è·¯å¾„ä¸€è‡´
- âœ… æ•°æ®åº“è¿ç§»è¦å®Œæ•´ä¸”å¯é‡å¤
- âœ… éƒ¨ç½²åè¦æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

**å¿«é€Ÿæ’æŸ¥ï¼š**
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
pm2 logs geo-backend --lines 50

# æŸ¥çœ‹ Nginx æ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# æ£€æŸ¥æ•°æ®åº“è¿ç§»çŠ¶æ€
cd /var/www/geo-system/server && npm run db:status

# æµ‹è¯• API
curl http://YOUR_SERVER_IP/api/health
```

### ğŸ‰ éƒ¨ç½²å®Œæˆï¼

è®¿é—® `http://YOUR_SERVER_IP` ä½¿ç”¨ä»¥ä¸‹è´¦å·ç™»å½•ï¼š
- ç”¨æˆ·åï¼š`lzc2005`
- å¯†ç ï¼š`jehI2oBuNMMJehMM`

---

## ğŸ”’ å®‰å…¨é…ç½®è¯´æ˜

### å¾®ä¿¡æ”¯ä»˜å®‰å…¨é…ç½® â­ é‡è¦

ç³»ç»Ÿå·²å®Œæˆå…¨é¢çš„å®‰å…¨å®¡è®¡å’Œä¿®å¤ï¼Œæ‰€æœ‰æ•æ„Ÿä¿¡æ¯éƒ½é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†ã€‚

#### å®‰å…¨ä¿®å¤æˆæœï¼ˆ2024å¹´12æœˆ29æ—¥ï¼‰

âœ… **ä»£ç å±‚é¢**
- ç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç çš„æ•æ„Ÿä¿¡æ¯
- æ‰€æœ‰é…ç½®ä»ç¯å¢ƒå˜é‡è¯»å–
- ç”Ÿäº§ç¯å¢ƒç¦ç”¨æ•æ„Ÿæ—¥å¿—

âœ… **æ–‡æ¡£å±‚é¢**
- æ¸…ç† 23 ä¸ªæ–‡æ¡£ä¸­çš„çœŸå®é…ç½®
- ä½¿ç”¨å ä½ç¬¦ç¤ºä¾‹
- åˆ›å»ºè‡ªåŠ¨å¤‡ä»½

âœ… **æ–‡ä»¶æƒé™**
- è¯ä¹¦æ–‡ä»¶æƒé™è®¾ç½®ä¸º 600
- .gitignore æ­£ç¡®é…ç½®

âœ… **å®‰å…¨å·¥å…·**
- å®‰å…¨éªŒè¯å·¥å…·
- æ–‡æ¡£æ¸…ç†è„šæœ¬
- é…ç½®æµ‹è¯•è„šæœ¬

#### å¿«é€ŸéªŒè¯å®‰å…¨é…ç½®

```bash
# éªŒè¯æ‰€æœ‰å®‰å…¨é…ç½®
npm run security:verify

# æµ‹è¯•æ”¯ä»˜é…ç½®
npm run test:payment-config

# æ¸…ç†æ–‡æ¡£ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚éœ€è¦ï¼‰
npm run security:clean-docs
```

#### ç¯å¢ƒå˜é‡é…ç½®

å¾®ä¿¡æ”¯ä»˜éœ€è¦ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆåœ¨ `server/.env` ä¸­é…ç½®ï¼‰ï¼š

```env
# å¾®ä¿¡æ”¯ä»˜é…ç½®
WECHAT_PAY_APP_ID=wx_your_app_id
WECHAT_PAY_MCH_ID=your_merchant_id
WECHAT_PAY_API_V3_KEY=your_32_character_key
WECHAT_PAY_SERIAL_NO=your_serial_number
WECHAT_PAY_PRIVATE_KEY_PATH=/path/to/apiclient_key.pem
WECHAT_PAY_PUBLIC_KEY_PATH=/path/to/wechat_pay_public_key.pem
WECHAT_PAY_PUBLIC_KEY_ID=PUB_KEY_ID_your_id
WECHAT_PAY_NOTIFY_URL=https://your-domain.com/api/payment/wechat/notify
```

#### å®‰å…¨æ–‡æ¡£

- ğŸ“– [å¾®ä¿¡æ”¯ä»˜å®‰å…¨å®¡è®¡æŠ¥å‘Š](./å¾®ä¿¡æ”¯ä»˜å®‰å…¨å®¡è®¡æŠ¥å‘Š.md) - è¯¦ç»†çš„å®‰å…¨é—®é¢˜åˆ†æ
- ğŸ“– [å®‰å…¨ä¿®å¤å®Œæˆ](./âœ…å®‰å…¨ä¿®å¤å®Œæˆ.md) - ä¿®å¤æ­¥éª¤å’ŒéªŒè¯æ–¹æ³•
- ğŸ“– [å®‰å…¨é…ç½®å®Œæˆ-ç”Ÿäº§ç¯å¢ƒå°±ç»ª](./ğŸ”’å®‰å…¨é…ç½®å®Œæˆ-ç”Ÿäº§ç¯å¢ƒå°±ç»ª.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—
- ğŸ“– [å®‰å…¨ä¿®å¤æ€»ç»“](./âœ…å®‰å…¨ä¿®å¤æ€»ç»“-ç«‹å³å¯ç”¨.md) - å¿«é€Ÿä½¿ç”¨æŒ‡å—

### å¼ºå¯†é’¥è¯´æ˜

ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å¼ºå¯†é’¥ä¿æŠ¤å®‰å…¨ï¼š

1. **JWT_SECRET**ï¼ˆ256ä½ï¼‰
   - ç”¨äºåŠ å¯†ç”¨æˆ·ç™»å½•ä»¤ç‰Œ
   - ç ´è§£æ—¶é—´ï¼šæ•°åäº¿å¹´
   - å¿…é¡»ä¿å¯†ï¼Œä¸èƒ½æ³„éœ²

2. **JWT_REFRESH_SECRET**ï¼ˆ256ä½ï¼‰
   - ç”¨äºåŠ å¯†åˆ·æ–°ä»¤ç‰Œ
   - å…è®¸ç”¨æˆ·ä¿æŒç™»å½•çŠ¶æ€
   - å¿…é¡»ä¸ JWT_SECRET ä¸åŒ

3. **ADMIN_PASSWORD**ï¼ˆå¼ºå¯†ç ï¼‰
   - ç®¡ç†å‘˜ç™»å½•å¯†ç 
   - åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—
   - å»ºè®®å®šæœŸæ›´æ¢

### é€Ÿç‡é™åˆ¶è¯´æ˜

ç³»ç»Ÿå®ç°äº†æ™ºèƒ½é€Ÿç‡é™åˆ¶ï¼š

- **ç”Ÿäº§ç¯å¢ƒ**ï¼š500æ¬¡/åˆ†é’Ÿ
  - å•ç”¨æˆ·æ­£å¸¸ä½¿ç”¨ï¼šçº¦70æ¬¡/åˆ†é’Ÿ
  - å¯æ”¯æŒ10äººåŒæ—¶ä½¿ç”¨
  - æœ‰æ•ˆé˜²æ­¢æš´åŠ›æ”»å‡»

- **å¼€å‘ç¯å¢ƒ**ï¼š1000æ¬¡/åˆ†é’Ÿ
  - æ–¹ä¾¿è°ƒè¯•å’Œæµ‹è¯•
  - è‡ªåŠ¨æ ¹æ® NODE_ENV åˆ‡æ¢

- **ç™»å½•é™æµ**ï¼š5æ¬¡/15åˆ†é’Ÿ
  - é˜²æ­¢æš´åŠ›ç ´è§£å¯†ç 
  - æŒ‰ IP + ç”¨æˆ·åé™åˆ¶

- **æ³¨å†Œé™æµ**ï¼š3æ¬¡/1å°æ—¶
  - é˜²æ­¢æ¶æ„æ³¨å†Œ
  - æŒ‰ IP åœ°å€é™åˆ¶

### å®‰å…¨æ£€æŸ¥æ¸…å•

éƒ¨ç½²åå¿…é¡»æ£€æŸ¥ï¼š

```bash
# 1. æ£€æŸ¥ .env æ–‡ä»¶æƒé™
ls -la /var/www/geo-system/.env
# åº”è¯¥æ˜¯ï¼š-rw------- 1 ubuntu ubuntu

# 2. æ£€æŸ¥æ•æ„Ÿæ–‡ä»¶æ˜¯å¦å¯è®¿é—®
curl http://YOUR_SERVER_IP/.env  # åº”è¯¥ 404
curl http://YOUR_SERVER_IP/.git/config  # åº”è¯¥ 404

# 3. æ£€æŸ¥ HTTP Headers
curl -I http://YOUR_SERVER_IP
# åº”è¯¥åŒ…å«å®‰å…¨ headers

# 4. æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
# åº”è¯¥æ˜¾ç¤ºï¼šStatus: active
# åº”è¯¥å¼€æ”¾ï¼š22, 80, 443 ç«¯å£

# 5. æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status postgresql
sudo systemctl status redis
sudo systemctl status nginx
pm2 status
```


## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸš€ æ–°æ‰‹å…¥é—¨
- [å¿«é€Ÿå¼€å§‹](./docs/01-å¿«é€Ÿå¼€å§‹/) - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- [æµ‹è¯•è´¦å·è¯´æ˜](./docs/01-å¿«é€Ÿå¼€å§‹/æµ‹è¯•è´¦å·è¯´æ˜.md)
- [å¦‚ä½•è®¿é—®ä¸ªäººä¸­å¿ƒ](./docs/01-å¿«é€Ÿå¼€å§‹/å¦‚ä½•è®¿é—®ä¸ªäººä¸­å¿ƒ.md)

### ğŸ“– åŠŸèƒ½è¯´æ˜
- [åŠŸèƒ½è¯´æ˜](./docs/02-åŠŸèƒ½è¯´æ˜/) - è¯¦ç»†åŠŸèƒ½ä»‹ç»
- [å•†å“è®¢å•ç³»ç»Ÿè®¾è®¡](./docs/02-åŠŸèƒ½è¯´æ˜/å•†å“è®¢å•ç³»ç»Ÿå®Œæ•´è®¾è®¡è¯´æ˜.md)
- [å¾®ä¿¡æ”¯ä»˜é…ç½®æŒ‡å—](./docs/02-åŠŸèƒ½è¯´æ˜/å¾®ä¿¡æ”¯ä»˜é…ç½®è·å–è¯¦ç»†æŒ‡å—.md)

### ğŸš€ éƒ¨ç½²æŒ‡å— â­ é‡è¦
- [è…¾è®¯äº‘å¿«é€Ÿéƒ¨ç½²æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/è…¾è®¯äº‘å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md) â­ æ¨è
- [è…¾è®¯äº‘æœåŠ¡å™¨é•œåƒé€‰æ‹©](./docs/03-éƒ¨ç½²æŒ‡å—/è…¾è®¯äº‘æœåŠ¡å™¨é•œåƒé€‰æ‹©æŒ‡å—.md)
- [éƒ¨ç½²æ–¹å¼å¯¹æ¯”](./docs/03-éƒ¨ç½²æŒ‡å—/éƒ¨ç½²æ–¹å¼å¯¹æ¯”æŒ‡å—.md)

### ğŸ—„ï¸ æ•°æ®åº“è¿ç§» â­ é‡è¦
- [æ•°æ®åº“è¿ç§»ä½¿ç”¨æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/DATABASE_MIGRATION_GUIDE.md) â­ æ¨è
- [è¿ç§»ç³»ç»Ÿæ€»ç»“](./docs/03-éƒ¨ç½²æŒ‡å—/MIGRATION_SYSTEM_SUMMARY.md) - ç³»ç»Ÿä»‹ç»å’Œæ•ˆæœå¯¹æ¯”
- [è¿ç§»æ¸…ç†æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/MIGRATION_CLEANUP_GUIDE.md) - æ¸…ç†æ—§è¿ç§»æ–‡ä»¶
- [æ•°æ®åº“è¿ç§»å®ŒæˆæŠ¥å‘Š](./docs/03-éƒ¨ç½²æŒ‡å—/DATABASE_MIGRATION_COMPLETE.md) - è¿ç§»æ‰§è¡Œè®°å½•
- [è¿ç§»ç³»ç»Ÿè¯´æ˜](./server/src/db/migrations/README.md) - æŠ€æœ¯ç»†èŠ‚

### ğŸ”’ å®‰å…¨æŒ‡å— â­ é‡è¦
- [ä»£ç ä¿æŠ¤å®ŒæˆæŠ¥å‘Š](./docs/04-å®‰å…¨æŒ‡å—/ä»£ç ä¿æŠ¤å®ŒæˆæŠ¥å‘Š.md) â­
- [å¼ºå¯†é’¥é…ç½®è¯´æ˜](./docs/04-å®‰å…¨æŒ‡å—/å¼ºå¯†é’¥é…ç½®è¯´æ˜.md) â­
- [é€Ÿç‡é™åˆ¶é…ç½®è¯´æ˜](./docs/04-å®‰å…¨æŒ‡å—/é€Ÿç‡é™åˆ¶é…ç½®è¯´æ˜.md) â­
- [äº‘ç«¯éƒ¨ç½²æºä»£ç å®‰å…¨æŒ‡å—](./docs/04-å®‰å…¨æŒ‡å—/äº‘ç«¯éƒ¨ç½²æºä»£ç å®‰å…¨æŒ‡å—.md)
- [å®‰å…¨æœ€ä½³å®è·µ](./docs/04-å®‰å…¨æŒ‡å—/SECURITY_BEST_PRACTICES.md)

### ğŸ§ª æµ‹è¯•å’Œè¯Šæ–­
- [æµ‹è¯•æŒ‡å—](./docs/05-æµ‹è¯•æŒ‡å—/) - æµ‹è¯•æ–‡æ¡£
- [ç³»ç»Ÿè¯Šæ–­](./docs/05-æµ‹è¯•æŒ‡å—/SYSTEM_DIAGNOSIS.md)
- [å‰ç«¯é—®é¢˜è¯Šæ–­](./docs/05-æµ‹è¯•æŒ‡å—/å‰ç«¯é—®é¢˜è¯Šæ–­æŒ‡å—.md)

### ğŸ“ å®Œæ•´æ–‡æ¡£
æŸ¥çœ‹ [docs/README.md](./docs/README.md) è·å–å®Œæ•´æ–‡æ¡£ç´¢å¼•

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- React 18 + TypeScript
- Ant Design 5
- Tailwind CSS
- React Router v6
- Vite

### åç«¯
- Node.js + Express
- TypeScript
- PostgreSQL
- Redisï¼ˆå¯é€‰ï¼‰
- WebSocket

### AI é›†æˆ
- DeepSeek API
- Google Gemini API
- Ollamaï¼ˆæœ¬åœ°æ¨¡å‹ï¼‰

---

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå‰ç«¯+åç«¯ï¼‰
npm run dev

# ä»…å¯åŠ¨å‰ç«¯
npm run client:dev

# ä»…å¯åŠ¨åç«¯
npm run server:dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æ•°æ®åº“è¿ç§»å‘½ä»¤ â­ é‡è¦
cd server

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
npm run db:status

# æ‰§è¡Œæ‰€æœ‰å¾…è¿ç§»
npm run db:migrate

# å›æ»šæœ€åä¸€æ¬¡è¿ç§»
npm run db:rollback

# åˆ›å»ºæ–°è¿ç§»
npm run db:create -- add_new_feature

# è¿è¡Œæµ‹è¯•
npm test
```

### ğŸ“Š æ•°æ®åº“è¿ç§»ç³»ç»Ÿ

æˆ‘ä»¬å»ºç«‹äº†å®Œæ•´çš„æ•°æ®åº“è¿ç§»ç³»ç»Ÿï¼Œè§£å†³æ‰‹åŠ¨ç®¡ç†æ•°æ®åº“å˜æ›´çš„é—®é¢˜ï¼š

**ä¸»è¦ç‰¹æ€§ï¼š**
- âœ… **ç‰ˆæœ¬æ§åˆ¶** - æ¯æ¬¡å˜æ›´éƒ½æœ‰è®°å½•ï¼Œå¯è¿½æº¯
- âœ… **è‡ªåŠ¨åŒ–** - ä¸€é”®æ‰§è¡Œæ‰€æœ‰å¾…è¿ç§»
- âœ… **å¯å›æ»š** - æ”¯æŒå‘ä¸Šå’Œå‘ä¸‹è¿ç§»
- âœ… **å¯é‡å¤** - å¤šæ¬¡æ‰§è¡Œä¸ä¼šå‡ºé”™
- âœ… **å›¢é˜Ÿåä½œ** - ç»Ÿä¸€çš„è¿ç§»æµç¨‹

**æ•ˆæœå¯¹æ¯”ï¼š**

| æ“ä½œ | ä¹‹å‰ | ç°åœ¨ |
|------|------|------|
| æ·»åŠ å­—æ®µ | æ‰‹åŠ¨SSH + SQL (10-15åˆ†é’Ÿ) | `npm run db:create` + `npm run db:migrate` (1-2åˆ†é’Ÿ) |
| æŸ¥çœ‹çŠ¶æ€ | æ‰‹åŠ¨æŸ¥è¯¢æ•°æ®åº“ | `npm run db:status` |
| å›æ»šå˜æ›´ | æ‰‹åŠ¨ç¼–å†™SQL | `npm run db:rollback` |
| éƒ¨ç½²åˆ°ç”Ÿäº§ | å¤šæ­¥æ‰‹åŠ¨æ“ä½œ | `./scripts/deployment/deploy-migrations.sh` ä¸€é”®å®Œæˆ |

**æ—¶é—´èŠ‚çœï¼š80%ä»¥ä¸Š | é”™è¯¯å‡å°‘ï¼šå‡ ä¹æ¶ˆé™¤äººä¸ºé”™è¯¯**

**è¯¦ç»†æ–‡æ¡£ï¼š**
- ğŸ“– [æ•°æ®åº“è¿ç§»ä½¿ç”¨æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/DATABASE_MIGRATION_GUIDE.md) - å®Œæ•´ä½¿ç”¨è¯´æ˜å’Œç¤ºä¾‹
- ğŸ“– [è¿ç§»ç³»ç»Ÿæ€»ç»“](./docs/03-éƒ¨ç½²æŒ‡å—/MIGRATION_SYSTEM_SUMMARY.md) - ç³»ç»Ÿä»‹ç»å’Œæ•ˆæœå¯¹æ¯”
- ğŸ“– [è¿ç§»æ¸…ç†æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/MIGRATION_CLEANUP_GUIDE.md) - æ¸…ç†æ—§è¿ç§»æ–‡ä»¶

**å¿«é€Ÿå¼€å§‹ï¼š**

```bash
# 1. æŸ¥çœ‹å½“å‰çŠ¶æ€
cd server
npm run db:status

# 2. åˆ›å»ºæ–°è¿ç§»
npm run db:create -- add_email_to_users

# 3. ç¼–è¾‘ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶
# server/src/db/migrations/003_add_email_to_users.sql

# 4. æ‰§è¡Œè¿ç§»
npm run db:migrate

# 5. éƒ¨ç½²åˆ°ç”Ÿäº§ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰
./scripts/deployment/deploy-migrations.sh
```

---

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… JWT ä»¤ç‰Œè®¤è¯ï¼ˆè®¿é—®ä»¤ç‰Œ + åˆ·æ–°ä»¤ç‰Œï¼‰
- âœ… å¯†ç  bcrypt å“ˆå¸Œï¼ˆ10è½®ç›ï¼‰
- âœ… åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… ç»†ç²’åº¦æƒé™ç®¡ç†ï¼ˆ20ç§æƒé™ï¼‰
- âœ… ç™»å½•é™æµä¿æŠ¤ï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰
- âœ… å®æ—¶å®‰å…¨ç›‘æ§å’Œå®¡è®¡æ—¥å¿—
- âœ… åŠ¨æ€å®‰å…¨ç­–ç•¥é…ç½®
- âœ… API å¯†é’¥åŠ å¯†å­˜å‚¨

---

## ğŸ“ˆ ç³»ç»ŸçŠ¶æ€

- **é¡¹ç›®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
- **å®‰å…¨ç­‰çº§**: ğŸŸ¢ é«˜
- **æ–‡æ¡£å®Œæ•´åº¦**: 100%
- **ä»£ç ä¿æŠ¤**: âœ… å·²å®Œæˆ

---

## ğŸ¯ åº”ç”¨åœºæ™¯

- **å“ç‰Œè¥é”€**: æå‡å“ç‰Œåœ¨ AI å¹³å°çš„æ›å…‰ç‡
- **SEO ä¼˜åŒ–**: ç”Ÿæˆé«˜è´¨é‡ SEO ä¼˜åŒ–æ–‡ç« 
- **å†…å®¹åˆ›ä½œ**: å¿«é€Ÿç”Ÿæˆä¸“ä¸šå†…å®¹
- **æ‰¹é‡ç”Ÿäº§**: æ‰¹é‡ç”Ÿæˆæ–‡ç« ï¼Œæé«˜æ•ˆç‡
- **çŸ¥è¯†ç®¡ç†**: ç³»ç»ŸåŒ–ç®¡ç†ä¼ä¸šçŸ¥è¯†èµ„äº§

---

## ğŸ”® æœªæ¥è§„åˆ’

### å·²å®Œæˆ âœ…
- [x] æœ¬åœ° Ollama æ¨¡å‹æ”¯æŒ
- [x] æ–‡ç« ç”Ÿæˆä»»åŠ¡ç³»ç»Ÿ
- [x] ä¼ä¸šå›¾åº“å’ŒçŸ¥è¯†åº“
- [x] ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- [x] è®¢é˜…å¥—é¤ç³»ç»Ÿ
- [x] å¾®ä¿¡æ”¯ä»˜é›†æˆ
- [x] å®‰å…¨ç®¡ç†ç³»ç»Ÿ

### è®¡åˆ’ä¸­ ğŸ“‹
- [ ] æ–‡ç« è´¨é‡è¯„åˆ†ç³»ç»Ÿ
- [ ] æ•°æ®åˆ†æé¢æ¿
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯åº”ç”¨
- [ ] æ›´å¤š AI æ¨¡å‹é›†æˆ

---

## ğŸ“ æ”¯æŒ

å¦‚é‡é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. [æµ‹è¯•æŒ‡å—](./docs/05-æµ‹è¯•æŒ‡å—/) - è¯Šæ–­å’Œæµ‹è¯•
2. [é—®é¢˜ä¿®å¤](./docs/06-é—®é¢˜ä¿®å¤/) - å·²çŸ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ
3. è¿è¡Œè¯Šæ–­è„šæœ¬ï¼š`./scripts/testing/éƒ¨ç½²å‰æœ€ç»ˆæ£€æŸ¥.sh`

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯

---

<div align="center">

**Made with â¤ï¸ by GEO Team**

[æ–‡æ¡£](./docs/) Â· [éƒ¨ç½²æŒ‡å—](./docs/03-éƒ¨ç½²æŒ‡å—/) Â· [å®‰å…¨æŒ‡å—](./docs/04-å®‰å…¨æŒ‡å—/)

</div>
