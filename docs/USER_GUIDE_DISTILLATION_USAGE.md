# 蒸馏结果使用追踪功能 - 用户使用指南

## 功能概述

蒸馏结果使用追踪功能帮助您更好地管理和使用蒸馏结果，确保所有蒸馏结果被平均使用，避免重复使用同一个蒸馏结果生成文章。

### 主要功能

1. **使用次数追踪** - 自动记录每个蒸馏结果被使用的次数
2. **使用历史查看** - 查看每个蒸馏结果的详细使用历史
3. **智能推荐** - 系统自动推荐使用次数较少的蒸馏结果
4. **智能选择** - 文章生成时自动选择使用次数最少的蒸馏结果

## 快速开始

### 1. 查看蒸馏结果使用情况

1. 访问"蒸馏结果"页面
2. 在列表中可以看到每个蒸馏结果的使用次数
3. 列表按使用次数升序排序，使用次数少的排在前面

![蒸馏结果列表](screenshots/distillation-list.png)

### 2. 查看使用历史

1. 在蒸馏结果列表中，点击某个蒸馏结果的"查看使用历史"按钮
2. 弹出窗口显示该蒸馏结果的所有使用记录
3. 每条记录包含：
   - 任务ID
   - 文章标题
   - 使用时间

![使用历史](screenshots/usage-history.png)

### 3. 创建文章生成任务

1. 点击"新建文章生成任务"按钮
2. 在蒸馏结果下拉列表中：
   - 每个选项显示使用次数
   - 使用次数最少的前3个有"推荐"标记
   - 没有话题的蒸馏结果被禁用
3. 选择推荐的蒸馏结果可以帮助平衡使用

![任务配置](screenshots/task-config.png)

## 详细功能说明

### 使用次数显示

**位置**: 蒸馏结果列表页面

**说明**: 
- 显示每个蒸馏结果被用于文章生成的总次数
- 使用次数会在文章生成后自动更新
- 删除文章时，使用次数会相应减少

**用途**:
- 了解哪些蒸馏结果使用频繁
- 发现未充分利用的蒸馏结果
- 帮助决策选择哪个蒸馏结果

### 推荐标记

**位置**: 任务配置页面的蒸馏结果下拉列表

**说明**:
- 系统自动标记使用次数最少的前3个蒸馏结果
- 推荐标记为金色，带有星星图标
- 悬停在推荐标记上可以看到推荐原因

**推荐规则**:
1. 优先推荐使用次数最少的
2. 使用次数相同时，推荐创建时间较早的
3. 没有话题的蒸馏结果不会被推荐

**建议**:
- 优先选择推荐的蒸馏结果
- 这样可以确保所有蒸馏结果被平均使用
- 避免某些蒸馏结果被过度使用

### 智能选择算法

**说明**: 
系统在文章生成时会自动选择使用次数最少的蒸馏结果，无需手动干预。

**工作原理**:
1. 查询所有有话题的蒸馏结果
2. 按使用次数升序排序
3. 使用次数相同时，按创建时间升序排序
4. 选择排在最前面的蒸馏结果

**优势**:
- 自动平衡使用
- 确保循环利用
- 提高内容多样性

### 使用历史

**位置**: 蒸馏结果列表页面 → 查看使用历史按钮

**包含信息**:
- 任务ID：可以点击跳转到任务详情
- 文章标题：可以点击跳转到文章详情
- 使用时间：记录使用的具体时间

**特殊情况**:
- 如果文章被删除，标题显示为"文章已删除"
- 历史记录按时间降序排序（最新的在前）
- 支持分页查看

### 任务列表显示

**位置**: 文章生成任务列表页面

**改进**:
- "蒸馏结果"列现在显示关键词而非提供商
- 更直观地了解任务使用了哪个蒸馏结果
- 如果蒸馏结果被删除，显示"已删除"

## 使用场景

### 场景1: 平衡使用蒸馏结果

**问题**: 某些蒸馏结果被频繁使用，而其他的很少使用

**解决方案**:
1. 查看蒸馏结果列表，了解使用情况
2. 创建任务时选择推荐的蒸馏结果
3. 或者让系统自动选择（智能选择算法）

### 场景2: 追踪蒸馏结果效果

**问题**: 想了解某个蒸馏结果生成了哪些文章

**解决方案**:
1. 在蒸馏结果列表中找到该蒸馏结果
2. 点击"查看使用历史"
3. 查看所有使用该蒸馏结果生成的文章

### 场景3: 发现未使用的蒸馏结果

**问题**: 有些蒸馏结果创建后从未使用

**解决方案**:
1. 查看蒸馏结果列表
2. 使用次数为0的蒸馏结果会排在最前面
3. 这些蒸馏结果会被自动推荐使用

## 常见问题

### Q1: 为什么某个蒸馏结果的使用次数没有更新？

**A**: 可能的原因：
- 文章生成任务还在进行中
- 任务失败了（失败的任务不会增加使用次数）
- 刷新页面查看最新数据

### Q2: 删除文章后使用次数会减少吗？

**A**: 是的，删除文章后：
- 使用次数会自动减少1
- 使用历史记录会被删除
- 这是自动完成的，无需手动操作

### Q3: 为什么某个蒸馏结果被禁用了？

**A**: 蒸馏结果被禁用的原因：
- 该蒸馏结果没有可用的话题
- 需要先为该蒸馏结果添加话题才能使用

### Q4: 推荐标记是如何确定的？

**A**: 推荐标记的规则：
- 使用次数最少的前3个
- 必须有可用话题
- 使用次数相同时，优先推荐创建时间早的

### Q5: 可以手动重置使用次数吗？

**A**: 可以，但需要管理员权限：
- 联系系统管理员
- 管理员可以重置单个或所有蒸馏结果的使用统计

### Q6: 使用历史可以删除吗？

**A**: 使用历史会在以下情况自动删除：
- 删除对应的文章
- 删除对应的蒸馏结果
- 管理员重置使用统计

### Q7: 如何确保数据一致性？

**A**: 系统提供了数据一致性保障：
- 使用数据库事务确保操作原子性
- 提供修复工具检测和修复不一致数据
- 管理员可以定期运行修复工具

## 最佳实践

### 1. 定期查看使用情况

建议每周查看一次蒸馏结果的使用情况，了解：
- 哪些蒸馏结果使用频繁
- 哪些蒸馏结果很少使用
- 是否需要创建新的蒸馏结果

### 2. 优先使用推荐的蒸馏结果

创建任务时：
- 优先选择带有"推荐"标记的蒸馏结果
- 这样可以确保所有蒸馏结果被平均使用
- 提高内容的多样性

### 3. 及时清理无用的蒸馏结果

如果某个蒸馏结果：
- 长期未使用
- 质量不佳
- 不再需要

建议删除该蒸馏结果，保持列表整洁。

### 4. 合理规划蒸馏结果

创建蒸馏结果时：
- 确保关键词有代表性
- 为每个蒸馏结果添加足够的话题
- 避免创建过多相似的蒸馏结果

## 技术支持

如遇到问题或有建议，请：
1. 查看本指南的常见问题部分
2. 联系系统管理员
3. 提交问题反馈

## 更新日志

### 版本 1.0.0 (2024-01-01)
- 初始版本发布
- 使用次数追踪功能
- 使用历史查看功能
- 智能推荐功能
- 智能选择算法

---

**提示**: 本指南会随着功能更新而更新，请定期查看最新版本。
