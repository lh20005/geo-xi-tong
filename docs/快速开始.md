# GEO优化系统 - 快速开始指南

## 一、系统要求

### 1.1 开发环境
- Node.js 18+ 
- PostgreSQL 12+
- npm 或 yarn

### 1.2 API要求
需要以下任一AI服务的API密钥：
- DeepSeek API Key
- Google Gemini API Key

## 二、安装步骤

### 2.1 克隆项目
```bash
git clone <repository-url>
cd geo-optimization-system
```

### 2.2 安装依赖
```bash
# 安装所有依赖（根目录、前端、后端）
npm run install:all
```

### 2.3 配置环境变量
```bash
# 复制环境变量模板
cp .env.example .env

# 编辑 .env 文件
nano .env
```

配置以下内容：
```env
# 数据库配置
DATABASE_URL=postgresql://用户名:密码@localhost:5432/数据库名

# AI API配置（至少配置一个）
DEEPSEEK_API_KEY=your_deepseek_api_key
GEMINI_API_KEY=your_gemini_api_key

# Ollama配置（可选，用于本地AI模型）
OLLAMA_BASE_URL=http://localhost:11434

# 文件上传配置
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# 服务器配置
PORT=3000
NODE_ENV=development
FRONTEND_URL=http://localhost:5173
```

### 2.4 创建数据库
```bash
# 登录PostgreSQL
psql -U postgres

# 创建数据库
CREATE DATABASE geo_system;

# 退出
\q
```

### 2.5 运行数据库迁移
```bash
cd server
npm run db:migrate
cd ..
```

### 2.6 启动开发服务器
```bash
# 同时启动前端和后端
npm run dev
```

访问地址：
- 前端: http://localhost:5173
- 后端: http://localhost:3000

## 三、获取API密钥

### 3.1 DeepSeek API

1. 访问 [DeepSeek平台](https://platform.deepseek.com)
2. 注册并登录账号
3. 进入API密钥管理页面
4. 创建新的API密钥
5. 复制密钥并保存到 `.env` 文件

**特点**：
- 中文支持优秀
- 价格相对便宜
- 响应速度快

### 3.2 Google Gemini API

1. 访问 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 使用Google账号登录
3. 创建API密钥
4. 复制密钥并保存到 `.env` 文件

**特点**：
- 免费额度较高
- 多语言支持
- Google生态集成

## 四、使用流程

### 4.1 配置AI API

1. 打开系统，点击左侧菜单"API配置"
2. 选择要使用的AI模型（DeepSeek或Gemini）
3. 输入对应的API Key
4. 点击"保存配置"
5. 看到"API配置保存成功"提示

### 4.2 关键词蒸馏

1. 点击左侧菜单"关键词蒸馏"
2. 在输入框中输入关键词，例如："英国留学"
3. 点击"开始蒸馏"按钮
4. 等待AI分析（通常10-30秒）
5. 查看生成的话题列表

**示例关键词**：
- 英国留学
- Python培训
- 品牌营销
- 健身教练
- 咖啡店推荐

### 4.3 管理话题

1. 在蒸馏结果页面，点击"查看话题"
2. 查看所有生成的话题
3. 可以编辑话题内容
4. 可以删除不需要的话题
5. 勾选要用于文章生成的话题

### 4.4 创建企业资源（可选但推荐）

**创建图库**
1. 点击左侧菜单"企业图库"
2. 点击"创建相册"
3. 输入相册名称
4. 上传图片（支持批量上传）

**创建知识库**
1. 点击左侧菜单"企业知识库"
2. 点击"创建知识库"
3. 输入知识库名称和描述
4. 上传企业文档（txt、md、pdf、doc、docx）
5. 系统自动提取文本内容

**创建文章设置**
1. 点击左侧菜单"文章设置"
2. 点击"创建设置"
3. 配置文章参数：
   - 名称：如"专业权威型"
   - 字数：如2000
   - 风格：如"专业、权威、数据支持"
   - 要求：如"包含实际案例"

**创建转化目标（可选）**
1. 点击左侧菜单"转化目标"
2. 点击"创建目标"
3. 配置转化信息：
   - 名称：如"咨询热线"
   - 类型：选择类型（电话、邮箱、网址等）
   - 内容：如"400-123-4567"
   - 描述：如"24小时咨询热线"

### 4.5 批量生成文章（推荐）

1. 点击左侧菜单"文章生成任务"
2. 点击"创建任务"
3. 配置任务参数：
   - 选择蒸馏历史（关键词来源）
   - 选择图库（配图来源）
   - 选择知识库（内容参考）
   - 选择文章设置（模板）
   - 选择转化目标（可选）
   - 设置文章数量（1-100）
4. 点击"创建任务"
5. 系统后台自动生成文章
6. 查看任务状态和进度
7. 任务完成后查看生成的文章

### 4.6 单篇生成文章

1. 在话题管理页面，选择要使用的话题
2. 点击"生成文章"按钮
3. 选择要引用的知识库（可选）
4. 输入文章生成要求
5. 点击"生成文章"按钮
6. 等待AI生成（通常30-60秒）
7. 查看生成的文章
8. 可以复制或下载文章

### 4.7 管理文章

1. 点击左侧菜单"文章管理"
2. 查看所有生成的文章
3. 可以按任务筛选文章
4. 点击"查看"查看文章详情
5. 可以编辑文章标题和内容
6. 可以复制文章内容
7. 可以删除不需要的文章

## 五、常见问题

### 5.1 数据库连接失败

**问题**: 启动时提示数据库连接错误

**解决方案**:
1. 检查PostgreSQL是否已启动
2. 确认 `.env` 中的数据库连接字符串正确
3. 确认数据库已创建
4. 检查用户名和密码是否正确

### 5.2 API调用失败

**问题**: 蒸馏或生成文章时提示API错误

**解决方案**:
1. 检查API密钥是否正确配置
2. 确认API密钥有效且有余额
3. 检查网络连接
4. 查看后端日志了解详细错误

### 5.3 前端无法访问后端

**问题**: 前端页面无法加载数据

**解决方案**:
1. 确认后端服务已启动（端口3000）
2. 检查浏览器控制台的错误信息
3. 确认代理配置正确（vite.config.ts）
4. 尝试直接访问 http://localhost:3000/api/health

### 5.4 端口被占用

**问题**: 启动时提示端口已被使用

**解决方案**:
```bash
# 查找占用端口的进程
lsof -i :3000  # 后端端口
lsof -i :5173  # 前端端口

# 杀死进程
kill -9 <PID>

# 或修改 .env 中的端口配置
```

## 六、开发指南

### 6.1 项目结构
```
geo-optimization-system/
├── client/              # 前端应用
│   ├── src/
│   │   ├── components/  # 组件
│   │   ├── pages/       # 页面
│   │   ├── App.tsx      # 主应用
│   │   └── main.tsx     # 入口文件
│   └── package.json
├── server/              # 后端应用
│   ├── src/
│   │   ├── routes/      # 路由
│   │   ├── services/    # 服务
│   │   ├── db/          # 数据库
│   │   └── index.ts     # 入口文件
│   └── package.json
├── docs/                # 文档
├── .env                 # 环境变量
└── package.json         # 根配置
```

### 6.2 开发命令

```bash
# 启动开发服务器（前端+后端）
npm run dev

# 仅启动前端
npm run client:dev

# 仅启动后端
npm run server:dev

# 构建生产版本
npm run build

# 数据库迁移
cd server && npm run db:migrate
```

### 6.3 添加新功能

#### 添加新的API路由
1. 在 `server/src/routes/` 创建新路由文件
2. 在 `server/src/routes/index.ts` 中注册路由
3. 实现路由处理逻辑

#### 添加新页面
1. 在 `client/src/pages/` 创建新页面组件
2. 在 `client/src/App.tsx` 中添加路由
3. 在侧边栏添加菜单项

#### 修改数据库结构
1. 修改 `server/src/db/schema.sql`
2. 运行数据库迁移
3. 更新相关的API和服务

## 七、生产部署

### 7.1 构建应用

```bash
# 构建前端
cd client
npm run build

# 构建后端
cd ../server
npm run build
```

### 7.2 部署前端

将 `client/dist` 目录部署到静态服务器：
- Nginx
- Apache
- Vercel
- Netlify

### 7.3 部署后端

```bash
# 设置环境变量
export NODE_ENV=production
export DATABASE_URL=<生产数据库URL>

# 启动服务
cd server
npm start
```

推荐使用进程管理器：
- PM2
- Forever
- systemd

### 7.4 数据库

1. 创建生产数据库
2. 运行数据库迁移
3. 配置数据库备份

### 7.5 环境变量

生产环境需要配置：
```env
NODE_ENV=production
DATABASE_URL=<生产数据库URL>
DEEPSEEK_API_KEY=<生产API密钥>
GEMINI_API_KEY=<生产API密钥>
PORT=3000
```

## 八、性能优化建议

### 8.1 前端优化
- 启用代码分割
- 使用CDN加速
- 启用Gzip压缩
- 图片懒加载

### 8.2 后端优化
- 添加Redis缓存
- 使用连接池
- API请求限流
- 日志管理

### 8.3 数据库优化
- 添加适当索引
- 定期清理旧数据
- 配置数据库连接池
- 定期备份

## 九、安全建议

### 9.1 API密钥安全
- 不要将API密钥提交到版本控制
- 使用环境变量管理敏感信息
- 定期轮换API密钥

### 9.2 数据库安全
- 使用强密码
- 限制数据库访问IP
- 定期备份数据
- 加密敏感数据

### 9.3 应用安全
- 启用HTTPS
- 配置CORS
- 输入验证
- SQL注入防护
- XSS防护

## 十、获取帮助

### 10.1 文档
- [系统设计文档](./系统设计文档.md)
- [UI设计说明](./UI设计说明.md)

### 10.2 常用资源
- [DeepSeek文档](https://platform.deepseek.com/docs)
- [Gemini文档](https://ai.google.dev/docs)
- [React文档](https://react.dev)
- [Ant Design文档](https://ant.design)
- [PostgreSQL文档](https://www.postgresql.org/docs)

### 10.3 社区支持
- GitHub Issues
- 技术论坛
- 开发者社区

## 十一、下一步

完成基础配置后，建议：

1. **熟悉系统**: 尝试蒸馏几个不同的关键词
2. **优化提示词**: 根据需求调整AI提示词
3. **定制UI**: 根据品牌调整颜色和样式
4. **扩展功能**: 添加用户系统、批量处理等
5. **性能监控**: 添加日志和监控系统

祝您使用愉快！🚀
