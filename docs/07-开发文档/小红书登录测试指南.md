# 小红书登录测试指南

## 快速测试

### 方法1：使用测试脚本（推荐）

```bash
node test-xiaohongshu-selectors.js
```

**步骤**：
1. 脚本会自动打开浏览器
2. 手动登录小红书（扫码或密码）
3. 登录成功后按回车键
4. 查看测试结果

### 方法2：在Windows登录管理器中测试

```bash
# 1. 启动Windows登录管理器
./启动Windows管理器.command

# 2. 在界面中：
#    - 点击"平台管理"
#    - 选择"小红书"
#    - 点击"登录"
#    - 完成登录后检查账号列表
```

## 问题诊断

### 如果用户名仍然无法保存

1. **查看调试HTML**
   ```bash
   # 测试脚本会保存页面HTML到这里
   open debug/xiaohongshu_*.html
   ```

2. **手动查找用户名元素**
   - 在HTML中搜索你的用户名
   - 查看包含用户名的元素的class名称
   - 记录下来

3. **更新选择器配置**
   - 打开 `server/src/services/AccountService.ts`
   - 找到 `'xiaohongshu'` 的选择器配置
   - 添加你找到的class名称

## 当前配置

### 用户名选择器（13个）

```typescript
'xiaohongshu': [
  '.user-info .name',           // 用户信息区域的名称
  '.header-user-name',          // 头部用户名
  '.nickname',                  // 昵称
  '.username',                  // 用户名
  '.user-name',                 // 用户名
  '.author-name',               // 作者名
  '.account-name',              // 账号名
  '.profile-name',              // 个人资料名称
  '[class*="nickname"]',        // 包含nickname的class
  '[class*="username"]',        // 包含username的class
  '[class*="user-name"]',       // 包含user-name的class
  '[class*="author"]',          // 包含author的class
  '[class*="account"]'          // 包含account的class
]
```

### 导航配置

登录后自动导航到：`https://creator.xiaohongshu.com/creator/home`

等待时间：3秒

## 常见问题

### Q1: 测试脚本无法启动？

**A**: 确保已安装依赖
```bash
npm install
```

### Q2: 浏览器打开后无法登录？

**A**: 
- 检查网络连接
- 尝试手动访问 https://creator.xiaohongshu.com/login
- 确认小红书服务正常

### Q3: 登录成功但没有提取到用户名？

**A**: 
1. 运行测试脚本查看详细日志
2. 检查 `debug/` 目录下的HTML文件
3. 手动查找用户名元素的class
4. 更新选择器配置

### Q4: 如何查看系统日志？

**A**: 
```bash
# 查看服务器日志
tail -f server/logs/*.log

# 或在Windows登录管理器中查看控制台输出
```

## 技术支持

如果问题仍然存在：

1. **收集信息**
   - 运行测试脚本的完整输出
   - `debug/` 目录下的HTML文件
   - 截图显示登录成功的页面

2. **提供反馈**
   - 描述具体的问题现象
   - 提供收集的信息
   - 说明测试环境（操作系统、浏览器版本等）

## 相关文档

- `✅小红书用户名保存问题修复完成.md` - 详细的修复说明
- `test-xiaohongshu-selectors.js` - 测试脚本源码
- `server/src/services/AccountService.ts` - 用户名提取逻辑
