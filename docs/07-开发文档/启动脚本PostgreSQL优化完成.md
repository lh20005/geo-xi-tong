# å¯åŠ¨è„šæœ¬ PostgreSQL ä¼˜åŒ–å®Œæˆ

**æ—¥æœŸ**: 2026-01-16  
**æ–‡ä»¶**: `å¯åŠ¨Windowsç®¡ç†å™¨(è¿žæŽ¥æœåŠ¡å™¨).command`  
**çŠ¶æ€**: âœ… å®Œæˆ

---

## ä¼˜åŒ–æ¦‚è¿°

é’ˆå¯¹ Windows ç«¯æ•°æ®åº“ä»Ž SQLite è¿ç§»åˆ° PostgreSQLï¼Œå¯¹å¯åŠ¨è„šæœ¬è¿›è¡Œäº†å…¨é¢ä¼˜åŒ–ï¼Œæ·»åŠ äº† PostgreSQL æ£€æŸ¥å’Œé…ç½®ã€‚

---

## ä¼˜åŒ–å†…å®¹

### 1. æž¶æž„è¯´æ˜Žæ›´æ–° âœ…

**ä¿®æ”¹å‰**:
```bash
# æž¶æž„è¯´æ˜Žï¼ˆæ”¹é€ åŽï¼‰ï¼š
# - æœ¬åœ°æ‰§è¡Œï¼šå‘å¸ƒä»»åŠ¡ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€æ–‡ç« /çŸ¥è¯†åº“/å›¾åº“/è´¦å·å­˜å‚¨
# - æœåŠ¡å™¨æ‰§è¡Œï¼šç”¨æˆ·è®¤è¯ã€é…é¢éªŒè¯ã€AIç”Ÿæˆã€è®¢é˜…ç®¡ç†ã€æ•°æ®åŒæ­¥
```

**ä¿®æ”¹åŽ**:
```bash
# æž¶æž„è¯´æ˜Žï¼ˆPostgreSQL è¿ç§»åŽï¼‰ï¼š
# - æœ¬åœ°æ‰§è¡Œï¼šå‘å¸ƒä»»åŠ¡ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€æ–‡ç« /çŸ¥è¯†åº“/å›¾åº“/è´¦å·å­˜å‚¨ï¼ˆPostgreSQLï¼‰
# - æœåŠ¡å™¨æ‰§è¡Œï¼šç”¨æˆ·è®¤è¯ã€é…é¢éªŒè¯ã€AIç”Ÿæˆã€è®¢é˜…ç®¡ç†ã€æ•°æ®åŒæ­¥
# - æ•°æ®åº“ï¼šWindows ç«¯ä½¿ç”¨æœ¬åœ° PostgreSQL (geo_windows)ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ PostgreSQL (geo_system)
```

---

### 2. ç³»ç»Ÿæ£€æŸ¥å¢žå¼º âœ…

**æ–°å¢ž PostgreSQL æ£€æŸ¥**:

```bash
# 1. ç³»ç»Ÿæ£€æŸ¥
echo "ðŸ” [1/4] ç³»ç»ŸçŽ¯å¢ƒæ£€æŸ¥..."

# æ£€æŸ¥ Node.js
if ! command -v node &> /dev/null; then
    echo "âŒ æœªæ‰¾åˆ° Node.jsï¼Œè¯·å…ˆå®‰è£…: https://nodejs.org/"
    read -p "æŒ‰å›žè½¦é”®é€€å‡º..." && exit 1
fi

# æ£€æŸ¥ PostgreSQL
if ! command -v psql &> /dev/null; then
    echo "âš ï¸  æœªæ‰¾åˆ° PostgreSQL å®¢æˆ·ç«¯"
    echo "   è¯·å®‰è£… PostgreSQL: https://www.postgresql.org/download/"
    echo "   æˆ–ä½¿ç”¨ Homebrew: brew install postgresql"
    read -p "æŒ‰å›žè½¦é”®ç»§ç»­ï¼ˆå¦‚æžœå·²å®‰è£…ä½†æœªåœ¨ PATH ä¸­ï¼‰..." 
fi

# æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
echo "   âœ… Node.js: $(node -v)"
echo "   âœ… npm: $(npm -v)"
if command -v psql &> /dev/null; then
    echo "   âœ… PostgreSQL: $(psql --version | head -n 1)"
fi
```

**ä¼˜åŒ–ç‚¹**:
- æ·»åŠ  PostgreSQL å®¢æˆ·ç«¯æ£€æŸ¥
- æä¾›å®‰è£…æç¤ºï¼ˆå®˜ç½‘ + Homebrewï¼‰
- æ˜¾ç¤º PostgreSQL ç‰ˆæœ¬ä¿¡æ¯
- å…è®¸ç»§ç»­ï¼ˆå³ä½¿ psql ä¸åœ¨ PATH ä¸­ï¼‰

---

### 3. æ•°æ®åº“è¿žæŽ¥æ£€æŸ¥ âœ… æ–°å¢ž

**æ–°å¢žæ­¥éª¤ 2**:

```bash
# 2. æ£€æŸ¥ PostgreSQL æ•°æ®åº“
echo "ðŸ—„ï¸  [2/4] æ£€æŸ¥ PostgreSQL æ•°æ®åº“..."
if command -v psql &> /dev/null; then
    if psql -d geo_windows -c "SELECT 1;" &> /dev/null; then
        echo "   âœ… æ•°æ®åº“ geo_windows è¿žæŽ¥æˆåŠŸ"
        TABLE_COUNT=$(psql -d geo_windows -t -c "SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public';")
        echo "   ðŸ“Š æ•°æ®åº“è¡¨æ•°é‡: $TABLE_COUNT"
    else
        echo "   âš ï¸  æ•°æ®åº“ geo_windows ä¸å­˜åœ¨æˆ–æ— æ³•è¿žæŽ¥"
        echo "   ðŸ’¡ æç¤º: è¿è¡Œ 'createdb geo_windows' åˆ›å»ºæ•°æ®åº“"
        echo "   ðŸ’¡ æˆ–è¿è¡Œåˆå§‹åŒ–è„šæœ¬: cd windows-login-manager && npm run db:init"
        read -p "   æŒ‰å›žè½¦é”®ç»§ç»­..." 
    fi
else
    echo "   âš ï¸  è·³è¿‡æ•°æ®åº“æ£€æŸ¥ï¼ˆPostgreSQL æœªå®‰è£…ï¼‰"
fi
```

**åŠŸèƒ½**:
- å°è¯•è¿žæŽ¥ `geo_windows` æ•°æ®åº“
- æ˜¾ç¤ºæ•°æ®åº“è¡¨æ•°é‡
- æä¾›åˆ›å»ºæ•°æ®åº“çš„å‘½ä»¤æç¤º
- æä¾›åˆå§‹åŒ–è„šæœ¬æç¤º
- å…è®¸ç»§ç»­ï¼ˆå³ä½¿æ•°æ®åº“ä¸å­˜åœ¨ï¼‰

---

### 4. çŽ¯å¢ƒå˜é‡é…ç½®æ›´æ–° âœ…

**ä¿®æ”¹å‰**:
```bash
cat > .env << 'EOF'
# åŽç«¯APIåŸºç¡€åœ°å€ï¼ˆä¸åŒ…å« /apiï¼‰- è¿žæŽ¥åˆ°ç”Ÿäº§æœåŠ¡å™¨
VITE_API_BASE_URL=https://jzgeo.cc
# ...
EOF
```

**ä¿®æ”¹åŽ**:
```bash
cat > .env << 'EOF'
# PostgreSQL æ•°æ®åº“é…ç½®ï¼ˆæœ¬åœ°ï¼‰
DB_HOST=localhost
DB_PORT=5432
DB_NAME=geo_windows
DB_USER=lzc
DB_PASSWORD=

# åŽç«¯APIåŸºç¡€åœ°å€ï¼ˆä¸åŒ…å« /apiï¼‰- è¿žæŽ¥åˆ°ç”Ÿäº§æœåŠ¡å™¨
VITE_API_BASE_URL=https://jzgeo.cc
# ...
EOF
```

**ä¼˜åŒ–ç‚¹**:
- æ·»åŠ  PostgreSQL æ•°æ®åº“é…ç½®
- é…ç½®æœ¬åœ°æ•°æ®åº“è¿žæŽ¥ä¿¡æ¯
- ä¿æŒ API é…ç½®ä¸å˜

---

### 5. å¯åŠ¨ä¿¡æ¯ä¼˜åŒ– âœ…

**ä¿®æ”¹å‰**:
```bash
echo "ðŸ“¦ æœ¬åœ°æ‰§è¡Œï¼ˆæ”¹é€ åŽï¼‰:"
echo "   â€¢ å‘å¸ƒä»»åŠ¡:   æœ¬åœ° Playwright æ‰§è¡Œ"
echo "   â€¢ æ•°æ®å­˜å‚¨:   æœ¬åœ° SQLite æ•°æ®åº“"
echo "   â€¢ æµè§ˆå™¨:     æœ¬åœ° Chrome/Chromium"
```

**ä¿®æ”¹åŽ**:
```bash
echo "ðŸ—„ï¸  æ•°æ®åº“é…ç½®:"
echo "   â€¢ ç±»åž‹:       PostgreSQL"
echo "   â€¢ æ•°æ®åº“å:   geo_windows"
echo "   â€¢ ç”¨æˆ·:       lzc"
echo "   â€¢ ä¸»æœº:       localhost:5432"
echo ""
echo "ðŸ“¦ æœ¬åœ°æ‰§è¡Œï¼ˆPostgreSQL è¿ç§»åŽï¼‰:"
echo "   â€¢ å‘å¸ƒä»»åŠ¡:   æœ¬åœ° Playwright æ‰§è¡Œ"
echo "   â€¢ æ•°æ®å­˜å‚¨:   æœ¬åœ° PostgreSQL æ•°æ®åº“"
echo "   â€¢ æµè§ˆå™¨:     æœ¬åœ° Chrome/Chromium"
```

**ä¼˜åŒ–ç‚¹**:
- æ·»åŠ æ•°æ®åº“é…ç½®ä¿¡æ¯å±•ç¤º
- æ›´æ–°"SQLite"ä¸º"PostgreSQL"
- æ·»åŠ "é¦–æ¬¡å¯åŠ¨éœ€è¦åˆå§‹åŒ–æ•°æ®åº“"æç¤º

---

## å®Œæ•´çš„å¯åŠ¨æµç¨‹

### æ­¥éª¤ 1: ç³»ç»ŸçŽ¯å¢ƒæ£€æŸ¥
- âœ… æ£€æŸ¥ Node.js
- âœ… æ£€æŸ¥ npm
- âœ… æ£€æŸ¥ PostgreSQL å®¢æˆ·ç«¯
- âœ… æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

### æ­¥éª¤ 2: PostgreSQL æ•°æ®åº“æ£€æŸ¥
- âœ… å°è¯•è¿žæŽ¥ `geo_windows` æ•°æ®åº“
- âœ… æ˜¾ç¤ºæ•°æ®åº“è¡¨æ•°é‡
- âœ… æä¾›åˆ›å»ºæ•°æ®åº“çš„æç¤º
- âœ… æä¾›åˆå§‹åŒ–è„šæœ¬æç¤º

### æ­¥éª¤ 3: æ£€æŸ¥ä¾èµ–åŒ…
- âœ… æ£€æŸ¥ `node_modules` æ˜¯å¦å­˜åœ¨
- âœ… è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼ˆå¦‚æžœä¸å­˜åœ¨ï¼‰

### æ­¥éª¤ 4: é…ç½®æœåŠ¡å™¨è¿žæŽ¥
- âœ… å¤‡ä»½åŽŸæœ‰ `.env` æ–‡ä»¶
- âœ… å†™å…¥ PostgreSQL é…ç½®
- âœ… å†™å…¥æœåŠ¡å™¨è¿žæŽ¥é…ç½®

### æ­¥éª¤ 5: å¯åŠ¨åº”ç”¨
- âœ… æ˜¾ç¤ºè¿žæŽ¥ä¿¡æ¯
- âœ… æ˜¾ç¤ºæ•°æ®åº“é…ç½®
- âœ… æ˜¾ç¤ºæœ¬åœ°æ‰§è¡ŒåŠŸèƒ½
- âœ… æ˜¾ç¤ºæœåŠ¡å™¨åŠŸèƒ½
- âœ… æ˜¾ç¤ºæ“ä½œæç¤º

---

## ç”¨æˆ·ä½“éªŒæ”¹è¿›

### 1. æ›´æ¸…æ™°çš„é”™è¯¯æç¤º

**PostgreSQL æœªå®‰è£…**:
```
âš ï¸  æœªæ‰¾åˆ° PostgreSQL å®¢æˆ·ç«¯
   è¯·å®‰è£… PostgreSQL: https://www.postgresql.org/download/
   æˆ–ä½¿ç”¨ Homebrew: brew install postgresql
```

**æ•°æ®åº“ä¸å­˜åœ¨**:
```
âš ï¸  æ•°æ®åº“ geo_windows ä¸å­˜åœ¨æˆ–æ— æ³•è¿žæŽ¥
   ðŸ’¡ æç¤º: è¿è¡Œ 'createdb geo_windows' åˆ›å»ºæ•°æ®åº“
   ðŸ’¡ æˆ–è¿è¡Œåˆå§‹åŒ–è„šæœ¬: cd windows-login-manager && npm run db:init
```

### 2. æ›´è¯¦ç»†çš„é…ç½®ä¿¡æ¯

**æ•°æ®åº“é…ç½®å±•ç¤º**:
```
ðŸ—„ï¸  æ•°æ®åº“é…ç½®:
   â€¢ ç±»åž‹:       PostgreSQL
   â€¢ æ•°æ®åº“å:   geo_windows
   â€¢ ç”¨æˆ·:       lzc
   â€¢ ä¸»æœº:       localhost:5432
```

### 3. æ›´å‹å¥½çš„æ“ä½œæç¤º

**æ–°å¢žæç¤º**:
```
âš ï¸  æ“ä½œæç¤º:
   â€¢ ä¿æŒæ­¤çª—å£æ‰“å¼€ä»¥æŸ¥çœ‹æ—¥å¿—
   â€¢ æŒ‰ Ctrl+C åœæ­¢æœåŠ¡
   â€¢ å…³é—­çª—å£å°†åœæ­¢æœåŠ¡
   â€¢ é¦–æ¬¡å¯åŠ¨éœ€è¦åˆå§‹åŒ–æ•°æ®åº“  â¬…ï¸ æ–°å¢ž
```

---

## å¸¸è§é—®é¢˜å¤„ç†

### é—®é¢˜ 1: PostgreSQL æœªå®‰è£…

**æç¤º**:
```
âš ï¸  æœªæ‰¾åˆ° PostgreSQL å®¢æˆ·ç«¯
   è¯·å®‰è£… PostgreSQL: https://www.postgresql.org/download/
   æˆ–ä½¿ç”¨ Homebrew: brew install postgresql
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# macOS (Homebrew)
brew install postgresql

# å¯åŠ¨ PostgreSQL æœåŠ¡
brew services start postgresql
```

### é—®é¢˜ 2: æ•°æ®åº“ä¸å­˜åœ¨

**æç¤º**:
```
âš ï¸  æ•°æ®åº“ geo_windows ä¸å­˜åœ¨æˆ–æ— æ³•è¿žæŽ¥
   ðŸ’¡ æç¤º: è¿è¡Œ 'createdb geo_windows' åˆ›å»ºæ•°æ®åº“
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ›å»ºæ•°æ®åº“
createdb geo_windows

# æˆ–è¿è¡Œåˆå§‹åŒ–è„šæœ¬
cd windows-login-manager
npm run db:init
```

### é—®é¢˜ 3: è¿žæŽ¥å¤±è´¥

**å¯èƒ½åŽŸå› **:
- PostgreSQL æœåŠ¡æœªå¯åŠ¨
- ç”¨æˆ·æƒé™ä¸è¶³
- ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ PostgreSQL æœåŠ¡çŠ¶æ€
brew services list | grep postgresql

# å¯åŠ¨ PostgreSQL æœåŠ¡
brew services start postgresql

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5432
```

---

## æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯ 1: æ­£å¸¸å¯åŠ¨

**å‰ææ¡ä»¶**:
- âœ… PostgreSQL å·²å®‰è£…
- âœ… æ•°æ®åº“ `geo_windows` å·²åˆ›å»º
- âœ… ä¾èµ–åŒ…å·²å®‰è£…

**é¢„æœŸç»“æžœ**:
```
ðŸ” [1/4] ç³»ç»ŸçŽ¯å¢ƒæ£€æŸ¥...
   âœ… Node.js: v18.x.x
   âœ… npm: 9.x.x
   âœ… PostgreSQL: psql (PostgreSQL) 14.x

ðŸ—„ï¸  [2/4] æ£€æŸ¥ PostgreSQL æ•°æ®åº“...
   âœ… æ•°æ®åº“ geo_windows è¿žæŽ¥æˆåŠŸ
   ðŸ“Š æ•°æ®åº“è¡¨æ•°é‡: 17

ðŸ“¦ [3/4] æ£€æŸ¥ä¾èµ–åŒ…...
   âœ… ä¾èµ–æ£€æŸ¥å®Œæˆ

âš™ï¸  [4/4] é…ç½®æœåŠ¡å™¨è¿žæŽ¥...
   âœ… å·²é…ç½®è¿žæŽ¥åˆ°: https://jzgeo.cc
   âœ… å·²é…ç½®æœ¬åœ°æ•°æ®åº“: geo_windows

ðŸš€ å¯åŠ¨ Windows ç™»å½•ç®¡ç†å™¨...
```

### æµ‹è¯•åœºæ™¯ 2: æ•°æ®åº“ä¸å­˜åœ¨

**å‰ææ¡ä»¶**:
- âœ… PostgreSQL å·²å®‰è£…
- âŒ æ•°æ®åº“ `geo_windows` ä¸å­˜åœ¨

**é¢„æœŸç»“æžœ**:
```
ðŸ—„ï¸  [2/4] æ£€æŸ¥ PostgreSQL æ•°æ®åº“...
   âš ï¸  æ•°æ®åº“ geo_windows ä¸å­˜åœ¨æˆ–æ— æ³•è¿žæŽ¥
   ðŸ’¡ æç¤º: è¿è¡Œ 'createdb geo_windows' åˆ›å»ºæ•°æ®åº“
   ðŸ’¡ æˆ–è¿è¡Œåˆå§‹åŒ–è„šæœ¬: cd windows-login-manager && npm run db:init
   æŒ‰å›žè½¦é”®ç»§ç»­...
```

### æµ‹è¯•åœºæ™¯ 3: PostgreSQL æœªå®‰è£…

**å‰ææ¡ä»¶**:
- âŒ PostgreSQL æœªå®‰è£…

**é¢„æœŸç»“æžœ**:
```
ðŸ” [1/4] ç³»ç»ŸçŽ¯å¢ƒæ£€æŸ¥...
   âœ… Node.js: v18.x.x
   âœ… npm: 9.x.x
âš ï¸  æœªæ‰¾åˆ° PostgreSQL å®¢æˆ·ç«¯
   è¯·å®‰è£… PostgreSQL: https://www.postgresql.org/download/
   æˆ–ä½¿ç”¨ Homebrew: brew install postgresql
   æŒ‰å›žè½¦é”®ç»§ç»­ï¼ˆå¦‚æžœå·²å®‰è£…ä½†æœªåœ¨ PATH ä¸­ï¼‰...

ðŸ—„ï¸  [2/4] æ£€æŸ¥ PostgreSQL æ•°æ®åº“...
   âš ï¸  è·³è¿‡æ•°æ®åº“æ£€æŸ¥ï¼ˆPostgreSQL æœªå®‰è£…ï¼‰
```

---

## å¯¹æ¯”æ€»ç»“

| é¡¹ç›® | ä¿®æ”¹å‰ | ä¿®æ”¹åŽ |
|------|--------|--------|
| æ£€æŸ¥æ­¥éª¤ | 3 æ­¥ | 4 æ­¥ |
| PostgreSQL æ£€æŸ¥ | âŒ æ—  | âœ… æœ‰ |
| æ•°æ®åº“è¿žæŽ¥æµ‹è¯• | âŒ æ—  | âœ… æœ‰ |
| æ•°æ®åº“é…ç½® | âŒ æ—  | âœ… æœ‰ |
| é”™è¯¯æç¤º | ç®€å• | è¯¦ç»† + è§£å†³æ–¹æ¡ˆ |
| é…ç½®ä¿¡æ¯å±•ç¤º | SQLite | PostgreSQL |
| æ“ä½œæç¤º | åŸºæœ¬ | è¯¦ç»† + åˆå§‹åŒ–æç¤º |

---

## ä¸‹ä¸€æ­¥

1. âœ… å¯åŠ¨è„šæœ¬ä¼˜åŒ–å®Œæˆ
2. â­ï¸ æµ‹è¯•å¯åŠ¨è„šæœ¬
3. â­ï¸ éªŒè¯æ•°æ®åº“è¿žæŽ¥
4. â­ï¸ è¿è¡Œ Electron åº”ç”¨
5. â­ï¸ éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

## æ€»ç»“

æˆåŠŸå°†å¯åŠ¨è„šæœ¬ä»Ž SQLite æ›´æ–°ä¸º PostgreSQLï¼Œæ·»åŠ äº†å®Œæ•´çš„æ•°æ®åº“æ£€æŸ¥å’Œé…ç½®æµç¨‹ã€‚ç”¨æˆ·çŽ°åœ¨å¯ä»¥ï¼š

- âœ… è‡ªåŠ¨æ£€æŸ¥ PostgreSQL æ˜¯å¦å®‰è£…
- âœ… è‡ªåŠ¨æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
- âœ… èŽ·å¾—æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œè§£å†³æ–¹æ¡ˆ
- âœ… æŸ¥çœ‹è¯¦ç»†çš„æ•°æ®åº“é…ç½®ä¿¡æ¯
- âœ… äº†è§£é¦–æ¬¡å¯åŠ¨éœ€è¦åˆå§‹åŒ–æ•°æ®åº“

å¯åŠ¨è„šæœ¬çŽ°åœ¨å®Œå…¨é€‚é… PostgreSQL è¿ç§»ï¼Œæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼ðŸŽ‰
