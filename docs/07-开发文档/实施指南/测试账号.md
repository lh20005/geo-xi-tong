# ğŸ§ª æµ‹è¯•è´¦å·åˆ—è¡¨

## å¯ç”¨çš„æµ‹è¯•è´¦å·

### è´¦å·1ï¼šuser1
- **ç”¨æˆ·åï¼š** `user1`
- **å¯†ç ï¼š** `User123456`
- **è§’è‰²ï¼š** æ™®é€šç”¨æˆ·
- **çŠ¶æ€ï¼š** âœ… å·²åˆ›å»º

### è´¦å·2ï¼šnewuser123
- **ç”¨æˆ·åï¼š** `newuser123`
- **å¯†ç ï¼š** `Test123456`
- **è§’è‰²ï¼š** æ™®é€šç”¨æˆ·
- **çŠ¶æ€ï¼š** âœ… å·²åˆ›å»º

### è´¦å·3ï¼štestuser
- **ç”¨æˆ·åï¼š** `testuser`
- **å¯†ç ï¼š** `Test123456`
- **è§’è‰²ï¼š** æ™®é€šç”¨æˆ·
- **çŠ¶æ€ï¼š** âœ… å·²å­˜åœ¨

---

## ğŸ§ª æµ‹è¯•æ•°æ®éš”ç¦»

### æ­¥éª¤1ï¼šç”¨æˆ·1ç™»å½•å¹¶åˆ›å»ºæ•°æ®

```bash
# ç™»å½•ç”¨æˆ·1
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"user1","password":"User123456"}'

# ä¿å­˜è¿”å›çš„token
TOKEN1="ä»ä¸Šé¢å“åº”ä¸­å¤åˆ¶token"

# åˆ›å»ºç›¸å†Œ
curl -X POST http://localhost:3000/api/gallery/albums \
  -H "Authorization: Bearer $TOKEN1" \
  -H "Content-Type: application/json" \
  -d '{"name":"ç”¨æˆ·1çš„ç›¸å†Œ"}'

# åˆ›å»ºçŸ¥è¯†åº“
curl -X POST http://localhost:3000/api/knowledge-bases \
  -H "Authorization: Bearer $TOKEN1" \
  -H "Content-Type: application/json" \
  -d '{"name":"ç”¨æˆ·1çš„çŸ¥è¯†åº“"}'
```

### æ­¥éª¤2ï¼šç”¨æˆ·2ç™»å½•å¹¶éªŒè¯æ•°æ®éš”ç¦»

```bash
# ç™»å½•ç”¨æˆ·2
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"newuser123","password":"Test123456"}'

# ä¿å­˜è¿”å›çš„token
TOKEN2="ä»ä¸Šé¢å“åº”ä¸­å¤åˆ¶token"

# æŸ¥è¯¢ç›¸å†Œï¼ˆåº”è¯¥çœ‹ä¸åˆ°ç”¨æˆ·1çš„ç›¸å†Œï¼‰
curl -X GET http://localhost:3000/api/gallery/albums \
  -H "Authorization: Bearer $TOKEN2"
# é¢„æœŸç»“æœï¼š{"albums":[]} - ç©ºæ•°ç»„

# æŸ¥è¯¢çŸ¥è¯†åº“ï¼ˆåº”è¯¥çœ‹ä¸åˆ°ç”¨æˆ·1çš„çŸ¥è¯†åº“ï¼‰
curl -X GET http://localhost:3000/api/knowledge-bases \
  -H "Authorization: Bearer $TOKEN2"
# é¢„æœŸç»“æœï¼š{"knowledgeBases":[]} - ç©ºæ•°ç»„
```

### æ­¥éª¤3ï¼šç”¨æˆ·2åˆ›å»ºè‡ªå·±çš„æ•°æ®

```bash
# åˆ›å»ºç›¸å†Œ
curl -X POST http://localhost:3000/api/gallery/albums \
  -H "Authorization: Bearer $TOKEN2" \
  -H "Content-Type: application/json" \
  -d '{"name":"ç”¨æˆ·2çš„ç›¸å†Œ"}'

# å†æ¬¡æŸ¥è¯¢ç›¸å†Œï¼ˆåº”è¯¥åªçœ‹åˆ°è‡ªå·±çš„ï¼‰
curl -X GET http://localhost:3000/api/gallery/albums \
  -H "Authorization: Bearer $TOKEN2"
# é¢„æœŸç»“æœï¼šåªæœ‰"ç”¨æˆ·2çš„ç›¸å†Œ"
```

### æ­¥éª¤4ï¼šéªŒè¯ç”¨æˆ·1çœ‹ä¸åˆ°ç”¨æˆ·2çš„æ•°æ®

```bash
# ç”¨æˆ·1æŸ¥è¯¢ç›¸å†Œ
curl -X GET http://localhost:3000/api/gallery/albums \
  -H "Authorization: Bearer $TOKEN1"
# é¢„æœŸç»“æœï¼šåªæœ‰"ç”¨æˆ·1çš„ç›¸å†Œ"ï¼Œçœ‹ä¸åˆ°"ç”¨æˆ·2çš„ç›¸å†Œ"
```

---

## ğŸ¯ å‰ç«¯æµ‹è¯•

### 1. ç”¨æˆ·1ç™»å½•
1. æ‰“å¼€ http://localhost:8080
2. ä½¿ç”¨è´¦å·ï¼š`user1` / `User123456`
3. ç™»å½•åç‚¹å‡»"è¿›å…¥ç³»ç»Ÿ"
4. åˆ›å»ºç›¸å†Œã€çŸ¥è¯†åº“ç­‰æ•°æ®

### 2. ç”¨æˆ·2ç™»å½•ï¼ˆæ–°çª—å£æˆ–æ— ç—•æ¨¡å¼ï¼‰
1. æ‰“å¼€æ–°çš„æ— ç—•çª—å£
2. è®¿é—® http://localhost:8080
3. ä½¿ç”¨è´¦å·ï¼š`newuser123` / `Test123456`
4. ç™»å½•åç‚¹å‡»"è¿›å…¥ç³»ç»Ÿ"
5. éªŒè¯çœ‹ä¸åˆ°ç”¨æˆ·1çš„æ•°æ®

### 3. éªŒè¯æ•°æ®éš”ç¦»
- âœ… ç”¨æˆ·1åªèƒ½çœ‹åˆ°è‡ªå·±çš„ç›¸å†Œ
- âœ… ç”¨æˆ·2åªèƒ½çœ‹åˆ°è‡ªå·±çš„ç›¸å†Œ
- âœ… ç”¨æˆ·1æ— æ³•è®¿é—®ç”¨æˆ·2çš„èµ„æº
- âœ… ç”¨æˆ·2æ— æ³•è®¿é—®ç”¨æˆ·1çš„èµ„æº

---

## ğŸ“Š é…é¢æµ‹è¯•

### æŸ¥è¯¢é…é¢
```bash
# ç”¨æˆ·1æŸ¥è¯¢é…é¢
curl -X GET http://localhost:3000/api/quota \
  -H "Authorization: Bearer $TOKEN1"

# é¢„æœŸç»“æœï¼š
{
  "success": true,
  "data": {
    "plan": "free",
    "quotas": {
      "albums": 5,
      "articles": 50,
      "knowledge_bases": 2
    },
    "usage": {
      "albums": 1,
      "articles": 0,
      "knowledge_bases": 1
    },
    "percentages": {
      "albums": 20,
      "articles": 0,
      "knowledge_bases": 50
    }
  }
}
```

---

## ğŸ”§ å¿«é€Ÿæµ‹è¯•è„šæœ¬

è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼š
```bash
./test-multi-tenancy-api.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. åˆ›å»ºä¸¤ä¸ªæµ‹è¯•ç”¨æˆ·
2. ç”¨æˆ·1åˆ›å»ºç›¸å†Œ
3. ç”¨æˆ·2åˆ›å»ºç›¸å†Œ
4. éªŒè¯æ•°æ®éš”ç¦»
5. æµ‹è¯•æ‰€æœ‰æƒéªŒè¯
6. æŸ¥è¯¢é…é¢ä¿¡æ¯

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç è¦æ±‚ï¼š**
   - è‡³å°‘8ä¸ªå­—ç¬¦
   - åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—

2. **é€Ÿç‡é™åˆ¶ï¼š**
   - æ³¨å†Œï¼šæ¯å°æ—¶3æ¬¡
   - ç™»å½•ï¼šæ¯15åˆ†é’Ÿ5æ¬¡

3. **ç°æœ‰æ•°æ®ï¼š**
   - æ‰€æœ‰ç°æœ‰æ•°æ®ï¼ˆç›¸å†Œã€æ–‡ç« ç­‰ï¼‰éƒ½å±äºç”¨æˆ·ID=1
   - å¦‚æœç”¨lzc2005ç™»å½•ï¼Œä¼šçœ‹åˆ°æ‰€æœ‰ç°æœ‰æ•°æ®

---

## ğŸ‰ æµ‹è¯•æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹ç»“æœï¼Œè¯´æ˜å¤šç§Ÿæˆ·åŠŸèƒ½æ­£å¸¸ï¼š

- âœ… ç”¨æˆ·1å’Œç”¨æˆ·2å¯ä»¥åˆ†åˆ«ç™»å½•
- âœ… ç”¨æˆ·1åˆ›å»ºçš„æ•°æ®ï¼Œç”¨æˆ·2çœ‹ä¸åˆ°
- âœ… ç”¨æˆ·2åˆ›å»ºçš„æ•°æ®ï¼Œç”¨æˆ·1çœ‹ä¸åˆ°
- âœ… é…é¢æŸ¥è¯¢æ˜¾ç¤ºå„è‡ªçš„ä½¿ç”¨æƒ…å†µ
- âœ… å°è¯•è®¿é—®å…¶ä»–ç”¨æˆ·èµ„æºè¿”å›"æ— æƒè®¿é—®"

---

**å¼€å§‹æµ‹è¯•å§ï¼** ğŸš€
