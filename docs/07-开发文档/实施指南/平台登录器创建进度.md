# å¹³å°ç™»å½•å™¨åˆ›å»ºè¿›åº¦

## å·²å®Œæˆçš„å¹³å° âœ…

1. **å¤´æ¡å·** (toutiao-login-manager.ts) - âœ… å·²å­˜åœ¨
2. **æŠ–éŸ³å·** (douyin-login-manager.ts) - âœ… å·²å­˜åœ¨
3. **å°çº¢ä¹¦** (xiaohongshu-login-manager.ts) - âœ… å·²åˆ›å»º
4. **å¾®ä¿¡å…¬ä¼—å·** (wechat-login-manager.ts) - âœ… å·²åˆ›å»º
5. **ç™¾å®¶å·** (baijiahao-login-manager.ts) - âœ… å·²åˆ›å»º
6. **ç®€ä¹¦** (jianshu-login-manager.ts) - âœ… å·²åˆ›å»º
7. **çŸ¥ä¹** (zhihu-login-manager.ts) - âœ… å·²åˆ›å»º
8. **ä¼é¹…å·** (qie-login-manager.ts) - âœ… å·²åˆ›å»º
9. **æœç‹å·** (souhu-login-manager.ts) - âœ… å·²åˆ›å»º
10. **ç½‘æ˜“å·** (wangyi-login-manager.ts) - âœ… å·²åˆ›å»º
11. **CSDN** (csdn-login-manager.ts) - âœ… å·²åˆ›å»º
12. **å“”å“©å“”å“©** (bilibili-login-manager.ts) - âœ… å·²åˆ›å»º

## å·²å®Œæˆçš„é…ç½®æ›´æ–° âœ…

1. **handler.ts** - âœ… å·²æ›´æ–°
   - å¯¼å…¥æ‰€æœ‰æ–°çš„ç™»å½•ç®¡ç†å™¨
   - åœ¨ `login-platform` å¤„ç†å™¨ä¸­æ³¨å†Œæ‰€æœ‰å¹³å°
   - åœ¨ `cancel-login` å¤„ç†å™¨ä¸­æ·»åŠ æ‰€æœ‰å¹³å°çš„å–æ¶ˆé€»è¾‘

## æ‰€æœ‰å¹³å°ç™»å½•å™¨åˆ›å»ºå®Œæˆï¼ğŸ‰

æ‰€æœ‰12ä¸ªå¹³å°çš„ä¸“ç”¨ç™»å½•ç®¡ç†å™¨å·²ç»åˆ›å»ºå®Œæˆï¼Œå¹¶ä¸”å·²ç»åœ¨ handler.ts ä¸­æ³¨å†Œã€‚

### å¹³å°é…ç½®æ±‡æ€»

#### æ£€æŸ¥é—´éš”åˆ†ç±»
- **500ms**: ç™¾å®¶å·
- **1000ms**: å¤´æ¡å·ã€æŠ–éŸ³å·ã€ç®€ä¹¦ã€ä¼é¹…å·ã€æœç‹å·ã€ç½‘æ˜“å·
- **2000ms**: å°çº¢ä¹¦ã€å¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€CSDNã€å“”å“©å“”å“©

#### ç‰¹æ®Šå¤„ç†åˆ†ç±»
1. **éœ€è¦APIè°ƒç”¨**: çŸ¥ä¹ã€CSDNã€å“”å“©å“”å“©
2. **éœ€è¦é¼ æ ‡äº‹ä»¶**: ç™¾å®¶å·ã€ç®€ä¹¦
3. **éœ€è¦ç‰¹æ®Šè§£æ**: ç™¾å®¶å·(split)ã€ç½‘æ˜“å·(ç¬¬3ä¸ªå…ƒç´ )ã€ä¼é¹…å·(ç¬¬4ä¸ªå…ƒç´ )

### æˆåŠŸURLæ¨¡å¼
```typescript
const successUrlPatterns = {
  'toutiao': ['mp.toutiao.com/profile_v4', 'mp.toutiao.com/creator'],
  'douyin': 'creator.douyin.com',
  'xiaohongshu': 'creator.xiaohongshu.com/new/home',
  'wechat': 'mp.weixin.qq.com/cgi-bin',
  'baijiahao': 'baijiahao.baidu.com/builder/rc/home',
  'jianshu': 'www.jianshu.com/',
  'zhihu': 'www.zhihu.com',
  'qie': 'om.qq.com/main',
  'souhu': 'mp.sohu.com/mpfe/v3/main',
  'wangyi': 'mp.163.com/',
  'csdn': 'www.csdn.net/',
  'bilibili': 'member.bilibili.com/platform'
};
```

## ä¸‹ä¸€æ­¥æ“ä½œ

1. âœ… åˆ›å»ºæ‰€æœ‰å¹³å°çš„ç™»å½•å™¨ - **å·²å®Œæˆ**
2. âœ… æ›´æ–° `handler.ts` æ³¨å†Œæ‰€æœ‰æ–°çš„ç™»å½•å™¨ - **å·²å®Œæˆ**
3. â­ï¸ åˆ é™¤é€šç”¨ç™»å½•å™¨ `login-manager.ts`ï¼ˆå¯é€‰ï¼Œä¿ç•™ä½œä¸ºåå¤‡ï¼‰
4. â­ï¸ æµ‹è¯•æ¯ä¸ªå¹³å°çš„ç™»å½•åŠŸèƒ½
5. â­ï¸ ç¡®ä¿è´¦å·ç®¡ç†åˆ—è¡¨æ­£ç¡®æ˜¾ç¤ºçœŸå®ç”¨æˆ·å

## å…³é”®ç‰¹æ€§

- âœ… æ‰€æœ‰é€‰æ‹©å™¨éƒ½ä»GEOåº”ç”¨çš„å®é™…ä»£ç ä¸­æå–
- âœ… ä¿æŒä¸GEOåº”ç”¨ç›¸åŒçš„æ£€æŸ¥é—´éš”
- âœ… ç‰¹æ®Šå¤„ç†é€»è¾‘å®Œå…¨æŒ‰ç…§GEOåº”ç”¨çš„æ–¹å¼å®ç°
- âœ… çœŸå®ç”¨æˆ·åæå–å¹¶ä¿å­˜åˆ° `real_username` å­—æ®µ
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œèµ„æºæ¸…ç†
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•
- âœ… æ”¯æŒå–æ¶ˆç™»å½•æ“ä½œ

## æ–‡ä»¶æ¸…å•

### ç™»å½•ç®¡ç†å™¨æ–‡ä»¶
- `windows-login-manager/electron/login/toutiao-login-manager.ts`
- `windows-login-manager/electron/login/douyin-login-manager.ts`
- `windows-login-manager/electron/login/xiaohongshu-login-manager.ts`
- `windows-login-manager/electron/login/wechat-login-manager.ts`
- `windows-login-manager/electron/login/baijiahao-login-manager.ts`
- `windows-login-manager/electron/login/jianshu-login-manager.ts`
- `windows-login-manager/electron/login/zhihu-login-manager.ts`
- `windows-login-manager/electron/login/qie-login-manager.ts`
- `windows-login-manager/electron/login/souhu-login-manager.ts`
- `windows-login-manager/electron/login/wangyi-login-manager.ts`
- `windows-login-manager/electron/login/csdn-login-manager.ts`
- `windows-login-manager/electron/login/bilibili-login-manager.ts`

### é…ç½®æ–‡ä»¶
- `windows-login-manager/electron/ipc/handler.ts` - âœ… å·²æ›´æ–°

### é€šç”¨æ–‡ä»¶ï¼ˆä¿ç•™ï¼‰
- `windows-login-manager/electron/login/login-manager.ts` - é€šç”¨ç™»å½•ç®¡ç†å™¨ï¼ˆä½œä¸ºåå¤‡ï¼‰
- `windows-login-manager/electron/login/webview-manager.ts` - WebViewç®¡ç†å™¨
- `windows-login-manager/electron/login/cookie-manager.ts` - Cookieç®¡ç†å™¨

## æµ‹è¯•å»ºè®®

1. **é€ä¸ªå¹³å°æµ‹è¯•**ï¼šæŒ‰ç…§å¹³å°é¡ºåºé€ä¸ªæµ‹è¯•ç™»å½•åŠŸèƒ½
2. **éªŒè¯ç”¨æˆ·åæå–**ï¼šç¡®ä¿æ¯ä¸ªå¹³å°éƒ½èƒ½æ­£ç¡®æå–çœŸå®ç”¨æˆ·å
3. **æ£€æŸ¥è´¦å·åˆ—è¡¨**ï¼šç™»å½•ååœ¨"è´¦å·ç®¡ç†"åˆ—è¡¨ä¸­æŸ¥çœ‹æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
4. **æµ‹è¯•å–æ¶ˆåŠŸèƒ½**ï¼šæµ‹è¯•ç™»å½•è¿‡ç¨‹ä¸­çš„å–æ¶ˆæ“ä½œ
5. **éªŒè¯Cookieä¿å­˜**ï¼šç¡®ä¿ç™»å½•å‡­è¯æ­£ç¡®ä¿å­˜å’Œæ¢å¤

## æ³¨æ„äº‹é¡¹

- æ‰€æœ‰ç™»å½•ç®¡ç†å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„æ¶æ„å’Œé”™è¯¯å¤„ç†æ¨¡å¼
- æ¯ä¸ªå¹³å°éƒ½æœ‰ç‹¬ç«‹çš„ partitionï¼Œç¡®ä¿ Cookie éš”ç¦»
- æ‰€æœ‰ç®¡ç†å™¨éƒ½æ”¯æŒå–æ¶ˆæ“ä½œå’Œèµ„æºæ¸…ç†
- æ—¥å¿—è®°å½•è¯¦ç»†ï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜æ’æŸ¥
- çœŸå®ç”¨æˆ·åä¿å­˜åˆ° `real_username` å­—æ®µï¼Œç”¨äºè´¦å·ç®¡ç†åˆ—è¡¨æ˜¾ç¤º
