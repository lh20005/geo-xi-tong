# æœ€ç®€å•çš„å®æ–½æ–¹æ¡ˆ - æ— éœ€åˆ›å»ºå¤šä¸ªæ–‡ä»¶

## âŒ è¯¯è§£æ¾„æ¸…

### ä½ ä¸éœ€è¦ï¼š
- âŒ ä¸ºæ¯ä¸ªå¹³å°åˆ›å»ºå•ç‹¬çš„æ–‡ä»¶ï¼ˆåƒGEOåº”ç”¨é‚£æ ·çš„ tt.js, xhs.js...ï¼‰
- âŒ å¤åˆ¶GEOåº”ç”¨çš„æ•´ä¸ªè„šæœ¬
- âŒ é‡æ–°å®ç°ç™»å½•é€»è¾‘

### ä½ åªéœ€è¦ï¼š
- âœ… æ›´æ–°**ä¸€ä¸ªæ–‡ä»¶**ä¸­çš„é€‰æ‹©å™¨é…ç½®
- âœ… èŠ±è´¹**10åˆ†é’Ÿ**
- âœ… ç„¶åå°±èƒ½ç”¨äº†

---

## ğŸ¯ ä¸ºä»€ä¹ˆä¸éœ€è¦å¤šä¸ªæ–‡ä»¶ï¼Ÿ

### GEOåº”ç”¨çš„æ¶æ„ï¼ˆéœ€è¦å¤šä¸ªæ–‡ä»¶ï¼‰

```
GEOåº”ç”¨/
â”œâ”€â”€ tt.js          â† å¤´æ¡å·è„šæœ¬
â”œâ”€â”€ xhs.js         â† å°çº¢ä¹¦è„šæœ¬
â”œâ”€â”€ wxgzh.js       â† å¾®ä¿¡å…¬ä¼—å·è„šæœ¬
â”œâ”€â”€ bjh.js         â† ç™¾å®¶å·è„šæœ¬
â””â”€â”€ ...            â† æ¯ä¸ªå¹³å°ä¸€ä¸ªæ–‡ä»¶
```

**åŸå› **ï¼šGEOåº”ç”¨éœ€è¦æŠŠè„šæœ¬æ³¨å…¥åˆ°æ¯ä¸ªå¹³å°çš„é¡µé¢ä¸­

### ä½ çš„ç³»ç»Ÿæ¶æ„ï¼ˆåªéœ€ä¸€ä¸ªé…ç½®ï¼‰

```
ä½ çš„ç³»ç»Ÿ/
â””â”€â”€ AccountService.ts  â† åªéœ€è¦åœ¨è¿™é‡Œæ·»åŠ é€‰æ‹©å™¨é…ç½®
```

**åŸå› **ï¼šä½ çš„ç³»ç»Ÿå·²ç»æœ‰é€šç”¨çš„ç™»å½•é€»è¾‘ï¼Œåªéœ€è¦é…ç½®ä¸åŒå¹³å°çš„é€‰æ‹©å™¨

---

## âœ… æ­£ç¡®çš„å®æ–½æ–¹æ¡ˆ

### æ–¹æ¡ˆï¼šåªä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶

**æ–‡ä»¶ä½ç½®**ï¼š`server/src/services/AccountService.ts`

**ä¿®æ”¹å†…å®¹**ï¼šåœ¨ `extractUserInfo()` æ–¹æ³•ä¸­æ›´æ–°é€‰æ‹©å™¨é…ç½®

---

## ğŸš€ å…·ä½“æ­¥éª¤ï¼ˆ10åˆ†é’Ÿå®Œæˆï¼‰

### ç¬¬1æ­¥ï¼šæ‰“å¼€æ–‡ä»¶ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
vim server/src/services/AccountService.ts
# æˆ–è€…ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨
code server/src/services/AccountService.ts
```

### ç¬¬2æ­¥ï¼šæ‰¾åˆ° extractUserInfo æ–¹æ³•ï¼ˆ1åˆ†é’Ÿï¼‰

æœç´¢ `extractUserInfo`ï¼Œæ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ï¼š

```typescript
private async extractUserInfo(page: any, platformId: string): Promise<any> {
  try {
    // å®šä¹‰é€‰æ‹©å™¨æ˜ å°„ï¼ˆæ”¯æŒå¤šä¸ªé€‰æ‹©å™¨å°è¯•ï¼‰
    const selectors: { [key: string]: string[] } = {
      // ç°æœ‰çš„é…ç½®...
    };
```

### ç¬¬3æ­¥ï¼šæ›¿æ¢é€‰æ‹©å™¨é…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰

**ç›´æ¥å¤åˆ¶ç²˜è´´ä¸‹é¢çš„ä»£ç **ï¼Œæ›¿æ¢ `const selectors` è¿™ä¸€æ®µï¼š

```typescript
const selectors: { [key: string]: string[] } = {
  // ========================================
  // ä»GEOåº”ç”¨æå–çš„é€‰æ‹©å™¨ï¼ˆå·²æµ‹è¯•ï¼‰
  // ========================================
  
  // è‡ªåª’ä½“å¹³å°
  'toutiao': [
    '.auth-avator-name',              // GEO: tt.js - å¤´åƒæ—çš„åç§°
    '.semi-navigation-header-username', // å¤‡ç”¨ï¼šå¯¼èˆªæ ç”¨æˆ·å
    '.user-name'                      // å¤‡ç”¨ï¼šé€šç”¨ç”¨æˆ·å
  ],
  
  'wangyi': [
    '.user-info .name',               // GEO: wy.js - ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ
    '.user-name',
    '.username'
  ],
  
  'souhu': [
    '.user-info .name',               // GEO: sph.js - ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ
    '.header-user-name',              // å¤‡ç”¨ï¼šå¤´éƒ¨ç”¨æˆ·å
    '.user-name'
  ],
  
  'baijiahao': [
    '.UjPPKm89R4RrZTKhwG5H',         // GEO: bjh.js - å¤´åƒå…ƒç´ 
    '.user-name',                     // å¤‡ç”¨ï¼šç”¨æˆ·å
    '.author-name'
  ],
  
  'qie': [
    '.user-info-name',                // GEO: qeh.js - ç”¨æˆ·ä¿¡æ¯åç§°
    '.user-name',
    '.username'
  ],
  
  // ç¤¾äº¤åª’ä½“å¹³å°
  'xiaohongshu': [
    '.account-name',                  // GEO: xhs.js - è´¦å·åç§°
    '.avatar img',                    // å¤‡ç”¨ï¼šå¤´åƒ
    '#header-area > div > div > div:nth-child(2) > div > span'
  ],
  
  'wechat': [
    '.weui-desktop_name',             // GEO: wxgzh.js - æ¡Œé¢ç‰ˆåç§°
    '.weui-desktop-account__info',    // å¤‡ç”¨ï¼šè´¦å·ä¿¡æ¯
    '.weui-desktop-account__nickname'
  ],
  
  'bilibili': [
    '.cc-header .right-block img',    // GEO: bili.js - å¤´éƒ¨ç™»å½•å›¾æ ‡
    '.bili-avatar',                   // å¤‡ç”¨ï¼šBç«™å¤´åƒ
    '.user-name'
  ],
  
  'douyin': [
    '.name-_lSSDc',                   // GEO: dy.js - åŠ¨æ€classå
    '.header-_F2uzl .name-_lSSDc',    // å¤‡ç”¨ï¼šå¤´éƒ¨åŒºåŸŸ
    '.username'
  ],
  
  // æŠ€æœ¯ç¤¾åŒºå¹³å°
  'zhihu': [
    '.AppHeader-profile',             // GEO: zh.js - å¤´éƒ¨ä¸ªäººèµ„æ–™
    '.Profile-name',
    '.username'
  ],
  
  'jianshu': [
    '.main-top .name',                // GEO: js.js - ä¸»åŒºåŸŸåç§°
    '.avatar>img',                    // å¤‡ç”¨ï¼šå¤´åƒ
    'nav .user img'
  ],
  
  'csdn': [
    '.user-name',                     // GEO: csdn.js - ç”¨æˆ·å
    '.username',
    '.nick-name'
  ],
  
  'juejin': [
    '.username',
    '.user-name',
    '.author-name'
  ],
  
  'segmentfault': [
    '.user-name',
    '.username',
    '.author-name'
  ],
  
  'oschina': [
    '.user-name',
    '.username',
    '.author-name'
  ],
  
  'cnblogs': [
    '.user-name',
    '.username',
    '.author-name'
  ],
  
  'v2ex': [
    '.username',
    '.user-name'
  ]
};
```

### ç¬¬4æ­¥ï¼šä¿å­˜æ–‡ä»¶ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
# ä¿å­˜å¹¶é€€å‡º
:wq
```

### ç¬¬5æ­¥ï¼šæµ‹è¯•ï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# æµ‹è¯•å¤´æ¡å·
./test-platform-login.sh toutiao

# æµ‹è¯•å°çº¢ä¹¦
./test-platform-login.sh xiaohongshu

# æµ‹è¯•å¾®ä¿¡å…¬ä¼—å·
./test-platform-login.sh wechat
```

---

## ğŸ‰ å®Œæˆï¼

**å°±è¿™ä¹ˆç®€å•ï¼**

- âœ… åªä¿®æ”¹äº†**ä¸€ä¸ªæ–‡ä»¶**
- âœ… åªèŠ±äº†**10åˆ†é’Ÿ**
- âœ… ç°åœ¨å¯ä»¥ç™»å½•**17ä¸ªå¹³å°**å¹¶è‡ªåŠ¨ä¿å­˜ç”¨æˆ·ä¿¡æ¯

---

## ğŸ“Š å·¥ä½œåŸç†

### ä½ çš„ç³»ç»Ÿå·²ç»æœ‰çš„åŠŸèƒ½

```typescript
// AccountService.ts ä¸­å·²ç»æœ‰çš„ä»£ç 

async loginWithBrowser(platform, userId) {
  // 1. æ‰“å¼€æµè§ˆå™¨ âœ…
  const browser = await chromium.launch();
  
  // 2. å¯¼èˆªåˆ°ç™»å½•é¡µé¢ âœ…
  await page.goto(platform.login_u