# 服务器端清理 - 备份恢复方案

**创建日期**: 2026-01-17  
**状态**: ✅ 推荐方案

---

## 方案概述

在删除服务器端已迁移的表和代码前，先完整备份到本地，便于：
1. 测试新功能是否完整
2. 发现问题时快速定位
3. 必要时快速恢复

---

## 备份内容清单

### 1. 数据库备份

#### 完整数据库备份
```bash
# 备份整个数据库（包含所有表）
sudo -u postgres pg_dump -d geo_system -f backup_full_20260117.sql

# 压缩备份（节省空间）
sudo -u postgres pg_dump -d geo_system | gzip > backup_full_20260117.sql.gz
```

#### 仅备份要删除的表（17 个）
```bash
sudo -u postgres pg_dump -d geo_system \
  -t articles \
  -t platform_accounts \
  -t publishing_tasks \
  -t publishing_records \
  -t publishing_logs \
  -t knowledge_bases \
  -t knowledge_documents \
  -t albums \
  -t images \
  -t distillations \
  -t topics \
  -t conversion_targets \
  -t article_settings \
  -t distillation_config \
  -t image_usage \
  -t distillation_usage \
  -t topic_usage \
  -f backup_deleted_tables_20260117.sql
```

### 2. 代码文件备份

#### 要删除的服务层文件
