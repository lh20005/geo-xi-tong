# 任务删除功能 - 快速使用指南

## 🎯 快速开始

访问文章生成页面：http://localhost:5173 → 点击侧边栏"生成文章"

## 📖 三种删除方式

### 1️⃣ 删除单个任务

**步骤**:
1. 找到要删除的任务
2. 点击该行最右侧的 **[删除]** 按钮
3. 在弹出的确认框中点击 **"删除"**

**提示**:
- ⚠️ 正在运行的任务无法删除（按钮显示为灰色）
- 💡 鼠标悬停在按钮上可以看到提示信息

---

### 2️⃣ 批量删除任务

**步骤**:
1. 勾选要删除的任务（点击每行左侧的复选框）
2. 点击顶部工具栏的 **[批量删除(n)]** 按钮
3. 在确认对话框中点击 **"确认删除"**

**提示**:
- ✅ 可以一次选择多个任务
- ⚠️ 正在运行的任务无法勾选（复选框禁用）
- 💡 顶部会显示"已选择 n 个"
- 🔄 点击"取消选择"可以清空选择

**快捷操作**:
- 点击表头的复选框可以全选当前页的所有可删除任务

---

### 3️⃣ 删除所有任务

**步骤**:
1. 点击顶部工具栏右侧的 **[删除所有任务]** 按钮
2. 查看确认对话框中的信息
3. 点击 **"确认删除"**

**提示**:
- ⚠️ 正在运行的任务会被自动保留
- 💡 确认框会显示将要删除的任务数量
- 🔔 如果有运行中任务，会显示保留数量

---

## 🛡️ 安全保护

### 运行中任务保护

系统会自动保护正在运行的任务：

| 操作 | 运行中任务 | 结果 |
|------|-----------|------|
| 单个删除 | ❌ 按钮禁用 | 无法点击 |
| 批量删除 | ❌ 复选框禁用 | 无法选择 |
| 删除所有 | ✅ 自动保留 | 只删除其他任务 |

### 确认机制

所有删除操作都需要二次确认：

- **单个删除**: 弹出确认框，显示任务ID
- **批量删除**: 显示删除数量
- **删除所有**: 显示删除数量和保留数量

---

## 💡 使用技巧

### 技巧1: 快速清理失败任务

1. 查看任务列表，找到状态为"失败"的任务
2. 勾选所有失败任务
3. 点击"批量删除"

### 技巧2: 定期清理历史任务

1. 点击"删除所有任务"
2. 系统会自动保留运行中的任务
3. 其他已完成/失败的任务会被清理

### 技巧3: 选择性删除

1. 使用复选框选择特定的任务
2. 可以跨越不同状态选择
3. 点击"批量删除"一次性清理

---

## 🎨 界面说明

### 工具栏布局

```
┌────────────────────────────────────────────────────┐
│ 📄 文章生成任务  [10个] [已选3个]  [刷新] [新建]  │
├────────────────────────────────────────────────────┤
│ [批量删除(3)] [取消选择]          [删除所有任务]  │
└────────────────────────────────────────────────────┘
```

### 任务列表

```
☐ ID  状态    进度      创建时间         [操作]
☐ 1   ✅完成  ████100%  12-13 10:00     [删除]
☑ 2   ❌失败  ██░░50%   12-13 09:00     [删除]
☐ 3   🔄运行  ███░75%   12-13 11:00     [禁用]
```

### 状态标识

- ✅ **已完成** - 绿色标签，可以删除
- ❌ **失败** - 红色标签，可以删除
- 🔄 **执行中** - 蓝色标签，无法删除
- ⏳ **等待中** - 灰色标签，可以删除

---

## ⚠️ 注意事项

### 重要提醒

1. **删除不可恢复**
   - 删除任务会同时删除关联的文章
   - 请确认后再执行删除操作

2. **运行中任务**
   - 正在运行的任务无法删除
   - 请等待任务完成或失败后再删除

3. **批量操作**
   - 批量删除会跳过运行中的任务
   - 如果选中的任务都在运行，会提示无法删除

4. **数据备份**
   - 建议定期备份重要数据
   - 删除前可以先导出文章内容

---

## 🔧 常见问题

### Q1: 为什么删除按钮是灰色的？

**A**: 该任务正在运行中，无法删除。请等待任务完成或失败后再删除。

---

### Q2: 批量删除时提示"无法删除正在运行的任务"？

**A**: 你选中的任务中包含正在运行的任务。请：
1. 取消选择运行中的任务
2. 或等待这些任务完成后再删除

---

### Q3: 点击"删除所有"后为什么还有任务？

**A**: 系统自动保留了正在运行的任务。这是安全保护机制，防止误删正在执行的任务。

---

### Q4: 删除任务后文章会怎样？

**A**: 删除任务会级联删除该任务生成的所有文章。如果需要保留文章，请不要删除任务。

---

### Q5: 可以恢复已删除的任务吗？

**A**: 不可以。删除操作是永久性的，无法恢复。请谨慎操作。

---

## 📞 获取帮助

如果遇到问题：

1. 查看浏览器控制台（F12）的错误信息
2. 查看服务器日志
3. 参考完整文档：`dev-docs/TASK_DELETE_FEATURE.md`
4. 查看测试报告：`dev-docs/TASK_DELETE_TEST_REPORT.md`

---

## 🎉 快速示例

### 示例1: 清理所有失败任务

```
1. 打开文章生成页面
2. 勾选所有红色"失败"标签的任务
3. 点击"批量删除"
4. 确认删除
✅ 完成！
```

### 示例2: 清空历史记录

```
1. 打开文章生成页面
2. 点击"删除所有任务"
3. 查看确认信息（会保留运行中任务）
4. 确认删除
✅ 完成！
```

### 示例3: 删除特定任务

```
1. 找到要删除的任务（如任务#5）
2. 点击该行的"删除"按钮
3. 在弹出框中确认
✅ 完成！
```

---

**提示**: 所有删除操作都有确认步骤，不用担心误删！

