# 账号自动刷新功能使用说明

## 功能介绍

当您在Windows登录管理器中完成平台登录后，网页端的账号列表会**自动更新**，无需手动刷新页面。

## 使用方法

### 方式一：自动更新（推荐）⭐

1. **打开网页端**
   - 访问：http://localhost:5173
   - 登录您的账号
   - 进入"平台管理"页面

2. **检查连接状态**
   - 查看页面右上角
   - 应显示绿色的"已连接"标签
   - 如果显示"未连接"，请检查网络或刷新页面

3. **使用Windows端登录**
   - 打开Windows登录管理器
   - 选择要登录的平台（如：头条、抖音等）
   - 完成登录流程

4. **自动更新**
   - 网页端会自动显示提示："检测到新账号创建，正在刷新列表..."
   - 账号列表自动更新
   - 新账号出现在列表中
   - **无需任何手动操作！**

### 方式二：手动刷新（备选）

如果自动更新失败或WebSocket未连接，可以使用手动刷新：

#### 位置1：平台管理页面
1. 找到"账号管理"卡片
2. 点击右上角的"刷新列表"按钮
3. 等待列表更新完成

#### 位置2：账号管理弹窗
1. 点击任意平台卡片
2. 在弹出的账号管理窗口中
3. 点击"刷新列表"按钮
4. 看到"账号列表已刷新"提示

## 连接状态说明

### ✅ 已连接（绿色）
- 实时同步功能正常
- 账号变化会自动更新
- 推荐使用状态

### ⚪ 未连接（灰色）
- 实时同步暂时不可用
- 可能原因：
  - 网络连接问题
  - 服务器维护
  - 浏览器限制
- 解决方法：
  - 刷新页面重新连接
  - 使用手动刷新按钮
  - 检查网络连接

## 常见问题

### Q1: 为什么显示"未连接"？
**A:** 可能的原因：
- 后端服务未启动
- 网络连接问题
- 浏览器阻止了WebSocket连接

**解决方法：**
1. 刷新页面
2. 检查网络连接
3. 使用手动刷新作为备选

### Q2: 自动更新不工作怎么办？
**A:** 请按以下步骤排查：
1. 检查连接状态是否为"已连接"
2. 打开浏览器控制台查看错误信息
3. 使用手动刷新按钮更新列表
4. 如果问题持续，请联系技术支持

### Q3: 手动刷新按钮在哪里？
**A:** 有两个位置：
1. **平台管理页面**：在"账号管理"卡片的右上角
2. **账号管理弹窗**：在"添加账号"按钮的右侧

### Q4: 刷新按钮点击后没反应？
**A:** 可能的原因：
- 网络请求失败
- 后端服务异常
- 浏览器缓存问题

**解决方法：**
1. 等待几秒后重试
2. 刷新整个页面
3. 检查浏览器控制台错误

### Q5: 多久会自动刷新一次？
**A:** 
- 不是定时刷新，而是**事件驱动**
- 只有在账号发生变化时才会刷新
- 更加高效，不浪费资源

## 技术优势

### 🚀 实时性
- 账号变化立即同步
- 延迟小于1秒
- 无需等待

### 💡 智能化
- 自动检测变化
- 智能重连
- 无需手动操作

### 🛡️ 可靠性
- 双重保障机制
- 自动降级处理
- 始终可用

### 🎯 用户友好
- 清晰的状态提示
- 友好的错误信息
- 简单易用

## 使用建议

1. **保持网页端打开**
   - 在使用Windows端登录时
   - 保持网页端的平台管理页面打开
   - 可以实时看到账号更新

2. **检查连接状态**
   - 定期查看右上角的连接状态
   - 确保显示"已连接"
   - 如果断开，刷新页面重连

3. **使用手动刷新**
   - 在连接不稳定时
   - 作为备选方案
   - 确保数据最新

4. **及时反馈问题**
   - 如果遇到问题
   - 记录错误信息
   - 联系技术支持

## 快速开始

```bash
# 1. 启动所有服务
cd server && npm run dev      # 终端1
cd client && npm run dev      # 终端2
cd windows-login-manager && npm run dev  # 终端3

# 2. 打开网页端
# 浏览器访问：http://localhost:5173

# 3. 进入平台管理页面
# 检查连接状态

# 4. 使用Windows端登录
# 观察网页端自动更新
```

## 相关文档

- **详细技术文档**：`dev-docs/ACCOUNT_AUTO_REFRESH_FEATURE.md`
- **快速测试指南**：`dev-docs/QUICK_TEST_AUTO_REFRESH.md`
- **功能总结**：`dev-docs/ACCOUNT_AUTO_REFRESH_SUMMARY.md`

## 反馈与支持

如果您在使用过程中遇到任何问题，请：
1. 查看本文档的"常见问题"部分
2. 检查浏览器控制台的错误信息
3. 联系技术支持团队

---

**提示**：此功能基于WebSocket实时通信技术，需要稳定的网络连接。如果网络不稳定，建议使用手动刷新功能。
