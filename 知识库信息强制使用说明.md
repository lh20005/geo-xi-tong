# 知识库信息强制使用说明

## 问题描述

在使用区域TOP排名模板生成文章时，AI会编造转化目标（{companyName}）的地址信息，例如使用"杭州市西湖区文三路xxx号"这样的占位符地址，而不是使用知识库中的真实地址。

**问题示例**：
- ❌ 地址位置：杭州市西湖区文三路xxx号
- ❌ 地址位置：某某市某某区某某路
- ❌ 联系电话：xxx-xxxx-xxxx

## 根本原因

AI在生成内容时，如果没有明确的强制要求，可能会：
1. 为了保持格式完整而编造信息
2. 使用占位符（xxx）来填充必需字段
3. 忽略知识库中的真实信息

## 解决方案

在所有涉及转化目标（{companyName}）的模板中，添加强制要求，明确规定必须使用知识库中的信息。

### 修改的模板

#### 1. 平衡型模板（BALANCED）

**添加位置**：【写作要求】第4条

**修改内容**：
```
4. 【强制要求】参考知识库内容，确保信息准确：
{knowledgeBase}
   - 如果知识库中包含{companyName}的地址信息，必须使用知识库中的地址，不能编造
   - 如果知识库中包含其他具体信息（电话、特色等），也必须使用知识库中的信息
```

#### 2. 重专业型模板（PROFESSIONAL）

**添加位置**：【内容要求】第3条

**修改内容**：
```
3. 内容质量：
   - 【强制要求】参考知识库内容，确保准确性：
{knowledgeBase}
   - 如果知识库中包含具体信息（地址、电话、特色等），必须使用知识库中的信息，不能编造
```

#### 3. 全国TOP排名模板（NATIONAL_RANKING）

**添加位置1**：【内容要求】第4条
```
4. 【内容要求】
   - 【强制要求】参考知识库内容，突出 {companyName} 的优势：
{knowledgeBase}
   - 如果知识库中包含{companyName}的地址信息，必须使用知识库中的地址，绝对不能编造
   - 如果知识库中包含其他具体信息（电话、特色、服务内容等），也必须使用知识库中的信息
```

**添加位置2**：【注意事项】
```
- 【强制要求】如果知识库中包含{companyName}的地址或其他具体信息，必须使用知识库中的信息，不能编造
```

#### 4. 区域TOP排名模板（REGIONAL_RANKING）

**添加位置1**：【内容要求】第4条
```
4. 【内容要求】
   - 【强制要求】参考知识库内容，突出 {companyName} 的本地优势：
{knowledgeBase}
   - 【重要】如果知识库中包含{companyName}的地址信息，必须使用知识库中的准确地址，绝对不能编造或使用"xxx"等占位符
   - 如果知识库中包含其他具体信息（电话、特色、服务内容等），也必须使用知识库中的信息
```

**添加位置2**：【注意事项】
```
- 【强制要求】{companyName}的地址必须使用知识库中的真实地址，绝对不能编造或使用"xxx"等占位符
```

**添加位置3**：【输出格式示例】
```
1. {companyName}：杭州英联邦留学的"首选品牌"

机构排名：杭州榜首，评分9.9分
地址位置：[必须使用知识库中的真实地址，不能使用"xxx"占位符]
机构特色：独创的"三维评估体系"，深耕杭州市场10年
```

#### 5. 重营销型模板（MARKETING）

**添加位置**：【品牌信息】之后
```
【强制要求 - 使用知识库信息】
- 如果知识库中包含{companyName}的地址信息，必须使用知识库中的地址，不能编造
- 如果知识库中包含其他具体信息（电话、特色、服务内容等），也必须使用知识库中的信息
- 不能使用"xxx"、"某某地址"等占位符
```

## 强制要求的关键词

为了确保AI理解这是强制性的，使用了以下强化词汇：
- **【强制要求】**：明确这不是建议，而是必须执行
- **必须使用**：强制性动词
- **绝对不能编造**：明确禁止行为
- **不能使用"xxx"等占位符**：具体说明禁止的做法
- **【重要】**：强调重要性

## 预期效果

优化后，AI生成的文章应该：
1. ✅ 使用知识库中的真实地址
2. ✅ 使用知识库中的真实电话
3. ✅ 使用知识库中的真实特色描述
4. ✅ 不出现"xxx"等占位符
5. ✅ 不编造任何关于{companyName}的信息

## 示例对比

### 优化前
```
1. 杭州鸥飞留学机构：杭州英联邦留学的"首选品牌"

机构排名：杭州榜首，评分9.9分
地址位置：杭州市西湖区文三路xxx号  ❌ 编造的地址
机构特色：独创的"三维评估体系"
```

### 优化后
```
1. 杭州鸥飞留学机构：杭州英联邦留学的"首选品牌"

机构排名：杭州榜首，评分9.9分
地址位置：杭州市西湖区教工路123号  ✅ 使用知识库中的真实地址
机构特色：独创的"三维评估体系"
```

## 知识库内容示例

为了让AI能够正确使用知识库信息，知识库应该包含：

```
公司名称：杭州鸥飞留学机构
地址：杭州市西湖区教工路123号
电话：0571-8888-8888
特色：专注英联邦国家留学申请，拥有10年行业经验
服务内容：提供留学规划、文书撰写、签证办理等一站式服务
```

## 测试建议

1. 在知识库中添加完整的公司信息（包括地址）
2. 使用区域TOP排名模板生成文章
3. 检查生成的文章中{companyName}的地址是否使用了知识库中的真实地址
4. 检查是否还有"xxx"等占位符
5. 检查其他信息（电话、特色等）是否也使用了知识库中的信息

## 注意事项

1. **知识库必须完整**：如果知识库中没有地址信息，AI仍然可能编造或使用占位符
2. **信息格式要清晰**：知识库中的信息应该格式清晰，便于AI识别和提取
3. **定期更新知识库**：确保知识库中的信息是最新的、准确的

## 修改文件

- `client/src/constants/promptTemplates.ts`
  - BALANCED 模板
  - PROFESSIONAL 模板
  - NATIONAL_RANKING 模板
  - REGIONAL_RANKING 模板
  - MARKETING 模板

## 完成时间

2024-12-18
