# GEO优化系统 - 启动脚本使用说明

## 📋 脚本列表

### 1. 启动GEO系统.command
**用途**: 前台启动所有服务（开发调试模式）

**特点**:
- ✅ 实时查看所有服务日志
- ✅ 适合开发调试
- ✅ 按 Ctrl+C 即可停止所有服务
- ⚠️ 关闭终端窗口会停止所有服务

**使用场景**: 开发调试、查看实时日志、快速测试

---

### 2. 后台启动GEO系统.command
**用途**: 后台启动所有服务（日常使用模式）

**特点**:
- ✅ 服务在后台运行
- ✅ 可以关闭终端窗口
- ✅ 自动创建日志文件
- ✅ 自动检查服务状态

**使用场景**: 日常使用、长时间运行、生产环境

---

### 3. 停止GEO系统.command
**用途**: 停止所有后台运行的服务

**特点**:
- ✅ 通过PID文件精确停止服务
- ✅ 清理相关进程
- ✅ 释放占用端口
- ✅ 保留数据库服务

**使用场景**: 停止服务、释放资源、系统维护

---

### 4. 重启GEO系统.command
**用途**: 快速重启所有服务

**特点**:
- ✅ 自动停止旧服务
- ✅ 自动启动新服务
- ✅ 一键完成重启

**使用场景**: 更新代码后重启、服务异常时重启

---

### 5. 检查服务状态.command
**用途**: 检查所有服务的运行状态

**特点**:
- ✅ 检查数据库服务状态
- ✅ 检查应用服务状态
- ✅ 检查端口占用情况
- ✅ 显示日志文件信息

**使用场景**: 诊断问题、查看服务状态、监控系统

---

## 🚀 快速开始

### 首次使用

1. **安装依赖**
   ```bash
   npm run install:all
   ```

2. **启动数据库**
   ```bash
   brew services start postgresql@14
   brew services start redis
   ```

3. **运行数据库迁移**
   ```bash
   npm run db:migrate
   ```

4. **启动系统**
   - 开发模式: 双击 `启动GEO系统.command`
   - 后台模式: 双击 `后台启动GEO系统.command`

### 日常使用

**启动系统**
```bash
双击: 后台启动GEO系统.command
```

**停止系统**
```bash
双击: 停止GEO系统.command
```

**重启系统**
```bash
双击: 重启GEO系统.command
```

**检查状态**
```bash
双击: 检查服务状态.command
```

---

## 📝 服务地址

| 服务 | 地址 | 说明 |
|------|------|------|
| 网页前端 | http://localhost:5173 | 主要的Web应用界面 |
| 后端API | http://localhost:3000 | RESTful API服务 |
| 营销网站 | http://localhost:8080 | 产品营销页面 |
| Windows管理器 | Electron应用 | 桌面应用程序 |

---

## 📂 日志文件

所有日志文件位于 `logs/` 目录：

- `backend.log` - 后端服务日志
- `frontend.log` - 前端服务日志
- `landing.log` - 营销网站日志
- `windows.log` - Windows管理器日志

**查看实时日志**:
```bash
# 后端日志
tail -f logs/backend.log

# 前端日志
tail -f logs/frontend.log

# 所有日志
tail -f logs/*.log
```

---

## 🔧 故障排除

### 问题1: 端口被占用

**症状**: 启动失败，提示端口已被占用

**解决方案**:
```bash
# 方法1: 运行停止脚本
双击: 停止GEO系统.command

# 方法2: 手动释放端口
lsof -ti:3000 | xargs kill -9
lsof -ti:5173 | xargs kill -9
lsof -ti:8080 | xargs kill -9
```

### 问题2: 数据库连接失败

**症状**: 后端服务启动失败，日志显示数据库连接错误

**解决方案**:
```bash
# 启动数据库服务
brew services start postgresql@14
brew services start redis

# 检查数据库状态
brew services list
```

### 问题3: 服务启动但无法访问

**症状**: 服务进程存在但浏览器无法访问

**解决方案**:
```bash
# 1. 检查服务状态
双击: 检查服务状态.command

# 2. 查看日志
tail -f logs/backend.log

# 3. 重启服务
双击: 重启GEO系统.command
```

### 问题4: 依赖包缺失

**症状**: 启动时报错找不到模块

**解决方案**:
```bash
# 重新安装所有依赖
npm run install:all
```

---

## 💡 最佳实践

### 开发调试
1. 使用 `启动GEO系统.command` 前台启动
2. 在终端查看实时日志
3. 修改代码后自动热重载
4. 按 Ctrl+C 停止服务

### 日常使用
1. 使用 `后台启动GEO系统.command` 后台启动
2. 关闭终端窗口
3. 通过浏览器访问服务
4. 需要时运行 `检查服务状态.command` 查看状态

### 系统维护
1. 定期查看日志文件大小
2. 清理旧的日志文件
3. 更新代码后重启服务
4. 定期备份数据库

---

## 🔒 安全提示

1. **不要在生产环境使用这些脚本** - 这些脚本是为本地开发设计的
2. **保护环境变量** - 确保 `.env` 文件不被提交到版本控制
3. **定期更新依赖** - 运行 `npm audit` 检查安全漏洞
4. **限制访问权限** - 确保只有授权用户可以访问系统

---

## 📞 获取帮助

如果遇到问题:

1. 运行 `检查服务状态.command` 查看详细状态
2. 查看日志文件了解错误信息
3. 参考故障排除部分
4. 联系技术支持团队

---

## 🎯 下一步

- 阅读 [README.md](./README.md) 了解系统架构
- 查看 [开发文档](./docs/) 了解开发指南
- 访问 [API文档](http://localhost:3000/api-docs) 查看API接口

---

**最后更新**: 2024-12-30
**版本**: 2.0
